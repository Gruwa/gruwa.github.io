{"version":3,"sources":["library/bxslider.js","library/imagesloaded.pkgd.js","library/masonry.pkgd.js","library/template.js","routes/activityScript.js","routes/infoScript.js","routes/partnerHtml.js","routes/partnerScript.js","routes/server.js"],"names":["$","defaults","mode","slideSelector","infiniteLoop","hideControlOnEnd","speed","easing","slideMargin","startSlide","randomStart","captions","ticker","tickerHover","adaptiveHeight","adaptiveHeightSpeed","video","useCSS","preloadImages","responsive","slideZIndex","wrapperClass","touchEnabled","swipeThreshold","oneToOneTouch","preventDefaultSwipeX","preventDefaultSwipeY","ariaLive","ariaHidden","keyboardEnabled","pager","pagerType","pagerShortSeparator","pagerSelector","buildPager","pagerCustom","controls","nextText","prevText","nextSelector","prevSelector","autoControls","startText","stopText","autoControlsCombine","autoControlsSelector","auto","pause","autoStart","autoDirection","stopAutoOnClick","autoHover","autoDelay","autoSlideForOnePage","minSlides","maxSlides","moveSlides","slideWidth","shrinkItems","onSliderLoad","onSlideBefore","onSlideAfter","onSlideNext","onSlidePrev","onSliderResize","fn","bxSlider","options","length","each","slider","el","windowWidth","window","width","windowHeight","height","data","init","settings","extend","parseInt","children","Math","floor","random","active","index","carousel","minThreshold","maxThreshold","working","interval","animProp","usingCSS","div","document","createElement","props","i","style","undefined","cssPrefix","replace","toLowerCase","attr","setup","preloadSelector","eq","wrap","viewport","parent","loader","prepend","css","position","overflow","maxWidth","getViewportMaxWidth","float","listStyle","getSlideWidth","zIndex","display","appendCaptions","last","getPagerQty","fitVids","appendControls","appendControlsAuto","appendPager","after","loadElements","start","selector","callback","total","find","count","one","complete","trigger","slice","sliceAppend","clone","addClass","slicePrepend","append","remove","setSlidePosition","getViewportHeight","redrawSlider","call","initialized","bind","resizeWindow","initAuto","initTicker","updatePagerActive","updateDirectionControls","initTouch","keydown","keyPress","currentIndex","getMoveBy","add","outerHeight","max","apply","map","get","parseFloat","newElWidth","wrapWidth","ceil","getNumberSlidesShowing","slidesShowing","childWidth","first","pagerQty","breakPoint","counter","lastChild","lastShowingIndex","setPositionProperty","left","outerWidth","top","value","type","duration","params","animateObj","propValue","e","target","is","unbind","updateAfterSlideTransition","resetValue","tickerLoop","animate","populatePager","pagerHtml","linkContent","isFunction","pagerEl","html","on","clickPagerBind","next","prev","clickNextBind","clickPrevBind","directionEl","stop","autoEl","clickStartBind","clickStopBind","updateAutoControls","title","preventDefault","hasClass","stopAuto","goToNextSlide","goToPrevSlide","startAuto","pagerLink","pagerIndex","currentTarget","goToSlide","slideIndex","len","removeClass","oldIndex","state","timeout","setTimeout","focus","blur","hover","autoPaused","startPosition","transform","idx","ratio","property","newSpeed","totalDimens","split","abs","resumeSpeed","reset","animateProperty","isOnScreen","win","scrollTop","scrollLeft","bounds","offset","right","bottom","activeElementTag","activeElement","tagName","tagFilters","p","RegExp","result","exec","keyCode","touch","x","y","end","onTouchStart","originalPos","orig","originalEvent","touchPoints","changedTouches","pageX","pageY","setPointerCapture","pointerId","onTouchMove","onTouchEnd","onPointerCancel","releasePointerCapture","xMovement","yMovement","change","distance","windowWidthNew","windowHeightNew","applyAriaHiddenAttributes","startVisibleIndex","numberOfSlidesShowing","setSlideIndex","direction","performTransition","moveBy","requestEl","filter","fadeOut","fadeIn","preventControlUpdate","setInterval","clearInterval","getCurrentSlide","getCurrentSlideElement","getSlideElement","getSlideCount","isWorking","destroySlider","removeAttr","unwrap","removeData","reloadSlider","jQuery","global","factory","define","amd","module","exports","EvEmitter","proto","prototype","eventName","listener","events","_events","listeners","indexOf","push","once","onceEvents","_onceEvents","onceListeners","off","splice","emitEvent","args","isOnce","require","imagesLoaded","console","a","b","prop","makeArray","obj","ary","Array","isArray","ImagesLoaded","elem","onAlways","querySelectorAll","elements","getImages","jqDeferred","Deferred","check","Object","create","images","forEach","addElementImages","nodeName","addImage","background","addElementBackgroundImages","nodeType","elementNodeTypes","childImgs","img","child","getComputedStyle","reURL","matches","backgroundImage","url","addBackground","loadingImage","LoadingImage","Background","_this","progressedCount","hasAnyBroken","onProgress","image","message","progress","isLoaded","notify","debug","log","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","Image","addEventListener","src","handleEvent","event","method","onload","unbindEvents","onerror","removeEventListener","element","makeJQueryPlugin","instance","promise","jQueryBridget","arraySlice","logError","error","namespace","PluginClass","option","opts","isPlainObject","arg0","arguments","methodCall","plainCall","$elems","methodName","returnValue","pluginMethodStr","charAt","_init","updateJQuery","bridget","getSize","getStyleSize","num","isValid","isNaN","noop","measurements","measurementsLength","getZeroSize","size","innerWidth","innerHeight","measurement","getStyle","isSetup","isBoxSizeOuter","padding","borderStyle","borderWidth","boxSizing","body","documentElement","appendChild","removeChild","querySelector","offsetWidth","offsetHeight","isBorderBox","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingTop","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","matchesSelector","matchesMethod","ElemProto","Element","prefixes","prefix","fizzyUIUtils","utils","modulo","removeFrom","getParent","parentNode","getQueryElement","filterFindElements","elems","ffElems","HTMLElement","childElems","debounceMethod","_class","threshold","timeoutName","clearTimeout","docReady","readyState","toDashed","str","match","$1","$2","htmlInit","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","concat","dataOptionsAttr","getAttribute","JSON","parse","className","Outlayer","Item","isEmptyObj","docElemStyle","transitionProperty","transition","transformProperty","transitionEndEvent","WebkitTransition","vendorProperties","transitionDuration","transitionDelay","layout","_create","constructor","_transn","ingProperties","clean","onEnd","elemStyle","supportedProp","getPosition","isOriginLeft","_getOption","isOriginTop","xValue","yValue","layoutSize","layoutPosition","xPadding","xProperty","xResetProperty","getXValue","yPadding","yProperty","yResetProperty","getYValue","isHorizontal","percentPosition","_transitionTo","curX","curY","compareX","compareY","didNotMove","setPosition","isTransitioning","transX","transY","transitionStyle","getTranslate","to","onTransitionEnd","isCleaning","goTo","moveTo","_nonTransition","_removeStyles","_transition","from","h","enableTransition","toDashedAll","transitionProps","staggerDelay","onwebkitTransitionEnd","ontransitionend","onotransitionend","dashedVendorProperties","propertyName","disableTransition","removeTransitionStyles","cleanStyle","cleanTransitionStyle","stagger","delay","removeElem","hide","reveal","isHidden","transitionEndProperty","getHideRevealTransitionEndProperty","onRevealTransitionEnd","hiddenStyle","visibleStyle","styleProperty","optionStyle","opacity","onHideTransitionEnd","destroy","GUID","instances","queryElement","$element","id","outlayerGUID","isInitLayout","containerStyle","initLayout","originLeft","originTop","resize","resizeContainer","oldOption","compatOptions","horizontal","layoutInstant","reloadItems","stamps","stamp","canBindResize","bindResize","items","_itemize","itemElems","_filterFindItemElements","item","itemSelector","getItemElements","_resetLayout","_manageStamps","isInstant","_isLayoutInited","layoutItems","_getMeasurement","_getItemsForLayout","_layoutItems","_postLayout","isIgnored","_emitCompleteOnItems","queue","_getItemLayoutPosition","isLayoutInstant","_processLayoutQueue","updateStagger","_positionItem","getMilliseconds","isResizingContainer","_getContainerSize","_setContainerMeasure","measure","isWidth","elemSize","onComplete","dispatchEvent","doneCount","tick","emitArgs","$event","Event","ignore","getItem","unignore","_find","unstamp","_getBoundingRect","_manageStamp","boundingRect","getBoundingClientRect","_boundingRect","_getElementOffset","thisRect","isResizeBound","unbindResize","onresize","needsResizeLayout","hasSizes","addItems","appended","prepended","previousItems","revealItemElements","getItems","hideItemElements","removeItems","Layout","subclass","Parent","SubClass","msUnits","ms","s","time","unit","mult","Masonry","fitWidth","measureColumns","colYs","cols","maxY","horizontalColIndex","getContainerWidth","columnWidth","firstItem","firstItemElem","containerWidth","gutter","excess","mathMethod","isFitWidth","container","remainder","colSpan","min","colPosMethod","horizontalOrder","colPosition","col","setHeight","setMax","_getTopColPosition","colGroup","_getTopColGroup","minimumY","groupCount","_getColGroupY","groupColYs","_getHorizontalColPosition","isOver","hasSize","stampSize","firstX","lastX","firstCol","lastCol","stampMaxY","_getContainerFitWidth","unusedCols","previousWidth","cache","tmpl","test","getElementById","innerHTML","Function","join","$value","randWDclassic","n","abd","aL","ajax","dataType","key","q","image_type","per_page","category","min_width","ServerPhotoCallback","$data","$html","$dataTmpl","$SearchContent","bar","submit","val","$grid","masonry","$templateScript","$jsData","$serverData","partnerHtml","$content","template","$ServerData","name","surname","photo","info","colorIcon","icon","stringify"],"mappings":";;AAAA;;;;;;;AAOA,CAAC,CAAC,UAASA,CAAT,EAAY;;AAEZ,MAAIC,WAAW;;AAEb;AACAC,UAAM,YAHO;AAIbC,mBAAe,EAJF;AAKbC,kBAAc,IALD;AAMbC,sBAAkB,KANL;AAObC,WAAO,GAPM;AAQbC,YAAQ,IARK;AASbC,iBAAa,CATA;AAUbC,gBAAY,CAVC;AAWbC,iBAAa,KAXA;AAYbC,cAAU,KAZG;AAabC,YAAQ,KAbK;AAcbC,iBAAa,KAdA;AAebC,oBAAgB,KAfH;AAgBbC,yBAAqB,GAhBR;AAiBbC,WAAO,KAjBM;AAkBbC,YAAQ,IAlBK;AAmBbC,mBAAe,SAnBF;AAoBbC,gBAAY,IApBC;AAqBbC,iBAAa,EArBA;AAsBbC,kBAAc,YAtBD;;AAwBb;AACAC,kBAAc,IAzBD;AA0BbC,oBAAgB,EA1BH;AA2BbC,mBAAe,IA3BF;AA4BbC,0BAAsB,IA5BT;AA6BbC,0BAAsB,KA7BT;;AA+Bb;AACAC,cAAU,IAhCG;AAiCbC,gBAAY,IAjCC;;AAmCb;AACAC,qBAAiB,KApCJ;;AAsCb;AACAC,WAAO,IAvCM;AAwCbC,eAAW,MAxCE;AAyCbC,yBAAqB,KAzCR;AA0CbC,mBAAe,IA1CF;AA2CbC,gBAAY,IA3CC;AA4CbC,iBAAa,IA5CA;;AA8Cb;AACAC,cAAU,IA/CG;AAgDbC,cAAU,MAhDG;AAiDbC,cAAU,MAjDG;AAkDbC,kBAAc,IAlDD;AAmDbC,kBAAc,IAnDD;AAoDbC,kBAAc,KApDD;AAqDbC,eAAW,OArDE;AAsDbC,cAAU,MAtDG;AAuDbC,yBAAqB,KAvDR;AAwDbC,0BAAsB,IAxDT;;AA0Db;AACAC,UAAM,KA3DO;AA4DbC,WAAO,IA5DM;AA6DbC,eAAW,IA7DE;AA8DbC,mBAAe,MA9DF;AA+DbC,qBAAiB,KA/DJ;AAgEbC,eAAW,KAhEE;AAiEbC,eAAW,CAjEE;AAkEbC,yBAAqB,KAlER;;AAoEb;AACAC,eAAW,CArEE;AAsEbC,eAAW,CAtEE;AAuEbC,gBAAY,CAvEC;AAwEbC,gBAAY,CAxEC;AAyEbC,iBAAa,KAzEA;;AA2Eb;AACAC,kBAAc,wBAAW;AAAE,aAAO,IAAP;AAAc,KA5E5B;AA6EbC,mBAAe,yBAAW;AAAE,aAAO,IAAP;AAAc,KA7E7B;AA8EbC,kBAAc,wBAAW;AAAE,aAAO,IAAP;AAAc,KA9E5B;AA+EbC,iBAAa,uBAAW;AAAE,aAAO,IAAP;AAAc,KA/E3B;AAgFbC,iBAAa,uBAAW;AAAE,aAAO,IAAP;AAAc,KAhF3B;AAiFbC,oBAAgB,0BAAW;AAAE,aAAO,IAAP;AAAc;AAjF9B,GAAf;;AAoFAhE,IAAEiE,EAAF,CAAKC,QAAL,GAAgB,UAASC,OAAT,EAAkB;;AAEhC,QAAI,KAAKC,MAAL,KAAgB,CAApB,EAAuB;AACrB,aAAO,IAAP;AACD;;AAED;AACA,QAAI,KAAKA,MAAL,GAAc,CAAlB,EAAqB;AACnB,WAAKC,IAAL,CAAU,YAAW;AACnBrE,UAAE,IAAF,EAAQkE,QAAR,CAAiBC,OAAjB;AACD,OAFD;AAGA,aAAO,IAAP;AACD;;AAED;AACA,QAAIG,SAAS,EAAb;;AACA;AACAC,SAAK,IAFL;;AAGA;AACAC,kBAAcxE,EAAEyE,MAAF,EAAUC,KAAV,EAJd;AAAA,QAKAC,eAAe3E,EAAEyE,MAAF,EAAUG,MAAV,EALf;;AAOA;AACA,QAAI5E,EAAEuE,EAAF,EAAMM,IAAN,CAAW,UAAX,CAAJ,EAA4B;AAAE;AAAS;;AAEvC;;;;;;AAMA;;;AAGA,QAAIC,OAAO,SAAPA,IAAO,GAAW;AACpB;AACA,UAAI9E,EAAEuE,EAAF,EAAMM,IAAN,CAAW,UAAX,CAAJ,EAA4B;AAAE;AAAS;AACvC;AACAP,aAAOS,QAAP,GAAkB/E,EAAEgF,MAAF,CAAS,EAAT,EAAa/E,QAAb,EAAuBkE,OAAvB,CAAlB;AACA;AACAG,aAAOS,QAAP,CAAgBtB,UAAhB,GAA6BwB,SAASX,OAAOS,QAAP,CAAgBtB,UAAzB,CAA7B;AACA;AACAa,aAAOY,QAAP,GAAkBX,GAAGW,QAAH,CAAYZ,OAAOS,QAAP,CAAgB5E,aAA5B,CAAlB;AACA;AACA,UAAImE,OAAOY,QAAP,CAAgBd,MAAhB,GAAyBE,OAAOS,QAAP,CAAgBzB,SAA7C,EAAwD;AAAEgB,eAAOS,QAAP,CAAgBzB,SAAhB,GAA4BgB,OAAOY,QAAP,CAAgBd,MAA5C;AAAqD;AAC/G,UAAIE,OAAOY,QAAP,CAAgBd,MAAhB,GAAyBE,OAAOS,QAAP,CAAgBxB,SAA7C,EAAwD;AAAEe,eAAOS,QAAP,CAAgBxB,SAAhB,GAA4Be,OAAOY,QAAP,CAAgBd,MAA5C;AAAqD;AAC/G;AACA,UAAIE,OAAOS,QAAP,CAAgBrE,WAApB,EAAiC;AAAE4D,eAAOS,QAAP,CAAgBtE,UAAhB,GAA6B0E,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgBf,OAAOY,QAAP,CAAgBd,MAA3C,CAA7B;AAAkF;AACrH;AACAE,aAAOgB,MAAP,GAAgB,EAAEC,OAAOjB,OAAOS,QAAP,CAAgBtE,UAAzB,EAAhB;AACA;AACA6D,aAAOkB,QAAP,GAAkBlB,OAAOS,QAAP,CAAgBzB,SAAhB,GAA4B,CAA5B,IAAiCgB,OAAOS,QAAP,CAAgBxB,SAAhB,GAA4B,CAA7D,GAAiE,IAAjE,GAAwE,KAA1F;AACA;AACA,UAAIe,OAAOkB,QAAX,EAAqB;AAAElB,eAAOS,QAAP,CAAgB7D,aAAhB,GAAgC,KAAhC;AAAwC;AAC/D;AACA;AACAoD,aAAOmB,YAAP,GAAuBnB,OAAOS,QAAP,CAAgBzB,SAAhB,GAA4BgB,OAAOS,QAAP,CAAgBtB,UAA7C,GAA4D,CAACa,OAAOS,QAAP,CAAgBzB,SAAhB,GAA4B,CAA7B,IAAkCgB,OAAOS,QAAP,CAAgBvE,WAApI;AACA8D,aAAOoB,YAAP,GAAuBpB,OAAOS,QAAP,CAAgBxB,SAAhB,GAA4Be,OAAOS,QAAP,CAAgBtB,UAA7C,GAA4D,CAACa,OAAOS,QAAP,CAAgBxB,SAAhB,GAA4B,CAA7B,IAAkCe,OAAOS,QAAP,CAAgBvE,WAApI;AACA;AACA8D,aAAOqB,OAAP,GAAiB,KAAjB;AACA;AACArB,aAAOlC,QAAP,GAAkB,EAAlB;AACA;AACAkC,aAAOsB,QAAP,GAAkB,IAAlB;AACA;AACAtB,aAAOuB,QAAP,GAAkBvB,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,UAAzB,GAAsC,KAAtC,GAA8C,MAAhE;AACA;AACAoE,aAAOwB,QAAP,GAAkBxB,OAAOS,QAAP,CAAgB9D,MAAhB,IAA0BqD,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,MAAnD,IAA8D,YAAW;AACzF;AACA,YAAI6F,MAAMC,SAASC,aAAT,CAAuB,KAAvB,CAAV;;AACA;AACAC,gBAAQ,CAAC,mBAAD,EAAsB,gBAAtB,EAAwC,cAAxC,EAAwD,eAAxD,CAFR;AAGA;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAID,MAAM9B,MAA1B,EAAkC+B,GAAlC,EAAuC;AACrC,cAAIJ,IAAIK,KAAJ,CAAUF,MAAMC,CAAN,CAAV,MAAwBE,SAA5B,EAAuC;AACrC/B,mBAAOgC,SAAP,GAAmBJ,MAAMC,CAAN,EAASI,OAAT,CAAiB,aAAjB,EAAgC,EAAhC,EAAoCC,WAApC,EAAnB;AACAlC,mBAAOuB,QAAP,GAAkB,MAAMvB,OAAOgC,SAAb,GAAyB,YAA3C;AACA,mBAAO,IAAP;AACD;AACF;AACD,eAAO,KAAP;AACD,OAd+E,EAAhF;AAeA;AACA,UAAIhC,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,UAA7B,EAAyC;AAAEoE,eAAOS,QAAP,CAAgBxB,SAAhB,GAA4Be,OAAOS,QAAP,CAAgBzB,SAA5C;AAAwD;AACnG;AACAiB,SAAGM,IAAH,CAAQ,WAAR,EAAqBN,GAAGkC,IAAH,CAAQ,OAAR,CAArB;AACAlC,SAAGW,QAAH,CAAYZ,OAAOS,QAAP,CAAgB5E,aAA5B,EAA2CkE,IAA3C,CAAgD,YAAW;AACzDrE,UAAE,IAAF,EAAQ6E,IAAR,CAAa,WAAb,EAA0B7E,EAAE,IAAF,EAAQyG,IAAR,CAAa,OAAb,CAA1B;AACD,OAFD;;AAIA;AACAC;AACD,KA1DD;;AA4DA;;;AAGA,QAAIA,QAAQ,SAARA,KAAQ,GAAW;AACrB,UAAIC,kBAAkBrC,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBtC,OAAOS,QAAP,CAAgBtE,UAAnC,CAAtB,CADqB,CACiD;;AAEtE;AACA8D,SAAGsC,IAAH,CAAQ,iBAAiBvC,OAAOS,QAAP,CAAgB1D,YAAjC,GAAgD,yCAAxD;AACA;AACAiD,aAAOwC,QAAP,GAAkBvC,GAAGwC,MAAH,EAAlB;;AAEA;AACA,UAAIzC,OAAOS,QAAP,CAAgBpD,QAAhB,IAA4B,CAAC2C,OAAOS,QAAP,CAAgBnE,MAAjD,EAAyD;AACvD0D,eAAOwC,QAAP,CAAgBL,IAAhB,CAAqB,WAArB,EAAkC,QAAlC;AACD;AACD;AACAnC,aAAO0C,MAAP,GAAgBhH,EAAE,4BAAF,CAAhB;AACAsE,aAAOwC,QAAP,CAAgBG,OAAhB,CAAwB3C,OAAO0C,MAA/B;AACA;AACA;AACAzC,SAAG2C,GAAH,CAAO;AACLxC,eAAOJ,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAAzB,GAAyCoE,OAAOY,QAAP,CAAgBd,MAAhB,GAAyB,IAAzB,GAAgC,GAAjC,GAAwC,GAAhF,GAAsF,MADxF;AAEL+C,kBAAU;AAFL,OAAP;AAIA;AACA,UAAI7C,OAAOwB,QAAP,IAAmBxB,OAAOS,QAAP,CAAgBxE,MAAvC,EAA+C;AAC7CgE,WAAG2C,GAAH,CAAO,MAAM5C,OAAOgC,SAAb,GAAyB,6BAAhC,EAA+DhC,OAAOS,QAAP,CAAgBxE,MAA/E;AACF;AACC,OAHD,MAGO,IAAI,CAAC+D,OAAOS,QAAP,CAAgBxE,MAArB,EAA6B;AAClC+D,eAAOS,QAAP,CAAgBxE,MAAhB,GAAyB,OAAzB;AACD;AACD;AACA+D,aAAOwC,QAAP,CAAgBI,GAAhB,CAAoB;AAClBxC,eAAO,MADW;AAElB0C,kBAAU,QAFQ;AAGlBD,kBAAU;AAHQ,OAApB;AAKA7C,aAAOwC,QAAP,CAAgBC,MAAhB,GAAyBG,GAAzB,CAA6B;AAC3BG,kBAAUC;AADiB,OAA7B;AAGA;AACAhD,aAAOY,QAAP,CAAgBgC,GAAhB,CAAoB;AAClBK,eAAOjD,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAAzB,GAAwC,MAAxC,GAAiD,MADtC;AAElBsH,mBAAW,MAFO;AAGlBL,kBAAU;AAHQ,OAApB;AAKA;AACA7C,aAAOY,QAAP,CAAgBgC,GAAhB,CAAoB,OAApB,EAA6BO,eAA7B;AACA;AACA,UAAInD,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAAzB,IAAyCoE,OAAOS,QAAP,CAAgBvE,WAAhB,GAA8B,CAA3E,EAA8E;AAAE8D,eAAOY,QAAP,CAAgBgC,GAAhB,CAAoB,aAApB,EAAmC5C,OAAOS,QAAP,CAAgBvE,WAAnD;AAAkE;AAClJ,UAAI8D,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,UAAzB,IAAuCoE,OAAOS,QAAP,CAAgBvE,WAAhB,GAA8B,CAAzE,EAA4E;AAAE8D,eAAOY,QAAP,CAAgBgC,GAAhB,CAAoB,cAApB,EAAoC5C,OAAOS,QAAP,CAAgBvE,WAApD;AAAmE;AACjJ;AACA,UAAI8D,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,MAA7B,EAAqC;AACnCoE,eAAOY,QAAP,CAAgBgC,GAAhB,CAAoB;AAClBC,oBAAU,UADQ;AAElBO,kBAAQ,CAFU;AAGlBC,mBAAS;AAHS,SAApB;AAKA;AACArD,eAAOY,QAAP,CAAgB0B,EAAhB,CAAmBtC,OAAOS,QAAP,CAAgBtE,UAAnC,EAA+CyG,GAA/C,CAAmD,EAACQ,QAAQpD,OAAOS,QAAP,CAAgB3D,WAAzB,EAAsCuG,SAAS,OAA/C,EAAnD;AACD;AACD;AACArD,aAAOlC,QAAP,CAAgBmC,EAAhB,GAAqBvE,EAAE,6BAAF,CAArB;AACA;AACA,UAAIsE,OAAOS,QAAP,CAAgBpE,QAApB,EAA8B;AAAEiH;AAAmB;AACnD;AACAtD,aAAOgB,MAAP,CAAcuC,IAAd,GAAqBvD,OAAOS,QAAP,CAAgBtE,UAAhB,KAA+BqH,gBAAgB,CAApE;AACA;AACA,UAAIxD,OAAOS,QAAP,CAAgB/D,KAApB,EAA2B;AAAEuD,WAAGwD,OAAH;AAAe;AAC5C,UAAIzD,OAAOS,QAAP,CAAgB7D,aAAhB,KAAkC,KAAlC,IAA2CoD,OAAOS,QAAP,CAAgBnE,MAA/D,EAAuE;AAAE+F,0BAAkBrC,OAAOY,QAAzB;AAAoC;AAC7G;AACA,UAAI,CAACZ,OAAOS,QAAP,CAAgBnE,MAArB,EAA6B;AAC3B;AACA,YAAI0D,OAAOS,QAAP,CAAgB3C,QAApB,EAA8B;AAAE4F;AAAmB;AACnD;AACA,YAAI1D,OAAOS,QAAP,CAAgBjC,IAAhB,IAAwBwB,OAAOS,QAAP,CAAgBtC,YAA5C,EAA0D;AAAEwF;AAAuB;AACnF;AACA,YAAI3D,OAAOS,QAAP,CAAgBjD,KAApB,EAA2B;AAAEoG;AAAgB;AAC7C;AACA,YAAI5D,OAAOS,QAAP,CAAgB3C,QAAhB,IAA4BkC,OAAOS,QAAP,CAAgBtC,YAA5C,IAA4D6B,OAAOS,QAAP,CAAgBjD,KAAhF,EAAuF;AAAEwC,iBAAOwC,QAAP,CAAgBqB,KAAhB,CAAsB7D,OAAOlC,QAAP,CAAgBmC,EAAtC;AAA4C;AACvI;AACC,OAVD,MAUO;AACLD,eAAOS,QAAP,CAAgBjD,KAAhB,GAAwB,KAAxB;AACD;AACDsG,mBAAazB,eAAb,EAA8B0B,KAA9B;AACD,KAlFD;;AAoFA,QAAID,eAAe,SAAfA,YAAe,CAASE,QAAT,EAAmBC,QAAnB,EAA6B;AAC9C,UAAIC,QAAQF,SAASG,IAAT,CAAc,2BAAd,EAA2CrE,MAAvD;AAAA,UACAsE,QAAQ,CADR;AAEA,UAAIF,UAAU,CAAd,EAAiB;AACfD;AACA;AACD;AACDD,eAASG,IAAT,CAAc,2BAAd,EAA2CpE,IAA3C,CAAgD,YAAW;AACzDrE,UAAE,IAAF,EAAQ2I,GAAR,CAAY,YAAZ,EAA0B,YAAW;AACnC,cAAI,EAAED,KAAF,KAAYF,KAAhB,EAAuB;AAAED;AAAa;AACvC,SAFD,EAEGlE,IAFH,CAEQ,YAAW;AACjB,cAAI,KAAKuE,QAAT,EAAmB;AAAE5I,cAAE,IAAF,EAAQ6I,OAAR,CAAgB,MAAhB;AAA0B;AAChD,SAJD;AAKD,OAND;AAOD,KAdD;;AAgBA;;;AAGA,QAAIR,QAAQ,SAARA,KAAQ,GAAW;AACrB;AACA,UAAI/D,OAAOS,QAAP,CAAgB3E,YAAhB,IAAgCkE,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,MAAzD,IAAmE,CAACoE,OAAOS,QAAP,CAAgBnE,MAAxF,EAAgG;AAC9F,YAAIkI,QAAWxE,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,UAAzB,GAAsCoE,OAAOS,QAAP,CAAgBzB,SAAtD,GAAkEgB,OAAOS,QAAP,CAAgBxB,SAAjG;AAAA,YACAwF,cAAezE,OAAOY,QAAP,CAAgB4D,KAAhB,CAAsB,CAAtB,EAAyBA,KAAzB,EAAgCE,KAAhC,CAAsC,IAAtC,EAA4CC,QAA5C,CAAqD,UAArD,CADf;AAAA,YAEAC,eAAe5E,OAAOY,QAAP,CAAgB4D,KAAhB,CAAsB,CAACA,KAAvB,EAA8BE,KAA9B,CAAoC,IAApC,EAA0CC,QAA1C,CAAmD,UAAnD,CAFf;AAGA,YAAI3E,OAAOS,QAAP,CAAgBnD,UAApB,EAAgC;AAC9BmH,sBAAYtC,IAAZ,CAAiB,aAAjB,EAAgC,IAAhC;AACAyC,uBAAazC,IAAb,CAAkB,aAAlB,EAAiC,IAAjC;AACD;AACDlC,WAAG4E,MAAH,CAAUJ,WAAV,EAAuB9B,OAAvB,CAA+BiC,YAA/B;AACD;AACD;AACA5E,aAAO0C,MAAP,CAAcoC,MAAd;AACA;AACAC;AACA;AACA,UAAI/E,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,UAA7B,EAAyC;AAAEoE,eAAOS,QAAP,CAAgBjE,cAAhB,GAAiC,IAAjC;AAAwC;AACnF;AACAwD,aAAOwC,QAAP,CAAgBlC,MAAhB,CAAuB0E,mBAAvB;AACA;AACA/E,SAAGgF,YAAH;AACA;AACAjF,aAAOS,QAAP,CAAgBpB,YAAhB,CAA6B6F,IAA7B,CAAkCjF,EAAlC,EAAsCD,OAAOgB,MAAP,CAAcC,KAApD;AACA;AACAjB,aAAOmF,WAAP,GAAqB,IAArB;AACA;AACA,UAAInF,OAAOS,QAAP,CAAgB5D,UAApB,EAAgC;AAAEnB,UAAEyE,MAAF,EAAUiF,IAAV,CAAe,QAAf,EAAyBC,YAAzB;AAAyC;AAC3E;AACA,UAAIrF,OAAOS,QAAP,CAAgBjC,IAAhB,IAAwBwB,OAAOS,QAAP,CAAgB/B,SAAxC,KAAsD8E,gBAAgB,CAAhB,IAAqBxD,OAAOS,QAAP,CAAgB1B,mBAA3F,CAAJ,EAAqH;AAAEuG;AAAa;AACpI;AACA,UAAItF,OAAOS,QAAP,CAAgBnE,MAApB,EAA4B;AAAEiJ;AAAe;AAC7C;AACA,UAAIvF,OAAOS,QAAP,CAAgBjD,KAApB,EAA2B;AAAEgI,0BAAkBxF,OAAOS,QAAP,CAAgBtE,UAAlC;AAAgD;AAC7E;AACA,UAAI6D,OAAOS,QAAP,CAAgB3C,QAApB,EAA8B;AAAE2H;AAA4B;AAC5D;AACA,UAAIzF,OAAOS,QAAP,CAAgBzD,YAAhB,IAAgC,CAACgD,OAAOS,QAAP,CAAgBnE,MAArD,EAA6D;AAAEoJ;AAAc;AAC7E;AACA,UAAI1F,OAAOS,QAAP,CAAgBlD,eAAhB,IAAmC,CAACyC,OAAOS,QAAP,CAAgBnE,MAAxD,EAAgE;AAC9DZ,UAAEgG,QAAF,EAAYiE,OAAZ,CAAoBC,QAApB;AACD;AACF,KA1CD;;AA4CA;;;AAGA,QAAIZ,oBAAoB,SAApBA,iBAAoB,GAAW;AACjC,UAAI1E,SAAS,CAAb;AACA;AACA,UAAIM,WAAWlF,GAAf;AACA;AACA,UAAIsE,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,UAAzB,IAAuC,CAACoE,OAAOS,QAAP,CAAgBjE,cAA5D,EAA4E;AAC1EoE,mBAAWZ,OAAOY,QAAlB;AACD,OAFD,MAEO;AACL;AACA,YAAI,CAACZ,OAAOkB,QAAZ,EAAsB;AACpBN,qBAAWZ,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBtC,OAAOgB,MAAP,CAAcC,KAAjC,CAAX;AACF;AACC,SAHD,MAGO;AACL;AACA,cAAI4E,eAAe7F,OAAOS,QAAP,CAAgBvB,UAAhB,KAA+B,CAA/B,GAAmCc,OAAOgB,MAAP,CAAcC,KAAjD,GAAyDjB,OAAOgB,MAAP,CAAcC,KAAd,GAAsB6E,WAAlG;AACA;AACAlF,qBAAWZ,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBuD,YAAnB,CAAX;AACA;AACA,eAAKhE,IAAI,CAAT,EAAYA,KAAK7B,OAAOS,QAAP,CAAgBxB,SAAhB,GAA4B,CAA7C,EAAgD4C,GAAhD,EAAqD;AACnD;AACA,gBAAIgE,eAAehE,CAAf,IAAoB7B,OAAOY,QAAP,CAAgBd,MAAxC,EAAgD;AAC9Cc,yBAAWA,SAASmF,GAAT,CAAa/F,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBT,IAAI,CAAvB,CAAb,CAAX;AACD,aAFD,MAEO;AACLjB,yBAAWA,SAASmF,GAAT,CAAa/F,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBuD,eAAehE,CAAlC,CAAb,CAAX;AACD;AACF;AACF;AACF;AACD;AACA,UAAI7B,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,UAA7B,EAAyC;AACvCgF,iBAASb,IAAT,CAAc,UAASkB,KAAT,EAAgB;AAC5BX,oBAAU5E,EAAE,IAAF,EAAQsK,WAAR,EAAV;AACD,SAFD;AAGA;AACA,YAAIhG,OAAOS,QAAP,CAAgBvE,WAAhB,GAA8B,CAAlC,EAAqC;AACnCoE,oBAAUN,OAAOS,QAAP,CAAgBvE,WAAhB,IAA+B8D,OAAOS,QAAP,CAAgBzB,SAAhB,GAA4B,CAA3D,CAAV;AACD;AACH;AACC,OATD,MASO;AACLsB,iBAASO,KAAKoF,GAAL,CAASC,KAAT,CAAerF,IAAf,EAAqBD,SAASuF,GAAT,CAAa,YAAW;AACpD,iBAAOzK,EAAE,IAAF,EAAQsK,WAAR,CAAoB,KAApB,CAAP;AACD,SAF6B,EAE3BI,GAF2B,EAArB,CAAT;AAGD;;AAED,UAAIpG,OAAOwC,QAAP,CAAgBI,GAAhB,CAAoB,YAApB,MAAsC,YAA1C,EAAwD;AACtDtC,kBAAU+F,WAAWrG,OAAOwC,QAAP,CAAgBI,GAAhB,CAAoB,aAApB,CAAX,IAAiDyD,WAAWrG,OAAOwC,QAAP,CAAgBI,GAAhB,CAAoB,gBAApB,CAAX,CAAjD,GACJyD,WAAWrG,OAAOwC,QAAP,CAAgBI,GAAhB,CAAoB,kBAApB,CAAX,CADI,GACkDyD,WAAWrG,OAAOwC,QAAP,CAAgBI,GAAhB,CAAoB,qBAApB,CAAX,CAD5D;AAED,OAHD,MAGO,IAAI5C,OAAOwC,QAAP,CAAgBI,GAAhB,CAAoB,YAApB,MAAsC,aAA1C,EAAyD;AAC9DtC,kBAAU+F,WAAWrG,OAAOwC,QAAP,CAAgBI,GAAhB,CAAoB,aAApB,CAAX,IAAiDyD,WAAWrG,OAAOwC,QAAP,CAAgBI,GAAhB,CAAoB,gBAApB,CAAX,CAA3D;AACD;;AAED,aAAOtC,MAAP;AACD,KApDD;;AAsDA;;;AAGA,QAAI0C,sBAAsB,SAAtBA,mBAAsB,GAAW;AACnC,UAAI5C,QAAQ,MAAZ;AACA,UAAIJ,OAAOS,QAAP,CAAgBtB,UAAhB,GAA6B,CAAjC,EAAoC;AAClC,YAAIa,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAA7B,EAA2C;AACzCwE,kBAASJ,OAAOS,QAAP,CAAgBxB,SAAhB,GAA4Be,OAAOS,QAAP,CAAgBtB,UAA7C,GAA4D,CAACa,OAAOS,QAAP,CAAgBxB,SAAhB,GAA4B,CAA7B,IAAkCe,OAAOS,QAAP,CAAgBvE,WAAtH;AACD,SAFD,MAEO;AACLkE,kBAAQJ,OAAOS,QAAP,CAAgBtB,UAAxB;AACD;AACF;AACD,aAAOiB,KAAP;AACD,KAVD;;AAYA;;;AAGA,QAAI+C,gBAAgB,SAAhBA,aAAgB,GAAW;AAC7B,UAAImD,aAAatG,OAAOS,QAAP,CAAgBtB,UAAjC;AAAA,UAA6C;AAC7CoH,kBAAiBvG,OAAOwC,QAAP,CAAgBpC,KAAhB,EADjB,CAD6B,CAEgB;AAC7C;AACA,UAAIJ,OAAOS,QAAP,CAAgBtB,UAAhB,KAA+B,CAA/B,IACDa,OAAOS,QAAP,CAAgBtB,UAAhB,GAA6BoH,SAA7B,IAA0C,CAACvG,OAAOkB,QADjD,IAEFlB,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,UAF3B,EAEuC;AACrC0K,qBAAaC,SAAb;AACF;AACC,OALD,MAKO,IAAIvG,OAAOS,QAAP,CAAgBxB,SAAhB,GAA4B,CAA5B,IAAiCe,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAA9D,EAA4E;AACjF,YAAI2K,YAAYvG,OAAOoB,YAAvB,EAAqC;AACnC,iBAAOkF,UAAP;AACD,SAFD,MAEO,IAAIC,YAAYvG,OAAOmB,YAAvB,EAAqC;AAC1CmF,uBAAa,CAACC,YAAavG,OAAOS,QAAP,CAAgBvE,WAAhB,IAA+B8D,OAAOS,QAAP,CAAgBzB,SAAhB,GAA4B,CAA3D,CAAd,IAAgFgB,OAAOS,QAAP,CAAgBzB,SAA7G;AACD,SAFM,MAEA,IAAIgB,OAAOS,QAAP,CAAgBrB,WAApB,EAAiC;AACtCkH,uBAAazF,KAAKC,KAAL,CAAW,CAACyF,YAAYvG,OAAOS,QAAP,CAAgBvE,WAA7B,IAA6C2E,KAAK2F,IAAL,CAAU,CAACD,YAAYvG,OAAOS,QAAP,CAAgBvE,WAA7B,KAA6CoK,aAAatG,OAAOS,QAAP,CAAgBvE,WAA1E,CAAV,CAA7C,GAAkJ8D,OAAOS,QAAP,CAAgBvE,WAA7K,CAAb;AACD;AACF;AACD,aAAOoK,UAAP;AACD,KAnBD;;AAqBA;;;AAGA,QAAIG,yBAAyB,SAAzBA,sBAAyB,GAAW;AACtC,UAAIC,gBAAgB,CAApB;AAAA,UACAC,aAAa,IADb;AAEA,UAAI3G,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAAzB,IAAyCoE,OAAOS,QAAP,CAAgBtB,UAAhB,GAA6B,CAA1E,EAA6E;AAC3E;AACA,YAAIa,OAAOwC,QAAP,CAAgBpC,KAAhB,KAA0BJ,OAAOmB,YAArC,EAAmD;AACjDuF,0BAAgB1G,OAAOS,QAAP,CAAgBzB,SAAhC;AACF;AACC,SAHD,MAGO,IAAIgB,OAAOwC,QAAP,CAAgBpC,KAAhB,KAA0BJ,OAAOoB,YAArC,EAAmD;AACxDsF,0BAAgB1G,OAAOS,QAAP,CAAgBxB,SAAhC;AACF;AACC,SAHM,MAGA;AACL0H,uBAAa3G,OAAOY,QAAP,CAAgBgG,KAAhB,GAAwBxG,KAAxB,KAAkCJ,OAAOS,QAAP,CAAgBvE,WAA/D;AACAwK,0BAAgB7F,KAAKC,KAAL,CAAW,CAACd,OAAOwC,QAAP,CAAgBpC,KAAhB,KAC1BJ,OAAOS,QAAP,CAAgBvE,WADS,IACMyK,UADjB,CAAhB;AAED;AACH;AACC,OAdD,MAcO,IAAI3G,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,UAA7B,EAAyC;AAC9C8K,wBAAgB1G,OAAOS,QAAP,CAAgBzB,SAAhC;AACD;AACD,aAAO0H,aAAP;AACD,KArBD;;AAuBA;;;AAGA,QAAIlD,cAAc,SAAdA,WAAc,GAAW;AAC3B,UAAIqD,WAAW,CAAf;AAAA,UACAC,aAAa,CADb;AAAA,UAEAC,UAAU,CAFV;AAGA;AACA,UAAI/G,OAAOS,QAAP,CAAgBvB,UAAhB,GAA6B,CAAjC,EAAoC;AAClC,YAAIc,OAAOS,QAAP,CAAgB3E,YAApB,EAAkC;AAChC+K,qBAAWhG,KAAK2F,IAAL,CAAUxG,OAAOY,QAAP,CAAgBd,MAAhB,GAAyBgG,WAAnC,CAAX;AACD,SAFD,MAEO;AACL;AACA,iBAAOgB,aAAa9G,OAAOY,QAAP,CAAgBd,MAApC,EAA4C;AAC1C,cAAE+G,QAAF;AACAC,yBAAaC,UAAUN,wBAAvB;AACAM,uBAAW/G,OAAOS,QAAP,CAAgBvB,UAAhB,IAA8BuH,wBAA9B,GAAyDzG,OAAOS,QAAP,CAAgBvB,UAAzE,GAAsFuH,wBAAjG;AACD;AACF;AACH;AACC,OAZD,MAYO;AACLI,mBAAWhG,KAAK2F,IAAL,CAAUxG,OAAOY,QAAP,CAAgBd,MAAhB,GAAyB2G,wBAAnC,CAAX;AACD;AACD,aAAOI,QAAP;AACD,KArBD;;AAuBA;;;AAGA,QAAIf,YAAY,SAAZA,SAAY,GAAW;AACzB;AACA,UAAI9F,OAAOS,QAAP,CAAgBvB,UAAhB,GAA6B,CAA7B,IAAkCc,OAAOS,QAAP,CAAgBvB,UAAhB,IAA8BuH,wBAApE,EAA8F;AAC5F,eAAOzG,OAAOS,QAAP,CAAgBvB,UAAvB;AACD;AACD;AACA,aAAOuH,wBAAP;AACD,KAPD;;AASA;;;AAGA,QAAI1B,mBAAmB,SAAnBA,gBAAmB,GAAW;AAChC,UAAIlC,QAAJ,EAAcmE,SAAd,EAAyBC,gBAAzB;AACA;AACA,UAAIjH,OAAOY,QAAP,CAAgBd,MAAhB,GAAyBE,OAAOS,QAAP,CAAgBxB,SAAzC,IAAsDe,OAAOgB,MAAP,CAAcuC,IAApE,IAA4E,CAACvD,OAAOS,QAAP,CAAgB3E,YAAjG,EAA+G;AAC7G,YAAIkE,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAA7B,EAA2C;AACzC;AACAoL,sBAAYhH,OAAOY,QAAP,CAAgB2C,IAAhB,EAAZ;AACAV,qBAAWmE,UAAUnE,QAAV,EAAX;AACA;AACAqE,8BAAoB,EAAErE,SAASsE,IAAT,IAAiBnH,OAAOwC,QAAP,CAAgBpC,KAAhB,KAA0B4G,UAAUI,UAAV,EAA3C,CAAF,CAApB,EAA2F,OAA3F,EAAoG,CAApG;AACD,SAND,MAMO,IAAIpH,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,UAA7B,EAAyC;AAC9C;AACAqL,6BAAmBjH,OAAOY,QAAP,CAAgBd,MAAhB,GAAyBE,OAAOS,QAAP,CAAgBzB,SAA5D;AACA6D,qBAAW7C,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmB2E,gBAAnB,EAAqCpE,QAArC,EAAX;AACA;AACAqE,8BAAoB,CAACrE,SAASwE,GAA9B,EAAmC,OAAnC,EAA4C,CAA5C;AACD;AACH;AACC,OAfD,MAeO;AACL;AACAxE,mBAAW7C,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBtC,OAAOgB,MAAP,CAAcC,KAAd,GAAsB6E,WAAzC,EAAsDjD,QAAtD,EAAX;AACA;AACA,YAAI7C,OAAOgB,MAAP,CAAcC,KAAd,KAAwBuC,gBAAgB,CAA5C,EAA+C;AAAExD,iBAAOgB,MAAP,CAAcuC,IAAd,GAAqB,IAArB;AAA4B;AAC7E;AACA,YAAIV,aAAad,SAAjB,EAA4B;AAC1B,cAAI/B,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAA7B,EAA2C;AAAEsL,gCAAoB,CAACrE,SAASsE,IAA9B,EAAoC,OAApC,EAA6C,CAA7C;AAAkD,WAA/F,MACK,IAAInH,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,UAA7B,EAAyC;AAAEsL,gCAAoB,CAACrE,SAASwE,GAA9B,EAAmC,OAAnC,EAA4C,CAA5C;AAAiD;AAClG;AACF;AACF,KA7BD;;AA+BA;;;;;;;;;;;;;;;;AAgBA,QAAIH,sBAAsB,SAAtBA,mBAAsB,CAASI,KAAT,EAAgBC,IAAhB,EAAsBC,QAAtB,EAAgCC,MAAhC,EAAwC;AAChE,UAAIC,UAAJ,EAAgBC,SAAhB;AACA;AACA,UAAI3H,OAAOwB,QAAX,EAAqB;AACnB;AACAmG,oBAAY3H,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,UAAzB,GAAsC,oBAAoB0L,KAApB,GAA4B,QAAlE,GAA6E,iBAAiBA,KAAjB,GAAyB,WAAlH;AACA;AACArH,WAAG2C,GAAH,CAAO,MAAM5C,OAAOgC,SAAb,GAAyB,sBAAhC,EAAwDwF,WAAW,IAAX,GAAkB,GAA1E;AACA,YAAID,SAAS,OAAb,EAAsB;AACpB;AACAtH,aAAG2C,GAAH,CAAO5C,OAAOuB,QAAd,EAAwBoG,SAAxB;AACA,cAAIH,aAAa,CAAjB,EAAoB;AAClB;AACAvH,eAAGmF,IAAH,CAAQ,kEAAR,EAA4E,UAASwC,CAAT,EAAY;AACtF;AACA,kBAAI,CAAClM,EAAEkM,EAAEC,MAAJ,EAAYC,EAAZ,CAAe7H,EAAf,CAAL,EAAyB;AAAE;AAAS;AACpC;AACAA,iBAAG8H,MAAH,CAAU,kEAAV;AACAC;AACD,aAND;AAOD,WATD,MASO;AAAE;AACPA;AACD;AACF,SAfD,MAeO,IAAIT,SAAS,OAAb,EAAsB;AAC3BtH,aAAG2C,GAAH,CAAO5C,OAAOuB,QAAd,EAAwBoG,SAAxB;AACD,SAFM,MAEA,IAAIJ,SAAS,QAAb,EAAuB;AAC5B;AACAtH,aAAG2C,GAAH,CAAO,MAAM5C,OAAOgC,SAAb,GAAyB,6BAAhC,EAA+D,QAA/D;AACA/B,aAAG2C,GAAH,CAAO5C,OAAOuB,QAAd,EAAwBoG,SAAxB;AACA,cAAIH,aAAa,CAAjB,EAAoB;AAClBvH,eAAGmF,IAAH,CAAQ,kEAAR,EAA4E,UAASwC,CAAT,EAAY;AACtF;AACA,kBAAI,CAAClM,EAAEkM,EAAEC,MAAJ,EAAYC,EAAZ,CAAe7H,EAAf,CAAL,EAAyB;AAAE;AAAS;AACpC;AACAA,iBAAG8H,MAAH,CAAU,kEAAV;AACA;AACAb,kCAAoBO,OAAOQ,UAA3B,EAAuC,OAAvC,EAAgD,CAAhD;AACA;AACAC;AACD,aATD;AAUD,WAXD,MAWO;AAAE;AACPhB,gCAAoBO,OAAOQ,UAA3B,EAAuC,OAAvC,EAAgD,CAAhD;AACAC;AACD;AACF;AACH;AACC,OA3CD,MA2CO;AACLR,qBAAa,EAAb;AACAA,mBAAW1H,OAAOuB,QAAlB,IAA8B+F,KAA9B;AACA,YAAIC,SAAS,OAAb,EAAsB;AACpBtH,aAAGkI,OAAH,CAAWT,UAAX,EAAuBF,QAAvB,EAAiCxH,OAAOS,QAAP,CAAgBxE,MAAjD,EAAyD,YAAW;AAClE+L;AACD,WAFD;AAGD,SAJD,MAIO,IAAIT,SAAS,OAAb,EAAsB;AAC3BtH,aAAG2C,GAAH,CAAO5C,OAAOuB,QAAd,EAAwB+F,KAAxB;AACD,SAFM,MAEA,IAAIC,SAAS,QAAb,EAAuB;AAC5BtH,aAAGkI,OAAH,CAAWT,UAAX,EAAuBF,QAAvB,EAAiC,QAAjC,EAA2C,YAAW;AACpDN,gCAAoBO,OAAOQ,UAA3B,EAAuC,OAAvC,EAAgD,CAAhD;AACA;AACAC;AACD,WAJD;AAKD;AACF;AACF,KA/DD;;AAiEA;;;AAGA,QAAIE,gBAAgB,SAAhBA,aAAgB,GAAW;AAC7B,UAAIC,YAAY,EAAhB;AAAA,UACAC,cAAc,EADd;AAAA,UAEAzB,WAAWrD,aAFX;AAGA;AACA,WAAK,IAAI3B,IAAI,CAAb,EAAgBA,IAAIgF,QAApB,EAA8BhF,GAA9B,EAAmC;AACjCyG,sBAAc,EAAd;AACA;AACA,YAAItI,OAAOS,QAAP,CAAgB7C,UAAhB,IAA8BlC,EAAE6M,UAAF,CAAavI,OAAOS,QAAP,CAAgB7C,UAA7B,CAA9B,IAA0EoC,OAAOS,QAAP,CAAgB5C,WAA9F,EAA2G;AACzGyK,wBAActI,OAAOS,QAAP,CAAgB7C,UAAhB,CAA2BiE,CAA3B,CAAd;AACA7B,iBAAOwI,OAAP,CAAe7D,QAAf,CAAwB,iBAAxB;AACD,SAHD,MAGO;AACL2D,wBAAczG,IAAI,CAAlB;AACA7B,iBAAOwI,OAAP,CAAe7D,QAAf,CAAwB,kBAAxB;AACD;AACD;AACA;AACA0D,qBAAa,6DAA6DxG,CAA7D,GAAiE,0BAAjE,GAA8FyG,WAA9F,GAA4G,YAAzH;AACD;AACD;AACAtI,aAAOwI,OAAP,CAAeC,IAAf,CAAoBJ,SAApB;AACD,KArBD;;AAuBA;;;AAGA,QAAIzE,cAAc,SAAdA,WAAc,GAAW;AAC3B,UAAI,CAAC5D,OAAOS,QAAP,CAAgB5C,WAArB,EAAkC;AAChC;AACAmC,eAAOwI,OAAP,GAAiB9M,EAAE,0BAAF,CAAjB;AACA;AACA,YAAIsE,OAAOS,QAAP,CAAgB9C,aAApB,EAAmC;AACjCjC,YAAEsE,OAAOS,QAAP,CAAgB9C,aAAlB,EAAiC8K,IAAjC,CAAsCzI,OAAOwI,OAA7C;AACF;AACC,SAHD,MAGO;AACLxI,iBAAOlC,QAAP,CAAgBmC,EAAhB,CAAmB0E,QAAnB,CAA4B,cAA5B,EAA4CE,MAA5C,CAAmD7E,OAAOwI,OAA1D;AACD;AACD;AACAJ;AACD,OAZD,MAYO;AACLpI,eAAOwI,OAAP,GAAiB9M,EAAEsE,OAAOS,QAAP,CAAgB5C,WAAlB,CAAjB;AACD;AACD;AACAmC,aAAOwI,OAAP,CAAeE,EAAf,CAAkB,gBAAlB,EAAoC,GAApC,EAAyCC,cAAzC;AACD,KAlBD;;AAoBA;;;AAGA,QAAIjF,iBAAiB,SAAjBA,cAAiB,GAAW;AAC9B1D,aAAOlC,QAAP,CAAgB8K,IAAhB,GAAuBlN,EAAE,gCAAgCsE,OAAOS,QAAP,CAAgB1C,QAAhD,GAA2D,MAA7D,CAAvB;AACAiC,aAAOlC,QAAP,CAAgB+K,IAAhB,GAAuBnN,EAAE,gCAAgCsE,OAAOS,QAAP,CAAgBzC,QAAhD,GAA2D,MAA7D,CAAvB;AACA;AACAgC,aAAOlC,QAAP,CAAgB8K,IAAhB,CAAqBxD,IAArB,CAA0B,gBAA1B,EAA4C0D,aAA5C;AACA9I,aAAOlC,QAAP,CAAgB+K,IAAhB,CAAqBzD,IAArB,CAA0B,gBAA1B,EAA4C2D,aAA5C;AACA;AACA,UAAI/I,OAAOS,QAAP,CAAgBxC,YAApB,EAAkC;AAChCvC,UAAEsE,OAAOS,QAAP,CAAgBxC,YAAlB,EAAgC4G,MAAhC,CAAuC7E,OAAOlC,QAAP,CAAgB8K,IAAvD;AACD;AACD;AACA,UAAI5I,OAAOS,QAAP,CAAgBvC,YAApB,EAAkC;AAChCxC,UAAEsE,OAAOS,QAAP,CAAgBvC,YAAlB,EAAgC2G,MAAhC,CAAuC7E,OAAOlC,QAAP,CAAgB+K,IAAvD;AACD;AACD;AACA,UAAI,CAAC7I,OAAOS,QAAP,CAAgBxC,YAAjB,IAAiC,CAAC+B,OAAOS,QAAP,CAAgBvC,YAAtD,EAAoE;AAClE;AACA8B,eAAOlC,QAAP,CAAgBkL,WAAhB,GAA8BtN,EAAE,uCAAF,CAA9B;AACA;AACAsE,eAAOlC,QAAP,CAAgBkL,WAAhB,CAA4BnE,MAA5B,CAAmC7E,OAAOlC,QAAP,CAAgB+K,IAAnD,EAAyDhE,MAAzD,CAAgE7E,OAAOlC,QAAP,CAAgB8K,IAAhF;AACA;AACA5I,eAAOlC,QAAP,CAAgBmC,EAAhB,CAAmB0E,QAAnB,CAA4B,2BAA5B,EAAyDE,MAAzD,CAAgE7E,OAAOlC,QAAP,CAAgBkL,WAAhF;AACD;AACF,KAvBD;;AAyBA;;;AAGA,QAAIrF,qBAAqB,SAArBA,kBAAqB,GAAW;AAClC3D,aAAOlC,QAAP,CAAgBiG,KAAhB,GAAwBrI,EAAE,oEAAoEsE,OAAOS,QAAP,CAAgBrC,SAApF,GAAgG,YAAlG,CAAxB;AACA4B,aAAOlC,QAAP,CAAgBmL,IAAhB,GAAuBvN,EAAE,mEAAmEsE,OAAOS,QAAP,CAAgBpC,QAAnF,GAA8F,YAAhG,CAAvB;AACA;AACA2B,aAAOlC,QAAP,CAAgBoL,MAAhB,GAAyBxN,EAAE,kCAAF,CAAzB;AACA;AACAsE,aAAOlC,QAAP,CAAgBoL,MAAhB,CAAuBR,EAAvB,CAA0B,OAA1B,EAAmC,WAAnC,EAAgDS,cAAhD;AACAnJ,aAAOlC,QAAP,CAAgBoL,MAAhB,CAAuBR,EAAvB,CAA0B,OAA1B,EAAmC,UAAnC,EAA+CU,aAA/C;AACA;AACA,UAAIpJ,OAAOS,QAAP,CAAgBnC,mBAApB,EAAyC;AACvC0B,eAAOlC,QAAP,CAAgBoL,MAAhB,CAAuBrE,MAAvB,CAA8B7E,OAAOlC,QAAP,CAAgBiG,KAA9C;AACF;AACC,OAHD,MAGO;AACL/D,eAAOlC,QAAP,CAAgBoL,MAAhB,CAAuBrE,MAAvB,CAA8B7E,OAAOlC,QAAP,CAAgBiG,KAA9C,EAAqDc,MAArD,CAA4D7E,OAAOlC,QAAP,CAAgBmL,IAA5E;AACD;AACD;AACA,UAAIjJ,OAAOS,QAAP,CAAgBlC,oBAApB,EAA0C;AACxC7C,UAAEsE,OAAOS,QAAP,CAAgBlC,oBAAlB,EAAwCkK,IAAxC,CAA6CzI,OAAOlC,QAAP,CAAgBoL,MAA7D;AACF;AACC,OAHD,MAGO;AACLlJ,eAAOlC,QAAP,CAAgBmC,EAAhB,CAAmB0E,QAAnB,CAA4B,sBAA5B,EAAoDE,MAApD,CAA2D7E,OAAOlC,QAAP,CAAgBoL,MAA3E;AACD;AACD;AACAG,yBAAmBrJ,OAAOS,QAAP,CAAgB/B,SAAhB,GAA4B,MAA5B,GAAqC,OAAxD;AACD,KAxBD;;AA0BA;;;AAGA,QAAI4E,iBAAiB,SAAjBA,cAAiB,GAAW;AAC9B;AACAtD,aAAOY,QAAP,CAAgBb,IAAhB,CAAqB,UAASkB,KAAT,EAAgB;AACnC;AACA,YAAIqI,QAAQ5N,EAAE,IAAF,EAAQyI,IAAR,CAAa,WAAb,EAA0BhC,IAA1B,CAA+B,OAA/B,CAAZ;AACA;AACA,YAAImH,UAAUvH,SAAV,IAAuB,CAAC,KAAKuH,KAAN,EAAaxJ,MAAxC,EAAgD;AAC9CpE,YAAE,IAAF,EAAQmJ,MAAR,CAAe,mCAAmCyE,KAAnC,GAA2C,eAA1D;AACD;AACF,OAPD;AAQD,KAVD;;AAYA;;;;;;AAMA,QAAIR,gBAAgB,SAAhBA,aAAgB,CAASlB,CAAT,EAAY;AAC9BA,QAAE2B,cAAF;AACA,UAAIvJ,OAAOlC,QAAP,CAAgBmC,EAAhB,CAAmBuJ,QAAnB,CAA4B,UAA5B,CAAJ,EAA6C;AAAE;AAAS;AACxD;AACA,UAAIxJ,OAAOS,QAAP,CAAgBjC,IAAhB,IAAwBwB,OAAOS,QAAP,CAAgB7B,eAA5C,EAA6D;AAAEqB,WAAGwJ,QAAH;AAAgB;AAC/ExJ,SAAGyJ,aAAH;AACD,KAND;;AAQA;;;;;;AAMA,QAAIX,gBAAgB,SAAhBA,aAAgB,CAASnB,CAAT,EAAY;AAC9BA,QAAE2B,cAAF;AACA,UAAIvJ,OAAOlC,QAAP,CAAgBmC,EAAhB,CAAmBuJ,QAAnB,CAA4B,UAA5B,CAAJ,EAA6C;AAAE;AAAS;AACxD;AACA,UAAIxJ,OAAOS,QAAP,CAAgBjC,IAAhB,IAAwBwB,OAAOS,QAAP,CAAgB7B,eAA5C,EAA6D;AAAEqB,WAAGwJ,QAAH;AAAgB;AAC/ExJ,SAAG0J,aAAH;AACD,KAND;;AAQA;;;;;;AAMA,QAAIR,iBAAiB,SAAjBA,cAAiB,CAASvB,CAAT,EAAY;AAC/B3H,SAAG2J,SAAH;AACAhC,QAAE2B,cAAF;AACD,KAHD;;AAKA;;;;;;AAMA,QAAIH,gBAAgB,SAAhBA,aAAgB,CAASxB,CAAT,EAAY;AAC9B3H,SAAGwJ,QAAH;AACA7B,QAAE2B,cAAF;AACD,KAHD;;AAKA;;;;;;AAMA,QAAIZ,iBAAiB,SAAjBA,cAAiB,CAASf,CAAT,EAAY;AAC/B,UAAIiC,SAAJ,EAAeC,UAAf;AACAlC,QAAE2B,cAAF;AACA,UAAIvJ,OAAOlC,QAAP,CAAgBmC,EAAhB,CAAmBuJ,QAAnB,CAA4B,UAA5B,CAAJ,EAA6C;AAC3C;AACD;AACD;AACA,UAAIxJ,OAAOS,QAAP,CAAgBjC,IAAhB,IAAyBwB,OAAOS,QAAP,CAAgB7B,eAA7C,EAA8D;AAAEqB,WAAGwJ,QAAH;AAAgB;AAChFI,kBAAYnO,EAAEkM,EAAEmC,aAAJ,CAAZ;AACA,UAAIF,UAAU1H,IAAV,CAAe,kBAAf,MAAuCJ,SAA3C,EAAsD;AACpD+H,qBAAanJ,SAASkJ,UAAU1H,IAAV,CAAe,kBAAf,CAAT,CAAb;AACA;AACA,YAAI2H,eAAe9J,OAAOgB,MAAP,CAAcC,KAAjC,EAAwC;AAAEhB,aAAG+J,SAAH,CAAaF,UAAb;AAA2B;AACtE;AACF,KAdD;;AAgBA;;;;;;AAMA,QAAItE,oBAAoB,SAApBA,iBAAoB,CAASyE,UAAT,EAAqB;AAC3C;AACA,UAAIC,MAAMlK,OAAOY,QAAP,CAAgBd,MAA1B,CAF2C,CAET;AAClC,UAAIE,OAAOS,QAAP,CAAgBhD,SAAhB,KAA8B,OAAlC,EAA2C;AACzC,YAAIuC,OAAOS,QAAP,CAAgBxB,SAAhB,GAA4B,CAAhC,EAAmC;AACjCiL,gBAAMrJ,KAAK2F,IAAL,CAAUxG,OAAOY,QAAP,CAAgBd,MAAhB,GAAyBE,OAAOS,QAAP,CAAgBxB,SAAnD,CAAN;AACD;AACDe,eAAOwI,OAAP,CAAeC,IAAf,CAAqBwB,aAAa,CAAd,GAAmBjK,OAAOS,QAAP,CAAgB/C,mBAAnC,GAAyDwM,GAA7E;AACA;AACD;AACD;AACAlK,aAAOwI,OAAP,CAAerE,IAAf,CAAoB,GAApB,EAAyBgG,WAAzB,CAAqC,QAArC;AACA;AACAnK,aAAOwI,OAAP,CAAezI,IAAf,CAAoB,UAAS8B,CAAT,EAAY5B,EAAZ,EAAgB;AAAEvE,UAAEuE,EAAF,EAAMkE,IAAN,CAAW,GAAX,EAAgB7B,EAAhB,CAAmB2H,UAAnB,EAA+BtF,QAA/B,CAAwC,QAAxC;AAAoD,OAA1F;AACD,KAdD;;AAgBA;;;AAGA,QAAIqD,6BAA6B,SAA7BA,0BAA6B,GAAW;AAC1C;AACA,UAAIhI,OAAOS,QAAP,CAAgB3E,YAApB,EAAkC;AAChC,YAAI+G,WAAW,EAAf;AACA;AACA,YAAI7C,OAAOgB,MAAP,CAAcC,KAAd,KAAwB,CAA5B,EAA+B;AAC7B;AACA4B,qBAAW7C,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmB,CAAnB,EAAsBO,QAAtB,EAAX;AACF;AACC,SAJD,MAIO,IAAI7C,OAAOgB,MAAP,CAAcC,KAAd,KAAwBuC,gBAAgB,CAAxC,IAA6CxD,OAAOkB,QAAxD,EAAkE;AACvE2B,qBAAW7C,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmB,CAACkB,gBAAgB,CAAjB,IAAsBsC,WAAzC,EAAsDjD,QAAtD,EAAX;AACF;AACC,SAHM,MAGA,IAAI7C,OAAOgB,MAAP,CAAcC,KAAd,KAAwBjB,OAAOY,QAAP,CAAgBd,MAAhB,GAAyB,CAArD,EAAwD;AAC7D+C,qBAAW7C,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBtC,OAAOY,QAAP,CAAgBd,MAAhB,GAAyB,CAA5C,EAA+C+C,QAA/C,EAAX;AACD;AACD,YAAIA,QAAJ,EAAc;AACZ,cAAI7C,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAA7B,EAA2C;AAAEsL,gCAAoB,CAACrE,SAASsE,IAA9B,EAAoC,OAApC,EAA6C,CAA7C;AAAkD,WAA/F,MACK,IAAInH,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,UAA7B,EAAyC;AAAEsL,gCAAoB,CAACrE,SAASwE,GAA9B,EAAmC,OAAnC,EAA4C,CAA5C;AAAiD;AAClG;AACF;AACD;AACArH,aAAOqB,OAAP,GAAiB,KAAjB;AACA;AACArB,aAAOS,QAAP,CAAgBlB,YAAhB,CAA6B2F,IAA7B,CAAkCjF,EAAlC,EAAsCD,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBtC,OAAOgB,MAAP,CAAcC,KAAjC,CAAtC,EAA+EjB,OAAOoK,QAAtF,EAAgGpK,OAAOgB,MAAP,CAAcC,KAA9G;AACD,KAxBD;;AA0BA;;;;;;AAMA,QAAIoI,qBAAqB,SAArBA,kBAAqB,CAASgB,KAAT,EAAgB;AACvC;AACA,UAAIrK,OAAOS,QAAP,CAAgBnC,mBAApB,EAAyC;AACvC0B,eAAOlC,QAAP,CAAgBoL,MAAhB,CAAuBT,IAAvB,CAA4BzI,OAAOlC,QAAP,CAAgBuM,KAAhB,CAA5B;AACF;AACC,OAHD,MAGO;AACLrK,eAAOlC,QAAP,CAAgBoL,MAAhB,CAAuB/E,IAAvB,CAA4B,GAA5B,EAAiCgG,WAAjC,CAA6C,QAA7C;AACAnK,eAAOlC,QAAP,CAAgBoL,MAAhB,CAAuB/E,IAAvB,CAA4B,eAAekG,KAAf,GAAuB,GAAnD,EAAwD1F,QAAxD,CAAiE,QAAjE;AACD;AACF,KATD;;AAWA;;;AAGA,QAAIc,0BAA0B,SAA1BA,uBAA0B,GAAW;AACvC,UAAIjC,kBAAkB,CAAtB,EAAyB;AACvBxD,eAAOlC,QAAP,CAAgB+K,IAAhB,CAAqBlE,QAArB,CAA8B,UAA9B;AACA3E,eAAOlC,QAAP,CAAgB8K,IAAhB,CAAqBjE,QAArB,CAA8B,UAA9B;AACD,OAHD,MAGO,IAAI,CAAC3E,OAAOS,QAAP,CAAgB3E,YAAjB,IAAiCkE,OAAOS,QAAP,CAAgB1E,gBAArD,EAAuE;AAC5E;AACA,YAAIiE,OAAOgB,MAAP,CAAcC,KAAd,KAAwB,CAA5B,EAA+B;AAC7BjB,iBAAOlC,QAAP,CAAgB+K,IAAhB,CAAqBlE,QAArB,CAA8B,UAA9B;AACA3E,iBAAOlC,QAAP,CAAgB8K,IAAhB,CAAqBuB,WAArB,CAAiC,UAAjC;AACF;AACC,SAJD,MAIO,IAAInK,OAAOgB,MAAP,CAAcC,KAAd,KAAwBuC,gBAAgB,CAA5C,EAA+C;AACpDxD,iBAAOlC,QAAP,CAAgB8K,IAAhB,CAAqBjE,QAArB,CAA8B,UAA9B;AACA3E,iBAAOlC,QAAP,CAAgB+K,IAAhB,CAAqBsB,WAArB,CAAiC,UAAjC;AACF;AACC,SAJM,MAIA;AACLnK,iBAAOlC,QAAP,CAAgB+K,IAAhB,CAAqBsB,WAArB,CAAiC,UAAjC;AACAnK,iBAAOlC,QAAP,CAAgB8K,IAAhB,CAAqBuB,WAArB,CAAiC,UAAjC;AACD;AACF;AACF,KAnBD;;AAqBA;;;AAGA,QAAI7E,WAAW,SAAXA,QAAW,GAAW;AACxB;AACA,UAAItF,OAAOS,QAAP,CAAgB3B,SAAhB,GAA4B,CAAhC,EAAmC;AACjC,YAAIwL,UAAUC,WAAWtK,GAAG2J,SAAd,EAAyB5J,OAAOS,QAAP,CAAgB3B,SAAzC,CAAd;AACF;AACC,OAHD,MAGO;AACLmB,WAAG2J,SAAH;;AAEA;AACAlO,UAAEyE,MAAF,EAAUqK,KAAV,CAAgB,YAAW;AACzBvK,aAAG2J,SAAH;AACD,SAFD,EAEGa,IAFH,CAEQ,YAAW;AACjBxK,aAAGwJ,QAAH;AACD,SAJD;AAKD;AACD;AACA,UAAIzJ,OAAOS,QAAP,CAAgB5B,SAApB,EAA+B;AAC7B;AACAoB,WAAGyK,KAAH,CAAS,YAAW;AAClB;AACA,cAAI1K,OAAOsB,QAAX,EAAqB;AACnB;AACArB,eAAGwJ,QAAH,CAAY,IAAZ;AACA;AACAzJ,mBAAO2K,UAAP,GAAoB,IAApB;AACD;AACF,SARD,EAQG,YAAW;AACZ;AACA,cAAI3K,OAAO2K,UAAX,EAAuB;AACrB;AACA1K,eAAG2J,SAAH,CAAa,IAAb;AACA;AACA5J,mBAAO2K,UAAP,GAAoB,IAApB;AACD;AACF,SAhBD;AAiBD;AACF,KApCD;;AAsCA;;;AAGA,QAAIpF,aAAa,SAAbA,UAAa,GAAW;AAC1B,UAAIqF,gBAAgB,CAApB;AAAA,UACA/H,QADA;AAAA,UACUgI,SADV;AAAA,UACqBvD,KADrB;AAAA,UAC4BwD,GAD5B;AAAA,UACiCC,KADjC;AAAA,UACwCC,QADxC;AAAA,UACkDC,QADlD;AAAA,UAC4DC,WAD5D;AAEA;AACA,UAAIlL,OAAOS,QAAP,CAAgB9B,aAAhB,KAAkC,MAAtC,EAA8C;AAC5CsB,WAAG4E,MAAH,CAAU7E,OAAOY,QAAP,CAAgB8D,KAAhB,GAAwBC,QAAxB,CAAiC,UAAjC,CAAV;AACF;AACC,OAHD,MAGO;AACL1E,WAAG0C,OAAH,CAAW3C,OAAOY,QAAP,CAAgB8D,KAAhB,GAAwBC,QAAxB,CAAiC,UAAjC,CAAX;AACA9B,mBAAW7C,OAAOY,QAAP,CAAgBgG,KAAhB,GAAwB/D,QAAxB,EAAX;AACA+H,wBAAgB5K,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAAzB,GAAwC,CAACiH,SAASsE,IAAlD,GAAyD,CAACtE,SAASwE,GAAnF;AACD;AACDH,0BAAoB0D,aAApB,EAAmC,OAAnC,EAA4C,CAA5C;AACA;AACA5K,aAAOS,QAAP,CAAgBjD,KAAhB,GAAwB,KAAxB;AACAwC,aAAOS,QAAP,CAAgB3C,QAAhB,GAA2B,KAA3B;AACAkC,aAAOS,QAAP,CAAgBtC,YAAhB,GAA+B,KAA/B;AACA;AACA,UAAI6B,OAAOS,QAAP,CAAgBlE,WAApB,EAAiC;AAC/B,YAAIyD,OAAOwB,QAAX,EAAqB;AACnBsJ,gBAAM9K,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAAzB,GAAwC,CAAxC,GAA4C,CAAlD;AACAoE,iBAAOwC,QAAP,CAAgBkI,KAAhB,CAAsB,YAAW;AAC/BG,wBAAY5K,GAAG2C,GAAH,CAAO,MAAM5C,OAAOgC,SAAb,GAAyB,YAAhC,CAAZ;AACAsF,oBAAQjB,WAAWwE,UAAUM,KAAV,CAAgB,GAAhB,EAAqBL,GAArB,CAAX,CAAR;AACA5D,gCAAoBI,KAApB,EAA2B,OAA3B,EAAoC,CAApC;AACD,WAJD,EAIG,YAAW;AACZ4D,0BAAc,CAAd;AACAlL,mBAAOY,QAAP,CAAgBb,IAAhB,CAAqB,UAASkB,KAAT,EAAgB;AACnCiK,6BAAelL,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAAzB,GAAwCF,EAAE,IAAF,EAAQ0L,UAAR,CAAmB,IAAnB,CAAxC,GAAmE1L,EAAE,IAAF,EAAQsK,WAAR,CAAoB,IAApB,CAAlF;AACD,aAFD;AAGA;AACA+E,oBAAQ/K,OAAOS,QAAP,CAAgBzE,KAAhB,GAAwBkP,WAAhC;AACA;AACAF,uBAAWhL,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAAzB,GAAwC,MAAxC,GAAiD,KAA5D;AACA;AACAqP,uBAAWF,SAASG,cAAerK,KAAKuK,GAAL,CAASzK,SAAS2G,KAAT,CAAT,CAAxB,CAAX;AACAY,uBAAW+C,QAAX;AACD,WAhBD;AAiBD,SAnBD,MAmBO;AACL;AACAjL,iBAAOwC,QAAP,CAAgBkI,KAAhB,CAAsB,YAAW;AAC/BzK,eAAGgJ,IAAH;AACD,WAFD,EAEG,YAAW;AACZ;AACAiC,0BAAc,CAAd;AACAlL,mBAAOY,QAAP,CAAgBb,IAAhB,CAAqB,UAASkB,KAAT,EAAgB;AACnCiK,6BAAelL,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAAzB,GAAwCF,EAAE,IAAF,EAAQ0L,UAAR,CAAmB,IAAnB,CAAxC,GAAmE1L,EAAE,IAAF,EAAQsK,WAAR,CAAoB,IAApB,CAAlF;AACD,aAFD;AAGA;AACA+E,oBAAQ/K,OAAOS,QAAP,CAAgBzE,KAAhB,GAAwBkP,WAAhC;AACA;AACAF,uBAAWhL,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAAzB,GAAwC,MAAxC,GAAiD,KAA5D;AACA;AACAqP,uBAAWF,SAASG,cAAerK,KAAKuK,GAAL,CAASzK,SAASV,GAAG2C,GAAH,CAAOoI,QAAP,CAAT,CAAT,CAAxB,CAAX;AACA9C,uBAAW+C,QAAX;AACD,WAfD;AAgBD;AACF;AACD;AACA/C;AACD,KA5DD;;AA8DA;;;AAGA,QAAIA,aAAa,SAAbA,UAAa,CAASmD,WAAT,EAAsB;AACrC,UAAIrP,QAAQqP,cAAcA,WAAd,GAA4BrL,OAAOS,QAAP,CAAgBzE,KAAxD;AAAA,UACA6G,WAAW,EAACsE,MAAM,CAAP,EAAUE,KAAK,CAAf,EADX;AAAA,UAEAiE,QAAQ,EAACnE,MAAM,CAAP,EAAUE,KAAK,CAAf,EAFR;AAAA,UAGAkE,eAHA;AAAA,UAGiBtD,UAHjB;AAAA,UAG6BR,MAH7B;;AAKA;AACA,UAAIzH,OAAOS,QAAP,CAAgB9B,aAAhB,KAAkC,MAAtC,EAA8C;AAC5CkE,mBAAW5C,GAAGkE,IAAH,CAAQ,WAAR,EAAqByC,KAArB,GAA6B/D,QAA7B,EAAX;AACF;AACC,OAHD,MAGO;AACLyI,gBAAQtL,OAAOY,QAAP,CAAgBgG,KAAhB,GAAwB/D,QAAxB,EAAR;AACD;AACD0I,wBAAkBvL,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAAzB,GAAwC,CAACiH,SAASsE,IAAlD,GAAyD,CAACtE,SAASwE,GAArF;AACAY,mBAAajI,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAAzB,GAAwC,CAAC0P,MAAMnE,IAA/C,GAAsD,CAACmE,MAAMjE,GAA1E;AACAI,eAAS,EAACQ,YAAYA,UAAb,EAAT;AACAf,0BAAoBqE,eAApB,EAAqC,QAArC,EAA+CvP,KAA/C,EAAsDyL,MAAtD;AACD,KAjBD;;AAmBA;;;AAGA,QAAI+D,aAAa,SAAbA,UAAa,CAASvL,EAAT,EAAa;AAC5B,UAAIwL,MAAM/P,EAAEyE,MAAF,CAAV;AAAA,UACAqC,WAAW;AACT6E,aAAKoE,IAAIC,SAAJ,EADI;AAETvE,cAAMsE,IAAIE,UAAJ;AAFG,OADX;AAAA,UAKAC,SAAS3L,GAAG4L,MAAH,EALT;;AAOArJ,eAASsJ,KAAT,GAAiBtJ,SAAS2E,IAAT,GAAgBsE,IAAIrL,KAAJ,EAAjC;AACAoC,eAASuJ,MAAT,GAAkBvJ,SAAS6E,GAAT,GAAeoE,IAAInL,MAAJ,EAAjC;AACAsL,aAAOE,KAAP,GAAeF,OAAOzE,IAAP,GAAclH,GAAGmH,UAAH,EAA7B;AACAwE,aAAOG,MAAP,GAAgBH,OAAOvE,GAAP,GAAapH,GAAG+F,WAAH,EAA7B;;AAEA,aAAQ,EAAExD,SAASsJ,KAAT,GAAiBF,OAAOzE,IAAxB,IAAgC3E,SAAS2E,IAAT,GAAgByE,OAAOE,KAAvD,IAAgEtJ,SAASuJ,MAAT,GAAkBH,OAAOvE,GAAzF,IAAgG7E,SAAS6E,GAAT,GAAeuE,OAAOG,MAAxH,CAAR;AACD,KAdD;;AAgBA;;;AAGA,QAAInG,WAAW,SAAXA,QAAW,CAASgC,CAAT,EAAY;AACzB,UAAIoE,mBAAmBtK,SAASuK,aAAT,CAAuBC,OAAvB,CAA+BhK,WAA/B,EAAvB;AAAA,UACAiK,aAAa,gBADb;AAAA,UAEAC,IAAI,IAAIC,MAAJ,CAAWL,gBAAX,EAA4B,CAAC,GAAD,CAA5B,CAFJ;AAAA,UAGAM,SAASF,EAAEG,IAAF,CAAOJ,UAAP,CAHT;;AAKA,UAAIG,UAAU,IAAV,IAAkBd,WAAWvL,EAAX,CAAtB,EAAsC;AACpC,YAAI2H,EAAE4E,OAAF,KAAc,EAAlB,EAAsB;AACpB1D,wBAAclB,CAAd;AACA,iBAAO,KAAP;AACD,SAHD,MAGO,IAAIA,EAAE4E,OAAF,KAAc,EAAlB,EAAsB;AAC3BzD,wBAAcnB,CAAd;AACA,iBAAO,KAAP;AACD;AACF;AACF,KAfD;;AAiBA;;;AAGA,QAAIlC,YAAY,SAAZA,SAAY,GAAW;AACzB;AACA1F,aAAOyM,KAAP,GAAe;AACb1I,eAAO,EAAC2I,GAAG,CAAJ,EAAOC,GAAG,CAAV,EADM;AAEbC,aAAK,EAACF,GAAG,CAAJ,EAAOC,GAAG,CAAV;AAFQ,OAAf;AAIA3M,aAAOwC,QAAP,CAAgB4C,IAAhB,CAAqB,sCAArB,EAA6DyH,YAA7D;;AAEA;AACA;AACA7M,aAAOwC,QAAP,CAAgBkG,EAAhB,CAAmB,OAAnB,EAA4B,aAA5B,EAA2C,UAASd,CAAT,EAAY;AACrD,YAAI5H,OAAOwC,QAAP,CAAgBgH,QAAhB,CAAyB,gBAAzB,CAAJ,EAAgD;AAC9C5B,YAAE2B,cAAF;AACAvJ,iBAAOwC,QAAP,CAAgB2H,WAAhB,CAA4B,gBAA5B;AACD;AACF,OALD;AAMD,KAhBD;;AAkBA;;;;;;AAMA,QAAI0C,eAAe,SAAfA,YAAe,CAASjF,CAAT,EAAY;AAC7B;AACA5H,aAAOlC,QAAP,CAAgBmC,EAAhB,CAAmB0E,QAAnB,CAA4B,UAA5B;;AAEA,UAAI3E,OAAOqB,OAAX,EAAoB;AAClBuG,UAAE2B,cAAF;AACAvJ,eAAOlC,QAAP,CAAgBmC,EAAhB,CAAmBkK,WAAnB,CAA+B,UAA/B;AACD,OAHD,MAGO;AACL;AACAnK,eAAOyM,KAAP,CAAaK,WAAb,GAA2B7M,GAAG4C,QAAH,EAA3B;AACA,YAAIkK,OAAOnF,EAAEoF,aAAb;AAAA,YACAC,cAAe,OAAOF,KAAKG,cAAZ,KAA+B,WAAhC,GAA+CH,KAAKG,cAApD,GAAqE,CAACH,IAAD,CADnF;AAEA;AACA/M,eAAOyM,KAAP,CAAa1I,KAAb,CAAmB2I,CAAnB,GAAuBO,YAAY,CAAZ,EAAeE,KAAtC;AACAnN,eAAOyM,KAAP,CAAa1I,KAAb,CAAmB4I,CAAnB,GAAuBM,YAAY,CAAZ,EAAeG,KAAtC;;AAEA,YAAIpN,OAAOwC,QAAP,CAAgB4D,GAAhB,CAAoB,CAApB,EAAuBiH,iBAA3B,EAA8C;AAC5CrN,iBAAOsN,SAAP,GAAmBP,KAAKO,SAAxB;AACAtN,iBAAOwC,QAAP,CAAgB4D,GAAhB,CAAoB,CAApB,EAAuBiH,iBAAvB,CAAyCrN,OAAOsN,SAAhD;AACD;AACD;AACAtN,eAAOwC,QAAP,CAAgB4C,IAAhB,CAAqB,qCAArB,EAA4DmI,WAA5D;AACA;AACAvN,eAAOwC,QAAP,CAAgB4C,IAAhB,CAAqB,gCAArB,EAAuDoI,UAAvD;AACAxN,eAAOwC,QAAP,CAAgB4C,IAAhB,CAAqB,+BAArB,EAAsDqI,eAAtD;AACD;AACF,KA1BD;;AA4BA;;;;;;AAMA,QAAIA,kBAAkB,SAAlBA,eAAkB,CAAS7F,CAAT,EAAY;AAChC;;AAEAV,0BAAoBlH,OAAOyM,KAAP,CAAaK,WAAb,CAAyB3F,IAA7C,EAAmD,OAAnD,EAA4D,CAA5D;;AAEA;AACAnH,aAAOlC,QAAP,CAAgBmC,EAAhB,CAAmBkK,WAAnB,CAA+B,UAA/B;AACAnK,aAAOwC,QAAP,CAAgBuF,MAAhB,CAAuB,+BAAvB,EAAwD0F,eAAxD;AACAzN,aAAOwC,QAAP,CAAgBuF,MAAhB,CAAuB,qCAAvB,EAA8DwF,WAA9D;AACAvN,aAAOwC,QAAP,CAAgBuF,MAAhB,CAAuB,gCAAvB,EAAyDyF,UAAzD;AACA,UAAIxN,OAAOwC,QAAP,CAAgB4D,GAAhB,CAAoB,CAApB,EAAuBsH,qBAA3B,EAAkD;AAChD1N,eAAOwC,QAAP,CAAgB4D,GAAhB,CAAoB,CAApB,EAAuBsH,qBAAvB,CAA6C1N,OAAOsN,SAApD;AACD;AACF,KAbD;;AAeA;;;;;;AAMA,QAAIC,cAAc,SAAdA,WAAc,CAAS3F,CAAT,EAAY;AAC5B,UAAImF,OAAOnF,EAAEoF,aAAb;AAAA,UACAC,cAAe,OAAOF,KAAKG,cAAZ,KAA+B,WAAhC,GAA+CH,KAAKG,cAApD,GAAqE,CAACH,IAAD,CADnF;;AAEA;AACAY,kBAAY9M,KAAKuK,GAAL,CAAS6B,YAAY,CAAZ,EAAeE,KAAf,GAAuBnN,OAAOyM,KAAP,CAAa1I,KAAb,CAAmB2I,CAAnD,CAHZ;AAAA,UAIAkB,YAAY/M,KAAKuK,GAAL,CAAS6B,YAAY,CAAZ,EAAeG,KAAf,GAAuBpN,OAAOyM,KAAP,CAAa1I,KAAb,CAAmB4I,CAAnD,CAJZ;AAAA,UAKArF,QAAQ,CALR;AAAA,UAMAuG,SAAS,CANT;;AAQA;AACA,UAAKF,YAAY,CAAb,GAAkBC,SAAlB,IAA+B5N,OAAOS,QAAP,CAAgBtD,oBAAnD,EAAyE;AACvEyK,UAAE2B,cAAF;AACF;AACC,OAHD,MAGO,IAAKqE,YAAY,CAAb,GAAkBD,SAAlB,IAA+B3N,OAAOS,QAAP,CAAgBrD,oBAAnD,EAAyE;AAC9EwK,UAAE2B,cAAF;AACD;AACD,UAAIvJ,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,MAAzB,IAAmCoE,OAAOS,QAAP,CAAgBvD,aAAvD,EAAsE;AACpE;AACA,YAAI8C,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAA7B,EAA2C;AACzCiS,mBAASZ,YAAY,CAAZ,EAAeE,KAAf,GAAuBnN,OAAOyM,KAAP,CAAa1I,KAAb,CAAmB2I,CAAnD;AACApF,kBAAQtH,OAAOyM,KAAP,CAAaK,WAAb,CAAyB3F,IAAzB,GAAgC0G,MAAxC;AACF;AACC,SAJD,MAIO;AACLA,mBAASZ,YAAY,CAAZ,EAAeG,KAAf,GAAuBpN,OAAOyM,KAAP,CAAa1I,KAAb,CAAmB4I,CAAnD;AACArF,kBAAQtH,OAAOyM,KAAP,CAAaK,WAAb,CAAyBzF,GAAzB,GAA+BwG,MAAvC;AACD;AACD3G,4BAAoBI,KAApB,EAA2B,OAA3B,EAAoC,CAApC;AACD;AACF,KA5BD;;AA8BA;;;;;;AAMA,QAAIkG,aAAa,SAAbA,UAAa,CAAS5F,CAAT,EAAY;AAC3B5H,aAAOwC,QAAP,CAAgBuF,MAAhB,CAAuB,qCAAvB,EAA8DwF,WAA9D;AACA;AACAvN,aAAOlC,QAAP,CAAgBmC,EAAhB,CAAmBkK,WAAnB,CAA+B,UAA/B;AACA,UAAI4C,OAAUnF,EAAEoF,aAAhB;AAAA,UACAC,cAAe,OAAOF,KAAKG,cAAZ,KAA+B,WAAhC,GAA+CH,KAAKG,cAApD,GAAqE,CAACH,IAAD,CADnF;AAAA,UAEAzF,QAAc,CAFd;AAAA,UAGAwG,WAAc,CAHd;AAIA;AACA9N,aAAOyM,KAAP,CAAaG,GAAb,CAAiBF,CAAjB,GAAqBO,YAAY,CAAZ,EAAeE,KAApC;AACAnN,aAAOyM,KAAP,CAAaG,GAAb,CAAiBD,CAAjB,GAAqBM,YAAY,CAAZ,EAAeG,KAApC;AACA;AACA,UAAIpN,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,MAA7B,EAAqC;AACnCkS,mBAAWjN,KAAKuK,GAAL,CAASpL,OAAOyM,KAAP,CAAa1I,KAAb,CAAmB2I,CAAnB,GAAuB1M,OAAOyM,KAAP,CAAaG,GAAb,CAAiBF,CAAjD,CAAX;AACA,YAAIoB,YAAY9N,OAAOS,QAAP,CAAgBxD,cAAhC,EAAgD;AAC9C,cAAI+C,OAAOyM,KAAP,CAAa1I,KAAb,CAAmB2I,CAAnB,GAAuB1M,OAAOyM,KAAP,CAAaG,GAAb,CAAiBF,CAA5C,EAA+C;AAC7CzM,eAAGyJ,aAAH;AACD,WAFD,MAEO;AACLzJ,eAAG0J,aAAH;AACD;AACD1J,aAAGwJ,QAAH;AACD;AACH;AACC,OAXD,MAWO;AACL;AACA,YAAIzJ,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAA7B,EAA2C;AACzCkS,qBAAW9N,OAAOyM,KAAP,CAAaG,GAAb,CAAiBF,CAAjB,GAAqB1M,OAAOyM,KAAP,CAAa1I,KAAb,CAAmB2I,CAAnD;AACApF,kBAAQtH,OAAOyM,KAAP,CAAaK,WAAb,CAAyB3F,IAAjC;AACD,SAHD,MAGO;AACL2G,qBAAW9N,OAAOyM,KAAP,CAAaG,GAAb,CAAiBD,CAAjB,GAAqB3M,OAAOyM,KAAP,CAAa1I,KAAb,CAAmB4I,CAAnD;AACArF,kBAAQtH,OAAOyM,KAAP,CAAaK,WAAb,CAAyBzF,GAAjC;AACD;AACD;AACA,YAAI,CAACrH,OAAOS,QAAP,CAAgB3E,YAAjB,KAAmCkE,OAAOgB,MAAP,CAAcC,KAAd,KAAwB,CAAxB,IAA6B6M,WAAW,CAAzC,IAAgD9N,OAAOgB,MAAP,CAAcuC,IAAd,IAAsBuK,WAAW,CAAnH,CAAJ,EAA4H;AAC1H5G,8BAAoBI,KAApB,EAA2B,OAA3B,EAAoC,GAApC;AACD,SAFD,MAEO;AACL;AACA,cAAIzG,KAAKuK,GAAL,CAAS0C,QAAT,KAAsB9N,OAAOS,QAAP,CAAgBxD,cAA1C,EAA0D;AACxD,gBAAI6Q,WAAW,CAAf,EAAkB;AAChB7N,iBAAGyJ,aAAH;AACD,aAFD,MAEO;AACLzJ,iBAAG0J,aAAH;AACD;AACD1J,eAAGwJ,QAAH;AACD,WAPD,MAOO;AACL;AACAvC,gCAAoBI,KAApB,EAA2B,OAA3B,EAAoC,GAApC;AACD;AACF;AACF;AACDtH,aAAOwC,QAAP,CAAgBuF,MAAhB,CAAuB,gCAAvB,EAAyDyF,UAAzD;AACA,UAAIxN,OAAOwC,QAAP,CAAgB4D,GAAhB,CAAoB,CAApB,EAAuBsH,qBAA3B,EAAkD;AAChD1N,eAAOwC,QAAP,CAAgB4D,GAAhB,CAAoB,CAApB,EAAuBsH,qBAAvB,CAA6C1N,OAAOsN,SAApD;AACD;AACF,KAtDD;;AAwDA;;;AAGA,QAAIjI,eAAe,SAAfA,YAAe,CAASuC,CAAT,EAAY;AAC7B;AACA,UAAI,CAAC5H,OAAOmF,WAAZ,EAAyB;AAAE;AAAS;AACpC;AACA,UAAInF,OAAOqB,OAAX,EAAoB;AAClBlB,eAAOoK,UAAP,CAAkBlF,YAAlB,EAAgC,EAAhC;AACD,OAFD,MAEO;AACL;AACA,YAAI0I,iBAAiBrS,EAAEyE,MAAF,EAAUC,KAAV,EAArB;AAAA,YACA4N,kBAAkBtS,EAAEyE,MAAF,EAAUG,MAAV,EADlB;AAEA;AACA;AACA;AACA,YAAIJ,gBAAgB6N,cAAhB,IAAkC1N,iBAAiB2N,eAAvD,EAAwE;AACtE;AACA9N,wBAAc6N,cAAd;AACA1N,yBAAe2N,eAAf;AACA;AACA/N,aAAGgF,YAAH;AACA;AACAjF,iBAAOS,QAAP,CAAgBf,cAAhB,CAA+BwF,IAA/B,CAAoCjF,EAApC,EAAwCD,OAAOgB,MAAP,CAAcC,KAAtD;AACD;AACF;AACF,KAvBD;;AAyBA;;;;;;AAMA,QAAIgN,4BAA4B,SAA5BA,yBAA4B,CAASC,iBAAT,EAA4B;AAC1D,UAAIC,wBAAwB1H,wBAA5B;AACA;AACA,UAAIzG,OAAOS,QAAP,CAAgBnD,UAAhB,IAA8B,CAAC0C,OAAOS,QAAP,CAAgBnE,MAAnD,EAA2D;AACzD;AACA0D,eAAOY,QAAP,CAAgBuB,IAAhB,CAAqB,aAArB,EAAoC,MAApC;AACA;AACAnC,eAAOY,QAAP,CAAgB4D,KAAhB,CAAsB0J,iBAAtB,EAAyCA,oBAAoBC,qBAA7D,EAAoFhM,IAApF,CAAyF,aAAzF,EAAwG,OAAxG;AACD;AACF,KATD;;AAWA;;;;;;AAMA,QAAIiM,gBAAgB,SAAhBA,aAAgB,CAASnE,UAAT,EAAqB;AACvC,UAAIA,aAAa,CAAjB,EAAoB;AAClB,YAAIjK,OAAOS,QAAP,CAAgB3E,YAApB,EAAkC;AAChC,iBAAO0H,gBAAgB,CAAvB;AACD,SAFD,MAEM;AACJ;AACA,iBAAOxD,OAAOgB,MAAP,CAAcC,KAArB;AACD;AACH;AACC,OARD,MAQO,IAAIgJ,cAAczG,aAAlB,EAAiC;AACtC,YAAIxD,OAAOS,QAAP,CAAgB3E,YAApB,EAAkC;AAChC,iBAAO,CAAP;AACD,SAFD,MAEO;AACL;AACA,iBAAOkE,OAAOgB,MAAP,CAAcC,KAArB;AACD;AACH;AACC,OARM,MAQA;AACL,eAAOgJ,UAAP;AACD;AACF,KApBD;;AAsBA;;;;;;AAMA;;;;;;;;;AASAhK,OAAG+J,SAAH,GAAe,UAASC,UAAT,EAAqBoE,SAArB,EAAgC;AAC7C;AACA;AACA,UAAIC,oBAAoB,IAAxB;AAAA,UACAC,SAAS,CADT;AAAA,UAEA1L,WAAW,EAACsE,MAAM,CAAP,EAAUE,KAAK,CAAf,EAFX;AAAA,UAGAL,YAAY,IAHZ;AAAA,UAIAC,gBAJA;AAAA,UAIkB3E,EAJlB;AAAA,UAIsBgF,KAJtB;AAAA,UAI6BkH,SAJ7B;AAKA;AACAxO,aAAOoK,QAAP,GAAkBpK,OAAOgB,MAAP,CAAcC,KAAhC;AACA;AACAjB,aAAOgB,MAAP,CAAcC,KAAd,GAAsBmN,cAAcnE,UAAd,CAAtB;;AAEA;AACA,UAAIjK,OAAOqB,OAAP,IAAkBrB,OAAOgB,MAAP,CAAcC,KAAd,KAAwBjB,OAAOoK,QAArD,EAA+D;AAAE;AAAS;AAC1E;AACApK,aAAOqB,OAAP,GAAiB,IAAjB;;AAEAiN,0BAAoBtO,OAAOS,QAAP,CAAgBnB,aAAhB,CAA8B4F,IAA9B,CAAmCjF,EAAnC,EAAuCD,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBtC,OAAOgB,MAAP,CAAcC,KAAjC,CAAvC,EAAgFjB,OAAOoK,QAAvF,EAAiGpK,OAAOgB,MAAP,CAAcC,KAA/G,CAApB;;AAEA;AACA,UAAI,OAAQqN,iBAAR,KAA+B,WAA/B,IAA8C,CAACA,iBAAnD,EAAsE;AACpEtO,eAAOgB,MAAP,CAAcC,KAAd,GAAsBjB,OAAOoK,QAA7B,CADoE,CAC7B;AACvCpK,eAAOqB,OAAP,GAAiB,KAAjB,CAFoE,CAE5C;AACxB;AACD;;AAED,UAAIgN,cAAc,MAAlB,EAA0B;AACxB;AACA,YAAI,CAACrO,OAAOS,QAAP,CAAgBjB,WAAhB,CAA4B0F,IAA5B,CAAiCjF,EAAjC,EAAqCD,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBtC,OAAOgB,MAAP,CAAcC,KAAjC,CAArC,EAA8EjB,OAAOoK,QAArF,EAA+FpK,OAAOgB,MAAP,CAAcC,KAA7G,CAAL,EAA0H;AACxHqN,8BAAoB,KAApB;AACD;AACF,OALD,MAKO,IAAID,cAAc,MAAlB,EAA0B;AAC/B;AACA,YAAI,CAACrO,OAAOS,QAAP,CAAgBhB,WAAhB,CAA4ByF,IAA5B,CAAiCjF,EAAjC,EAAqCD,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBtC,OAAOgB,MAAP,CAAcC,KAAjC,CAArC,EAA8EjB,OAAOoK,QAArF,EAA+FpK,OAAOgB,MAAP,CAAcC,KAA7G,CAAL,EAA0H;AACxHqN,8BAAoB,KAApB;AACD;AACF;;AAED;AACAtO,aAAOgB,MAAP,CAAcuC,IAAd,GAAqBvD,OAAOgB,MAAP,CAAcC,KAAd,IAAuBuC,gBAAgB,CAA5D;AACA;AACA,UAAIxD,OAAOS,QAAP,CAAgBjD,KAAhB,IAAyBwC,OAAOS,QAAP,CAAgB5C,WAA7C,EAA0D;AAAE2H,0BAAkBxF,OAAOgB,MAAP,CAAcC,KAAhC;AAAyC;AACrG;AACA,UAAIjB,OAAOS,QAAP,CAAgB3C,QAApB,EAA8B;AAAE2H;AAA4B;AAC5D;AACA,UAAIzF,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,MAA7B,EAAqC;AACnC;AACA,YAAIoE,OAAOS,QAAP,CAAgBjE,cAAhB,IAAkCwD,OAAOwC,QAAP,CAAgBlC,MAAhB,OAA6B0E,mBAAnE,EAAwF;AACtFhF,iBAAOwC,QAAP,CAAgB2F,OAAhB,CAAwB,EAAC7H,QAAQ0E,mBAAT,EAAxB,EAAuDhF,OAAOS,QAAP,CAAgBhE,mBAAvE;AACD;AACD;AACAuD,eAAOY,QAAP,CAAgB6N,MAAhB,CAAuB,UAAvB,EAAmCC,OAAnC,CAA2C1O,OAAOS,QAAP,CAAgBzE,KAA3D,EAAkE4G,GAAlE,CAAsE,EAACQ,QAAQ,CAAT,EAAtE;AACA;AACApD,eAAOY,QAAP,CAAgB0B,EAAhB,CAAmBtC,OAAOgB,MAAP,CAAcC,KAAjC,EAAwC2B,GAAxC,CAA4C,QAA5C,EAAsD5C,OAAOS,QAAP,CAAgB3D,WAAhB,GAA8B,CAApF,EAAuF6R,MAAvF,CAA8F3O,OAAOS,QAAP,CAAgBzE,KAA9G,EAAqH,YAAW;AAC9HN,YAAE,IAAF,EAAQkH,GAAR,CAAY,QAAZ,EAAsB5C,OAAOS,QAAP,CAAgB3D,WAAtC;AACAkL;AACD,SAHD;AAIF;AACC,OAbD,MAaO;AACL;AACA,YAAIhI,OAAOS,QAAP,CAAgBjE,cAAhB,IAAkCwD,OAAOwC,QAAP,CAAgBlC,MAAhB,OAA6B0E,mBAAnE,EAAwF;AACtFhF,iBAAOwC,QAAP,CAAgB2F,OAAhB,CAAwB,EAAC7H,QAAQ0E,mBAAT,EAAxB,EAAuDhF,OAAOS,QAAP,CAAgBhE,mBAAvE;AACD;AACD;AACA,YAAI,CAACuD,OAAOS,QAAP,CAAgB3E,YAAjB,IAAiCkE,OAAOkB,QAAxC,IAAoDlB,OAAOgB,MAAP,CAAcuC,IAAtE,EAA4E;AAC1E,cAAIvD,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAA7B,EAA2C;AACzC;AACAoL,wBAAYhH,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBtC,OAAOY,QAAP,CAAgBd,MAAhB,GAAyB,CAA5C,CAAZ;AACA+C,uBAAWmE,UAAUnE,QAAV,EAAX;AACA;AACA0L,qBAASvO,OAAOwC,QAAP,CAAgBpC,KAAhB,KAA0B4G,UAAUI,UAAV,EAAnC;AACD,WAND,MAMO;AACL;AACAH,+BAAmBjH,OAAOY,QAAP,CAAgBd,MAAhB,GAAyBE,OAAOS,QAAP,CAAgBzB,SAA5D;AACA6D,uBAAW7C,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmB2E,gBAAnB,EAAqCpE,QAArC,EAAX;AACD;AACD;AACD,SAbD,MAaO,IAAI7C,OAAOkB,QAAP,IAAmBlB,OAAOgB,MAAP,CAAcuC,IAAjC,IAAyC8K,cAAc,MAA3D,EAAmE;AACxE;AACA/L,eAAKtC,OAAOS,QAAP,CAAgBvB,UAAhB,KAA+B,CAA/B,GAAmCc,OAAOS,QAAP,CAAgBxB,SAAhB,GAA4B6G,WAA/D,GAA8E,CAACtC,gBAAgB,CAAjB,IAAsBsC,WAAvB,IAAuC9F,OAAOY,QAAP,CAAgBd,MAAhB,GAAyBE,OAAOS,QAAP,CAAgBxB,SAAhF,CAAlF;AACA+H,sBAAY/G,GAAGW,QAAH,CAAY,WAAZ,EAAyB0B,EAAzB,CAA4BA,EAA5B,CAAZ;AACAO,qBAAWmE,UAAUnE,QAAV,EAAX;AACF;AACC,SANM,MAMA,IAAIwL,cAAc,MAAd,IAAwBrO,OAAOgB,MAAP,CAAcC,KAAd,KAAwB,CAApD,EAAuD;AAC5D;AACA4B,qBAAW5C,GAAGkE,IAAH,CAAQ,aAAR,EAAuB7B,EAAvB,CAA0BtC,OAAOS,QAAP,CAAgBxB,SAA1C,EAAqD4D,QAArD,EAAX;AACA7C,iBAAOgB,MAAP,CAAcuC,IAAd,GAAqB,KAArB;AACF;AACC,SALM,MAKA,IAAI0G,cAAc,CAAlB,EAAqB;AAC1B;AACAuE,sBAAYvE,aAAatJ,SAASmF,WAAT,CAAzB;AACAjD,qBAAW7C,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBkM,SAAnB,EAA8B3L,QAA9B,EAAX;AACD;;AAED;;;;AAIA,YAAI,OAAQA,QAAR,KAAsB,WAA1B,EAAuC;AACrCyE,kBAAQtH,OAAOS,QAAP,CAAgB7E,IAAhB,KAAyB,YAAzB,GAAwC,EAAEiH,SAASsE,IAAT,GAAgBoH,MAAlB,CAAxC,GAAoE,CAAC1L,SAASwE,GAAtF;AACA;AACAH,8BAAoBI,KAApB,EAA2B,OAA3B,EAAoCtH,OAAOS,QAAP,CAAgBzE,KAApD;AACD,SAJD,MAIO;AACLgE,iBAAOqB,OAAP,GAAiB,KAAjB;AACD;AACF;AACD,UAAIrB,OAAOS,QAAP,CAAgBnD,UAApB,EAAgC;AAAE2Q,kCAA0BjO,OAAOgB,MAAP,CAAcC,KAAd,GAAsB6E,WAAhD;AAA+D;AAClG,KA5GD;;AA8GA;;;AAGA7F,OAAGyJ,aAAH,GAAmB,YAAW;AAC5B;AACA,UAAI,CAAC1J,OAAOS,QAAP,CAAgB3E,YAAjB,IAAiCkE,OAAOgB,MAAP,CAAcuC,IAAnD,EAAyD;AAAE;AAAS;AACpE,UAAIuG,aAAanJ,SAASX,OAAOgB,MAAP,CAAcC,KAAvB,IAAgC,CAAjD;AACAhB,SAAG+J,SAAH,CAAaF,UAAb,EAAyB,MAAzB;AACD,KALD;;AAOA;;;AAGA7J,OAAG0J,aAAH,GAAmB,YAAW;AAC5B;AACA,UAAI,CAAC3J,OAAOS,QAAP,CAAgB3E,YAAjB,IAAiCkE,OAAOgB,MAAP,CAAcC,KAAd,KAAwB,CAA7D,EAAgE;AAAE;AAAS;AAC3E,UAAI6I,aAAanJ,SAASX,OAAOgB,MAAP,CAAcC,KAAvB,IAAgC,CAAjD;AACAhB,SAAG+J,SAAH,CAAaF,UAAb,EAAyB,MAAzB;AACD,KALD;;AAOA;;;;;;AAMA7J,OAAG2J,SAAH,GAAe,UAASgF,oBAAT,EAA+B;AAC5C;AACA,UAAI5O,OAAOsB,QAAX,EAAqB;AAAE;AAAS;AAChC;AACAtB,aAAOsB,QAAP,GAAkBuN,YAAY,YAAW;AACvC,YAAI7O,OAAOS,QAAP,CAAgB9B,aAAhB,KAAkC,MAAtC,EAA8C;AAC5CsB,aAAGyJ,aAAH;AACD,SAFD,MAEO;AACLzJ,aAAG0J,aAAH;AACD;AACF,OANiB,EAMf3J,OAAOS,QAAP,CAAgBhC,KAND,CAAlB;AAOA;AACA,UAAIuB,OAAOS,QAAP,CAAgBtC,YAAhB,IAAgCyQ,yBAAyB,IAA7D,EAAmE;AAAEvF,2BAAmB,MAAnB;AAA6B;AACnG,KAbD;;AAeA;;;;;;AAMApJ,OAAGwJ,QAAH,GAAc,UAASmF,oBAAT,EAA+B;AAC3C;AACA,UAAI,CAAC5O,OAAOsB,QAAZ,EAAsB;AAAE;AAAS;AACjC;AACAwN,oBAAc9O,OAAOsB,QAArB;AACAtB,aAAOsB,QAAP,GAAkB,IAAlB;AACA;AACA,UAAItB,OAAOS,QAAP,CAAgBtC,YAAhB,IAAgCyQ,yBAAyB,IAA7D,EAAmE;AAAEvF,2BAAmB,OAAnB;AAA8B;AACpG,KARD;;AAUA;;;AAGApJ,OAAG8O,eAAH,GAAqB,YAAW;AAC9B,aAAO/O,OAAOgB,MAAP,CAAcC,KAArB;AACD,KAFD;;AAIA;;;AAGAhB,OAAG+O,sBAAH,GAA4B,YAAW;AACrC,aAAOhP,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBtC,OAAOgB,MAAP,CAAcC,KAAjC,CAAP;AACD,KAFD;;AAIA;;;;;AAKAhB,OAAGgP,eAAH,GAAqB,UAAShO,KAAT,EAAgB;AACnC,aAAOjB,OAAOY,QAAP,CAAgB0B,EAAhB,CAAmBrB,KAAnB,CAAP;AACD,KAFD;;AAIA;;;AAGAhB,OAAGiP,aAAH,GAAmB,YAAW;AAC5B,aAAOlP,OAAOY,QAAP,CAAgBd,MAAvB;AACD,KAFD;;AAIA;;;AAGAG,OAAGkP,SAAH,GAAe,YAAW;AACxB,aAAOnP,OAAOqB,OAAd;AACD,KAFD;;AAIA;;;AAGApB,OAAGgF,YAAH,GAAkB,YAAW;AAC3B;AACAjF,aAAOY,QAAP,CAAgBmF,GAAhB,CAAoB9F,GAAGkE,IAAH,CAAQ,WAAR,CAApB,EAA0CiD,UAA1C,CAAqDjE,eAArD;AACA;AACAnD,aAAOwC,QAAP,CAAgBI,GAAhB,CAAoB,QAApB,EAA8BoC,mBAA9B;AACA;AACA,UAAI,CAAChF,OAAOS,QAAP,CAAgBnE,MAArB,EAA6B;AAAEyI;AAAqB;AACpD;AACA;AACA,UAAI/E,OAAOgB,MAAP,CAAcuC,IAAlB,EAAwB;AAAEvD,eAAOgB,MAAP,CAAcC,KAAd,GAAsBuC,gBAAgB,CAAtC;AAA0C;AACpE;AACA,UAAIxD,OAAOgB,MAAP,CAAcC,KAAd,IAAuBuC,aAA3B,EAA0C;AAAExD,eAAOgB,MAAP,CAAcuC,IAAd,GAAqB,IAArB;AAA4B;AACxE;AACA,UAAIvD,OAAOS,QAAP,CAAgBjD,KAAhB,IAAyB,CAACwC,OAAOS,QAAP,CAAgB5C,WAA9C,EAA2D;AACzDuK;AACA5C,0BAAkBxF,OAAOgB,MAAP,CAAcC,KAAhC;AACD;AACD,UAAIjB,OAAOS,QAAP,CAAgBnD,UAApB,EAAgC;AAAE2Q,kCAA0BjO,OAAOgB,MAAP,CAAcC,KAAd,GAAsB6E,WAAhD;AAA+D;AAClG,KAlBD;;AAoBA;;;AAGA7F,OAAGmP,aAAH,GAAmB,YAAW;AAC5B;AACA,UAAI,CAACpP,OAAOmF,WAAZ,EAAyB;AAAE;AAAS;AACpCnF,aAAOmF,WAAP,GAAqB,KAArB;AACAzJ,QAAE,WAAF,EAAe,IAAf,EAAqBoJ,MAArB;AACA9E,aAAOY,QAAP,CAAgBb,IAAhB,CAAqB,YAAW;AAC9B,YAAIrE,EAAE,IAAF,EAAQ6E,IAAR,CAAa,WAAb,MAA8BwB,SAAlC,EAA6C;AAC3CrG,YAAE,IAAF,EAAQyG,IAAR,CAAa,OAAb,EAAsBzG,EAAE,IAAF,EAAQ6E,IAAR,CAAa,WAAb,CAAtB;AACD,SAFD,MAEO;AACL7E,YAAE,IAAF,EAAQ2T,UAAR,CAAmB,OAAnB;AACD;AACF,OAND;AAOA,UAAI3T,EAAE,IAAF,EAAQ6E,IAAR,CAAa,WAAb,MAA8BwB,SAAlC,EAA6C;AAC3C,aAAKI,IAAL,CAAU,OAAV,EAAmBzG,EAAE,IAAF,EAAQ6E,IAAR,CAAa,WAAb,CAAnB;AACD,OAFD,MAEO;AACL7E,UAAE,IAAF,EAAQ2T,UAAR,CAAmB,OAAnB;AACD;AACD3T,QAAE,IAAF,EAAQ4T,MAAR,GAAiBA,MAAjB;AACA,UAAItP,OAAOlC,QAAP,CAAgBmC,EAApB,EAAwB;AAAED,eAAOlC,QAAP,CAAgBmC,EAAhB,CAAmB6E,MAAnB;AAA8B;AACxD,UAAI9E,OAAOlC,QAAP,CAAgB8K,IAApB,EAA0B;AAAE5I,eAAOlC,QAAP,CAAgB8K,IAAhB,CAAqB9D,MAArB;AAAgC;AAC5D,UAAI9E,OAAOlC,QAAP,CAAgB+K,IAApB,EAA0B;AAAE7I,eAAOlC,QAAP,CAAgB+K,IAAhB,CAAqB/D,MAArB;AAAgC;AAC5D,UAAI9E,OAAOwI,OAAP,IAAkBxI,OAAOS,QAAP,CAAgB3C,QAAlC,IAA8C,CAACkC,OAAOS,QAAP,CAAgB5C,WAAnE,EAAgF;AAAEmC,eAAOwI,OAAP,CAAe1D,MAAf;AAA0B;AAC5GpJ,QAAE,aAAF,EAAiB,IAAjB,EAAuBoJ,MAAvB;AACA,UAAI9E,OAAOlC,QAAP,CAAgBoL,MAApB,EAA4B;AAAElJ,eAAOlC,QAAP,CAAgBoL,MAAhB,CAAuBpE,MAAvB;AAAkC;AAChEgK,oBAAc9O,OAAOsB,QAArB;AACA,UAAItB,OAAOS,QAAP,CAAgB5D,UAApB,EAAgC;AAAEnB,UAAEyE,MAAF,EAAU4H,MAAV,CAAiB,QAAjB,EAA2B1C,YAA3B;AAA2C;AAC7E,UAAIrF,OAAOS,QAAP,CAAgBlD,eAApB,EAAqC;AAAE7B,UAAEgG,QAAF,EAAYqG,MAAZ,CAAmB,SAAnB,EAA8BnC,QAA9B;AAA0C;AACjF;AACAlK,QAAE,IAAF,EAAQ6T,UAAR,CAAmB,UAAnB;AACD,KA7BD;;AA+BA;;;AAGAtP,OAAGuP,YAAH,GAAkB,UAAS/O,QAAT,EAAmB;AACnC,UAAIA,aAAasB,SAAjB,EAA4B;AAAElC,kBAAUY,QAAV;AAAqB;AACnDR,SAAGmP,aAAH;AACA5O;AACA;AACA9E,QAAEuE,EAAF,EAAMM,IAAN,CAAW,UAAX,EAAuB,IAAvB;AACD,KAND;;AAQAC;;AAEA9E,MAAEuE,EAAF,EAAMM,IAAN,CAAW,UAAX,EAAuB,IAAvB;;AAEA;AACA,WAAO,IAAP;AACD,GAv+CD;AAy+CD,CA/jDA,EA+jDEkP,MA/jDF;;;;;ACPD;;;;;;AAMA;;;;;;AAMA;;AAEE,WAAUC,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,OAAOC,MAAP,IAAiB,UAAjB,IAA+BA,OAAOC,GAA3C,EAAiD;AAC/C;AACAD,WAAQ,uBAAR,EAAgCD,OAAhC;AACD,GAHD,MAGO,IAAK,QAAOG,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBJ,SAAjB;AACD,GAHM,MAGA;AACL;AACAD,WAAOM,SAAP,GAAmBL,SAAnB;AACD;AAEF,CAdC,EAcC,OAAOxP,MAAP,IAAiB,WAAjB,GAA+BA,MAA/B,YAdD,EAc+C,YAAW;;AAI5D,WAAS6P,SAAT,GAAqB,CAAE;;AAEvB,MAAIC,QAAQD,UAAUE,SAAtB;;AAEAD,QAAMvH,EAAN,GAAW,UAAUyH,SAAV,EAAqBC,QAArB,EAAgC;AACzC,QAAK,CAACD,SAAD,IAAc,CAACC,QAApB,EAA+B;AAC7B;AACD;AACD;AACA,QAAIC,SAAS,KAAKC,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA5C;AACA;AACA,QAAIC,YAAYF,OAAQF,SAAR,IAAsBE,OAAQF,SAAR,KAAuB,EAA7D;AACA;AACA,QAAKI,UAAUC,OAAV,CAAmBJ,QAAnB,KAAiC,CAAC,CAAvC,EAA2C;AACzCG,gBAAUE,IAAV,CAAgBL,QAAhB;AACD;;AAED,WAAO,IAAP;AACD,GAdD;;AAgBAH,QAAMS,IAAN,GAAa,UAAUP,SAAV,EAAqBC,QAArB,EAAgC;AAC3C,QAAK,CAACD,SAAD,IAAc,CAACC,QAApB,EAA+B;AAC7B;AACD;AACD;AACA,SAAK1H,EAAL,CAASyH,SAAT,EAAoBC,QAApB;AACA;AACA;AACA,QAAIO,aAAa,KAAKC,WAAL,GAAmB,KAAKA,WAAL,IAAoB,EAAxD;AACA;AACA,QAAIC,gBAAgBF,WAAYR,SAAZ,IAA0BQ,WAAYR,SAAZ,KAA2B,EAAzE;AACA;AACAU,kBAAeT,QAAf,IAA4B,IAA5B;;AAEA,WAAO,IAAP;AACD,GAfD;;AAiBAH,QAAMa,GAAN,GAAY,UAAUX,SAAV,EAAqBC,QAArB,EAAgC;AAC1C,QAAIG,YAAY,KAAKD,OAAL,IAAgB,KAAKA,OAAL,CAAcH,SAAd,CAAhC;AACA,QAAK,CAACI,SAAD,IAAc,CAACA,UAAUzQ,MAA9B,EAAuC;AACrC;AACD;AACD,QAAImB,QAAQsP,UAAUC,OAAV,CAAmBJ,QAAnB,CAAZ;AACA,QAAKnP,SAAS,CAAC,CAAf,EAAmB;AACjBsP,gBAAUQ,MAAV,CAAkB9P,KAAlB,EAAyB,CAAzB;AACD;;AAED,WAAO,IAAP;AACD,GAXD;;AAaAgP,QAAMe,SAAN,GAAkB,UAAUb,SAAV,EAAqBc,IAArB,EAA4B;AAC5C,QAAIV,YAAY,KAAKD,OAAL,IAAgB,KAAKA,OAAL,CAAcH,SAAd,CAAhC;AACA,QAAK,CAACI,SAAD,IAAc,CAACA,UAAUzQ,MAA9B,EAAuC;AACrC;AACD;AACD,QAAI+B,IAAI,CAAR;AACA,QAAIuO,WAAWG,UAAU1O,CAAV,CAAf;AACAoP,WAAOA,QAAQ,EAAf;AACA;AACA,QAAIJ,gBAAgB,KAAKD,WAAL,IAAoB,KAAKA,WAAL,CAAkBT,SAAlB,CAAxC;;AAEA,WAAQC,QAAR,EAAmB;AACjB,UAAIc,SAASL,iBAAiBA,cAAeT,QAAf,CAA9B;AACA,UAAKc,MAAL,EAAc;AACZ;AACA;AACA,aAAKJ,GAAL,CAAUX,SAAV,EAAqBC,QAArB;AACA;AACA,eAAOS,cAAeT,QAAf,CAAP;AACD;AACD;AACAA,eAASlK,KAAT,CAAgB,IAAhB,EAAsB+K,IAAtB;AACA;AACApP,WAAKqP,SAAS,CAAT,GAAa,CAAlB;AACAd,iBAAWG,UAAU1O,CAAV,CAAX;AACD;;AAED,WAAO,IAAP;AACD,GA5BD;;AA8BA,SAAOmO,SAAP;AAEC,CApGC,CAAF;;AAsGA;;;;;;AAMA,CAAE,UAAU7P,MAAV,EAAkBwP,OAAlB,EAA4B;AAAE;AAC9B;;AAEA;;AAEA,MAAK,OAAOC,MAAP,IAAiB,UAAjB,IAA+BA,OAAOC,GAA3C,EAAiD;AAC/C;AACAD,WAAQ,CACN,uBADM,CAAR,EAEG,UAAUI,SAAV,EAAsB;AACvB,aAAOL,QAASxP,MAAT,EAAiB6P,SAAjB,CAAP;AACD,KAJD;AAKD,GAPD,MAOO,IAAK,QAAOF,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBJ,QACfxP,MADe,EAEfgR,QAAQ,YAAR,CAFe,CAAjB;AAID,GANM,MAMA;AACL;AACAhR,WAAOiR,YAAP,GAAsBzB,QACpBxP,MADoB,EAEpBA,OAAO6P,SAFa,CAAtB;AAID;AAEF,CA1BD,EA0BI,OAAO7P,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,YA1BJ;;AA4BA;;AAEA,SAASwP,OAAT,CAAkBxP,MAAlB,EAA0B6P,SAA1B,EAAsC;;AAItC,MAAItU,IAAIyE,OAAOsP,MAAf;AACA,MAAI4B,UAAUlR,OAAOkR,OAArB;;AAEA;;AAEA;AACA,WAAS3Q,MAAT,CAAiB4Q,CAAjB,EAAoBC,CAApB,EAAwB;AACtB,SAAM,IAAIC,IAAV,IAAkBD,CAAlB,EAAsB;AACpBD,QAAGE,IAAH,IAAYD,EAAGC,IAAH,CAAZ;AACD;AACD,WAAOF,CAAP;AACD;;AAED;AACA,WAASG,SAAT,CAAoBC,GAApB,EAA0B;AACxB,QAAIC,MAAM,EAAV;AACA,QAAKC,MAAMC,OAAN,CAAeH,GAAf,CAAL,EAA4B;AAC1B;AACAC,YAAMD,GAAN;AACD,KAHD,MAGO,IAAK,OAAOA,IAAI5R,MAAX,IAAqB,QAA1B,EAAqC;AAC1C;AACA,WAAM,IAAI+B,IAAE,CAAZ,EAAeA,IAAI6P,IAAI5R,MAAvB,EAA+B+B,GAA/B,EAAqC;AACnC8P,YAAIlB,IAAJ,CAAUiB,IAAI7P,CAAJ,CAAV;AACD;AACF,KALM,MAKA;AACL;AACA8P,UAAIlB,IAAJ,CAAUiB,GAAV;AACD;AACD,WAAOC,GAAP;AACD;;AAED;;AAEA;;;;;AAKA,WAASG,YAAT,CAAuBC,IAAvB,EAA6BlS,OAA7B,EAAsCmS,QAAtC,EAAiD;AAC/C;AACA,QAAK,EAAG,gBAAgBF,YAAnB,CAAL,EAAyC;AACvC,aAAO,IAAIA,YAAJ,CAAkBC,IAAlB,EAAwBlS,OAAxB,EAAiCmS,QAAjC,CAAP;AACD;AACD;AACA,QAAK,OAAOD,IAAP,IAAe,QAApB,EAA+B;AAC7BA,aAAOrQ,SAASuQ,gBAAT,CAA2BF,IAA3B,CAAP;AACD;;AAED,SAAKG,QAAL,GAAgBT,UAAWM,IAAX,CAAhB;AACA,SAAKlS,OAAL,GAAea,OAAQ,EAAR,EAAY,KAAKb,OAAjB,CAAf;;AAEA,QAAK,OAAOA,OAAP,IAAkB,UAAvB,EAAoC;AAClCmS,iBAAWnS,OAAX;AACD,KAFD,MAEO;AACLa,aAAQ,KAAKb,OAAb,EAAsBA,OAAtB;AACD;;AAED,QAAKmS,QAAL,EAAgB;AACd,WAAKtJ,EAAL,CAAS,QAAT,EAAmBsJ,QAAnB;AACD;;AAED,SAAKG,SAAL;;AAEA,QAAKzW,CAAL,EAAS;AACP;AACA,WAAK0W,UAAL,GAAkB,IAAI1W,EAAE2W,QAAN,EAAlB;AACD;;AAED;AACA9H,eAAY,YAAW;AACrB,WAAK+H,KAAL;AACD,KAFW,CAEVlN,IAFU,CAEJ,IAFI,CAAZ;AAGD;;AAED0M,eAAa5B,SAAb,GAAyBqC,OAAOC,MAAP,CAAexC,UAAUE,SAAzB,CAAzB;;AAEA4B,eAAa5B,SAAb,CAAuBrQ,OAAvB,GAAiC,EAAjC;;AAEAiS,eAAa5B,SAAb,CAAuBiC,SAAvB,GAAmC,YAAW;AAC5C,SAAKM,MAAL,GAAc,EAAd;;AAEA;AACA,SAAKP,QAAL,CAAcQ,OAAd,CAAuB,KAAKC,gBAA5B,EAA8C,IAA9C;AACD,GALD;;AAOA;;;AAGAb,eAAa5B,SAAb,CAAuByC,gBAAvB,GAA0C,UAAUZ,IAAV,EAAiB;AACzD;AACA,QAAKA,KAAKa,QAAL,IAAiB,KAAtB,EAA8B;AAC5B,WAAKC,QAAL,CAAed,IAAf;AACD;AACD;AACA,QAAK,KAAKlS,OAAL,CAAaiT,UAAb,KAA4B,IAAjC,EAAwC;AACtC,WAAKC,0BAAL,CAAiChB,IAAjC;AACD;;AAED;AACA;AACA,QAAIiB,WAAWjB,KAAKiB,QAApB;AACA,QAAK,CAACA,QAAD,IAAa,CAACC,iBAAkBD,QAAlB,CAAnB,EAAkD;AAChD;AACD;AACD,QAAIE,YAAYnB,KAAKE,gBAAL,CAAsB,KAAtB,CAAhB;AACA;AACA,SAAM,IAAIpQ,IAAE,CAAZ,EAAeA,IAAIqR,UAAUpT,MAA7B,EAAqC+B,GAArC,EAA2C;AACzC,UAAIsR,MAAMD,UAAUrR,CAAV,CAAV;AACA,WAAKgR,QAAL,CAAeM,GAAf;AACD;;AAED;AACA,QAAK,OAAO,KAAKtT,OAAL,CAAaiT,UAApB,IAAkC,QAAvC,EAAkD;AAChD,UAAIlS,WAAWmR,KAAKE,gBAAL,CAAuB,KAAKpS,OAAL,CAAaiT,UAApC,CAAf;AACA,WAAMjR,IAAE,CAAR,EAAWA,IAAIjB,SAASd,MAAxB,EAAgC+B,GAAhC,EAAsC;AACpC,YAAIuR,QAAQxS,SAASiB,CAAT,CAAZ;AACA,aAAKkR,0BAAL,CAAiCK,KAAjC;AACD;AACF;AACF,GA/BD;;AAiCA,MAAIH,mBAAmB;AACrB,OAAG,IADkB;AAErB,OAAG,IAFkB;AAGrB,QAAI;AAHiB,GAAvB;;AAMAnB,eAAa5B,SAAb,CAAuB6C,0BAAvB,GAAoD,UAAUhB,IAAV,EAAiB;AACnE,QAAIjQ,QAAQuR,iBAAkBtB,IAAlB,CAAZ;AACA,QAAK,CAACjQ,KAAN,EAAc;AACZ;AACA;AACD;AACD;AACA,QAAIwR,QAAQ,yBAAZ;AACA,QAAIC,UAAUD,MAAM/G,IAAN,CAAYzK,MAAM0R,eAAlB,CAAd;AACA,WAAQD,YAAY,IAApB,EAA2B;AACzB,UAAIE,MAAMF,WAAWA,QAAQ,CAAR,CAArB;AACA,UAAKE,GAAL,EAAW;AACT,aAAKC,aAAL,CAAoBD,GAApB,EAAyB1B,IAAzB;AACD;AACDwB,gBAAUD,MAAM/G,IAAN,CAAYzK,MAAM0R,eAAlB,CAAV;AACD;AACF,GAhBD;;AAkBA;;;AAGA1B,eAAa5B,SAAb,CAAuB2C,QAAvB,GAAkC,UAAUM,GAAV,EAAgB;AAChD,QAAIQ,eAAe,IAAIC,YAAJ,CAAkBT,GAAlB,CAAnB;AACA,SAAKV,MAAL,CAAYhC,IAAZ,CAAkBkD,YAAlB;AACD,GAHD;;AAKA7B,eAAa5B,SAAb,CAAuBwD,aAAvB,GAAuC,UAAUD,GAAV,EAAe1B,IAAf,EAAsB;AAC3D,QAAIe,aAAa,IAAIe,UAAJ,CAAgBJ,GAAhB,EAAqB1B,IAArB,CAAjB;AACA,SAAKU,MAAL,CAAYhC,IAAZ,CAAkBqC,UAAlB;AACD,GAHD;;AAKAhB,eAAa5B,SAAb,CAAuBoC,KAAvB,GAA+B,YAAW;AACxC,QAAIwB,QAAQ,IAAZ;AACA,SAAKC,eAAL,GAAuB,CAAvB;AACA,SAAKC,YAAL,GAAoB,KAApB;AACA;AACA,QAAK,CAAC,KAAKvB,MAAL,CAAY3S,MAAlB,EAA2B;AACzB,WAAKwE,QAAL;AACA;AACD;;AAED,aAAS2P,UAAT,CAAqBC,KAArB,EAA4BnC,IAA5B,EAAkCoC,OAAlC,EAA4C;AAC1C;AACA5J,iBAAY,YAAW;AACrBuJ,cAAMM,QAAN,CAAgBF,KAAhB,EAAuBnC,IAAvB,EAA6BoC,OAA7B;AACD,OAFD;AAGD;;AAED,SAAK1B,MAAL,CAAYC,OAAZ,CAAqB,UAAUiB,YAAV,EAAyB;AAC5CA,mBAAajD,IAAb,CAAmB,UAAnB,EAA+BuD,UAA/B;AACAN,mBAAarB,KAAb;AACD,KAHD;AAID,GArBD;;AAuBAR,eAAa5B,SAAb,CAAuBkE,QAAvB,GAAkC,UAAUF,KAAV,EAAiBnC,IAAjB,EAAuBoC,OAAvB,EAAiC;AACjE,SAAKJ,eAAL;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,IAAqB,CAACE,MAAMG,QAAhD;AACA;AACA,SAAKrD,SAAL,CAAgB,UAAhB,EAA4B,CAAE,IAAF,EAAQkD,KAAR,EAAenC,IAAf,CAA5B;AACA,QAAK,KAAKK,UAAL,IAAmB,KAAKA,UAAL,CAAgBkC,MAAxC,EAAiD;AAC/C,WAAKlC,UAAL,CAAgBkC,MAAhB,CAAwB,IAAxB,EAA8BJ,KAA9B;AACD;AACD;AACA,QAAK,KAAKH,eAAL,IAAwB,KAAKtB,MAAL,CAAY3S,MAAzC,EAAkD;AAChD,WAAKwE,QAAL;AACD;;AAED,QAAK,KAAKzE,OAAL,CAAa0U,KAAb,IAAsBlD,OAA3B,EAAqC;AACnCA,cAAQmD,GAAR,CAAa,eAAeL,OAA5B,EAAqCD,KAArC,EAA4CnC,IAA5C;AACD;AACF,GAhBD;;AAkBAD,eAAa5B,SAAb,CAAuB5L,QAAvB,GAAkC,YAAW;AAC3C,QAAI6L,YAAY,KAAK6D,YAAL,GAAoB,MAApB,GAA6B,MAA7C;AACA,SAAKS,UAAL,GAAkB,IAAlB;AACA,SAAKzD,SAAL,CAAgBb,SAAhB,EAA2B,CAAE,IAAF,CAA3B;AACA,SAAKa,SAAL,CAAgB,QAAhB,EAA0B,CAAE,IAAF,CAA1B;AACA,QAAK,KAAKoB,UAAV,EAAuB;AACrB,UAAIsC,WAAW,KAAKV,YAAL,GAAoB,QAApB,GAA+B,SAA9C;AACA,WAAK5B,UAAL,CAAiBsC,QAAjB,EAA6B,IAA7B;AACD;AACF,GATD;;AAWA;;AAEA,WAASd,YAAT,CAAuBT,GAAvB,EAA6B;AAC3B,SAAKA,GAAL,GAAWA,GAAX;AACD;;AAEDS,eAAa1D,SAAb,GAAyBqC,OAAOC,MAAP,CAAexC,UAAUE,SAAzB,CAAzB;;AAEA0D,eAAa1D,SAAb,CAAuBoC,KAAvB,GAA+B,YAAW;AACxC;AACA;AACA,QAAImC,aAAa,KAAKE,kBAAL,EAAjB;AACA,QAAKF,UAAL,EAAkB;AAChB;AACA,WAAKG,OAAL,CAAc,KAAKzB,GAAL,CAAS0B,YAAT,KAA0B,CAAxC,EAA2C,cAA3C;AACA;AACD;;AAED;AACA,SAAKC,UAAL,GAAkB,IAAIC,KAAJ,EAAlB;AACA,SAAKD,UAAL,CAAgBE,gBAAhB,CAAkC,MAAlC,EAA0C,IAA1C;AACA,SAAKF,UAAL,CAAgBE,gBAAhB,CAAkC,OAAlC,EAA2C,IAA3C;AACA;AACA,SAAK7B,GAAL,CAAS6B,gBAAT,CAA2B,MAA3B,EAAmC,IAAnC;AACA,SAAK7B,GAAL,CAAS6B,gBAAT,CAA2B,OAA3B,EAAoC,IAApC;AACA,SAAKF,UAAL,CAAgBG,GAAhB,GAAsB,KAAK9B,GAAL,CAAS8B,GAA/B;AACD,GAlBD;;AAoBArB,eAAa1D,SAAb,CAAuByE,kBAAvB,GAA4C,YAAW;AACrD,WAAO,KAAKxB,GAAL,CAAS7O,QAAT,IAAqB,KAAK6O,GAAL,CAAS0B,YAAT,KAA0B9S,SAAtD;AACD,GAFD;;AAIA6R,eAAa1D,SAAb,CAAuB0E,OAAvB,GAAiC,UAAUP,QAAV,EAAoBF,OAApB,EAA8B;AAC7D,SAAKE,QAAL,GAAgBA,QAAhB;AACA,SAAKrD,SAAL,CAAgB,UAAhB,EAA4B,CAAE,IAAF,EAAQ,KAAKmC,GAAb,EAAkBgB,OAAlB,CAA5B;AACD,GAHD;;AAKA;;AAEA;AACAP,eAAa1D,SAAb,CAAuBgF,WAAvB,GAAqC,UAAUC,KAAV,EAAkB;AACrD,QAAIC,SAAS,OAAOD,MAAM5N,IAA1B;AACA,QAAK,KAAM6N,MAAN,CAAL,EAAsB;AACpB,WAAMA,MAAN,EAAgBD,KAAhB;AACD;AACF,GALD;;AAOAvB,eAAa1D,SAAb,CAAuBmF,MAAvB,GAAgC,YAAW;AACzC,SAAKT,OAAL,CAAc,IAAd,EAAoB,QAApB;AACA,SAAKU,YAAL;AACD,GAHD;;AAKA1B,eAAa1D,SAAb,CAAuBqF,OAAvB,GAAiC,YAAW;AAC1C,SAAKX,OAAL,CAAc,KAAd,EAAqB,SAArB;AACA,SAAKU,YAAL;AACD,GAHD;;AAKA1B,eAAa1D,SAAb,CAAuBoF,YAAvB,GAAsC,YAAW;AAC/C,SAAKR,UAAL,CAAgBU,mBAAhB,CAAqC,MAArC,EAA6C,IAA7C;AACA,SAAKV,UAAL,CAAgBU,mBAAhB,CAAqC,OAArC,EAA8C,IAA9C;AACA,SAAKrC,GAAL,CAASqC,mBAAT,CAA8B,MAA9B,EAAsC,IAAtC;AACA,SAAKrC,GAAL,CAASqC,mBAAT,CAA8B,OAA9B,EAAuC,IAAvC;AACD,GALD;;AAOA;;AAEA,WAAS3B,UAAT,CAAqBJ,GAArB,EAA0BgC,OAA1B,EAAoC;AAClC,SAAKhC,GAAL,GAAWA,GAAX;AACA,SAAKgC,OAAL,GAAeA,OAAf;AACA,SAAKtC,GAAL,GAAW,IAAI4B,KAAJ,EAAX;AACD;;AAED;AACAlB,aAAW3D,SAAX,GAAuBqC,OAAOC,MAAP,CAAeoB,aAAa1D,SAA5B,CAAvB;;AAEA2D,aAAW3D,SAAX,CAAqBoC,KAArB,GAA6B,YAAW;AACtC,SAAKa,GAAL,CAAS6B,gBAAT,CAA2B,MAA3B,EAAmC,IAAnC;AACA,SAAK7B,GAAL,CAAS6B,gBAAT,CAA2B,OAA3B,EAAoC,IAApC;AACA,SAAK7B,GAAL,CAAS8B,GAAT,GAAe,KAAKxB,GAApB;AACA;AACA,QAAIgB,aAAa,KAAKE,kBAAL,EAAjB;AACA,QAAKF,UAAL,EAAkB;AAChB,WAAKG,OAAL,CAAc,KAAKzB,GAAL,CAAS0B,YAAT,KAA0B,CAAxC,EAA2C,cAA3C;AACA,WAAKS,YAAL;AACD;AACF,GAVD;;AAYAzB,aAAW3D,SAAX,CAAqBoF,YAArB,GAAoC,YAAW;AAC7C,SAAKnC,GAAL,CAASqC,mBAAT,CAA8B,MAA9B,EAAsC,IAAtC;AACA,SAAKrC,GAAL,CAASqC,mBAAT,CAA8B,OAA9B,EAAuC,IAAvC;AACD,GAHD;;AAKA3B,aAAW3D,SAAX,CAAqB0E,OAArB,GAA+B,UAAUP,QAAV,EAAoBF,OAApB,EAA8B;AAC3D,SAAKE,QAAL,GAAgBA,QAAhB;AACA,SAAKrD,SAAL,CAAgB,UAAhB,EAA4B,CAAE,IAAF,EAAQ,KAAKyE,OAAb,EAAsBtB,OAAtB,CAA5B;AACD,GAHD;;AAKA;;AAEArC,eAAa4D,gBAAb,GAAgC,UAAUjG,MAAV,EAAmB;AACjDA,aAASA,UAAUtP,OAAOsP,MAA1B;AACA,QAAK,CAACA,MAAN,EAAe;AACb;AACD;AACD;AACA/T,QAAI+T,MAAJ;AACA;AACA/T,MAAEiE,EAAF,CAAKyR,YAAL,GAAoB,UAAUvR,OAAV,EAAmBoE,QAAnB,EAA8B;AAChD,UAAI0R,WAAW,IAAI7D,YAAJ,CAAkB,IAAlB,EAAwBjS,OAAxB,EAAiCoE,QAAjC,CAAf;AACA,aAAO0R,SAASvD,UAAT,CAAoBwD,OAApB,CAA6Bla,EAAE,IAAF,CAA7B,CAAP;AACD,KAHD;AAID,GAZD;AAaA;AACAoW,eAAa4D,gBAAb;;AAEA;;AAEA,SAAO5D,YAAP;AAEC,CA3WD;;;;;AC1HA;;;;;;;;AAQA;;;;;;AAMA;;AAEE,WAAU3R,MAAV,EAAkBwP,OAAlB,EAA4B;AAC5B;AACA,2BAF4B,CAEF;AAC1B,MAAK,OAAOC,MAAP,IAAiB,UAAjB,IAA+BA,OAAOC,GAA3C,EAAiD;AAC/C;AACAD,WAAQ,+BAAR,EAAwC,CAAE,QAAF,CAAxC,EAAsD,UAAUH,MAAV,EAAmB;AACvE,aAAOE,QAASxP,MAAT,EAAiBsP,MAAjB,CAAP;AACD,KAFD;AAGD,GALD,MAKO,IAAK,QAAOK,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBJ,QACfxP,MADe,EAEfgR,QAAQ,QAAR,CAFe,CAAjB;AAID,GANM,MAMA;AACL;AACAhR,WAAO0V,aAAP,GAAuBlG,QACrBxP,MADqB,EAErBA,OAAOsP,MAFc,CAAvB;AAID;AAEF,CAtBC,EAsBCtP,MAtBD,EAsBS,SAASwP,OAAT,CAAkBxP,MAAlB,EAA0BsP,MAA1B,EAAmC;AAC9C;;AAEA;;AAEA,MAAIqG,aAAalE,MAAM1B,SAAN,CAAgB1L,KAAjC;;AAEA;AACA;AACA,MAAI6M,UAAUlR,OAAOkR,OAArB;AACA,MAAI0E,WAAW,OAAO1E,OAAP,IAAkB,WAAlB,GAAgC,YAAW,CAAE,CAA7C,GACb,UAAU8C,OAAV,EAAoB;AAClB9C,YAAQ2E,KAAR,CAAe7B,OAAf;AACD,GAHH;;AAKA;;AAEA,WAAS0B,aAAT,CAAwBI,SAAxB,EAAmCC,WAAnC,EAAgDxa,CAAhD,EAAoD;AAClDA,QAAIA,KAAK+T,MAAL,IAAetP,OAAOsP,MAA1B;AACA,QAAK,CAAC/T,CAAN,EAAU;AACR;AACD;;AAED;AACA,QAAK,CAACwa,YAAYhG,SAAZ,CAAsBiG,MAA5B,EAAqC;AACnC;AACAD,kBAAYhG,SAAZ,CAAsBiG,MAAtB,GAA+B,UAAUC,IAAV,EAAiB;AAC9C;AACA,YAAK,CAAC1a,EAAE2a,aAAF,CAAiBD,IAAjB,CAAN,EAA+B;AAC7B;AACD;AACD,aAAKvW,OAAL,GAAenE,EAAEgF,MAAF,CAAU,IAAV,EAAgB,KAAKb,OAArB,EAA8BuW,IAA9B,CAAf;AACD,OAND;AAOD;;AAED;AACA1a,MAAEiE,EAAF,CAAMsW,SAAN,IAAoB,UAAUK,IAAV,CAAe,WAAf,EAA6B;AAC/C,UAAK,OAAOA,IAAP,IAAe,QAApB,EAA+B;AAC7B;AACA;AACA,YAAIrF,OAAO6E,WAAW5Q,IAAX,CAAiBqR,SAAjB,EAA4B,CAA5B,CAAX;AACA,eAAOC,WAAY,IAAZ,EAAkBF,IAAlB,EAAwBrF,IAAxB,CAAP;AACD;AACD;AACAwF,gBAAW,IAAX,EAAiBH,IAAjB;AACA,aAAO,IAAP;AACD,KAVD;;AAYA;AACA,aAASE,UAAT,CAAqBE,MAArB,EAA6BC,UAA7B,EAAyC1F,IAAzC,EAAgD;AAC9C,UAAI2F,WAAJ;AACA,UAAIC,kBAAkB,SAASZ,SAAT,GAAqB,IAArB,GAA4BU,UAA5B,GAAyC,IAA/D;;AAEAD,aAAO3W,IAAP,CAAa,UAAU8B,CAAV,EAAakQ,IAAb,EAAoB;AAC/B;AACA,YAAI4D,WAAWja,EAAE6E,IAAF,CAAQwR,IAAR,EAAckE,SAAd,CAAf;AACA,YAAK,CAACN,QAAN,EAAiB;AACfI,mBAAUE,YAAY,8CAAZ,GACRY,eADF;AAEA;AACD;;AAED,YAAIzB,SAASO,SAAUgB,UAAV,CAAb;AACA,YAAK,CAACvB,MAAD,IAAWuB,WAAWG,MAAX,CAAkB,CAAlB,KAAwB,GAAxC,EAA8C;AAC5Cf,mBAAUc,kBAAkB,wBAA5B;AACA;AACD;;AAED;AACA,YAAIvP,QAAQ8N,OAAOlP,KAAP,CAAcyP,QAAd,EAAwB1E,IAAxB,CAAZ;AACA;AACA2F,sBAAcA,gBAAgB7U,SAAhB,GAA4BuF,KAA5B,GAAoCsP,WAAlD;AACD,OAnBD;;AAqBA,aAAOA,gBAAgB7U,SAAhB,GAA4B6U,WAA5B,GAA0CF,MAAjD;AACD;;AAED,aAASD,SAAT,CAAoBC,MAApB,EAA4B7W,OAA5B,EAAsC;AACpC6W,aAAO3W,IAAP,CAAa,UAAU8B,CAAV,EAAakQ,IAAb,EAAoB;AAC/B,YAAI4D,WAAWja,EAAE6E,IAAF,CAAQwR,IAAR,EAAckE,SAAd,CAAf;AACA,YAAKN,QAAL,EAAgB;AACd;AACAA,mBAASQ,MAAT,CAAiBtW,OAAjB;AACA8V,mBAASoB,KAAT;AACD,SAJD,MAIO;AACL;AACApB,qBAAW,IAAIO,WAAJ,CAAiBnE,IAAjB,EAAuBlS,OAAvB,CAAX;AACAnE,YAAE6E,IAAF,CAAQwR,IAAR,EAAckE,SAAd,EAAyBN,QAAzB;AACD;AACF,OAXD;AAYD;;AAEDqB,iBAActb,CAAd;AAED;;AAED;;AAEA;AACA,WAASsb,YAAT,CAAuBtb,CAAvB,EAA2B;AACzB,QAAK,CAACA,CAAD,IAAQA,KAAKA,EAAEub,OAApB,EAAgC;AAC9B;AACD;AACDvb,MAAEub,OAAF,GAAYpB,aAAZ;AACD;;AAEDmB,eAAcvH,UAAUtP,OAAOsP,MAA/B;;AAEA;;AAEA,SAAOoG,aAAP;AAEC,CAtIC,CAAF;;AAwIA;;;;;;AAMA;;AAEE,WAAUnG,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,OAAOC,MAAP,IAAiB,UAAjB,IAA+BA,OAAOC,GAA3C,EAAiD;AAC/C;AACAD,WAAQ,uBAAR,EAAgCD,OAAhC;AACD,GAHD,MAGO,IAAK,QAAOG,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBJ,SAAjB;AACD,GAHM,MAGA;AACL;AACAD,WAAOM,SAAP,GAAmBL,SAAnB;AACD;AAEF,CAdC,EAcC,OAAOxP,MAAP,IAAiB,WAAjB,GAA+BA,MAA/B,YAdD,EAc+C,YAAW;;AAI5D,WAAS6P,SAAT,GAAqB,CAAE;;AAEvB,MAAIC,QAAQD,UAAUE,SAAtB;;AAEAD,QAAMvH,EAAN,GAAW,UAAUyH,SAAV,EAAqBC,QAArB,EAAgC;AACzC,QAAK,CAACD,SAAD,IAAc,CAACC,QAApB,EAA+B;AAC7B;AACD;AACD;AACA,QAAIC,SAAS,KAAKC,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA5C;AACA;AACA,QAAIC,YAAYF,OAAQF,SAAR,IAAsBE,OAAQF,SAAR,KAAuB,EAA7D;AACA;AACA,QAAKI,UAAUC,OAAV,CAAmBJ,QAAnB,KAAiC,CAAC,CAAvC,EAA2C;AACzCG,gBAAUE,IAAV,CAAgBL,QAAhB;AACD;;AAED,WAAO,IAAP;AACD,GAdD;;AAgBAH,QAAMS,IAAN,GAAa,UAAUP,SAAV,EAAqBC,QAArB,EAAgC;AAC3C,QAAK,CAACD,SAAD,IAAc,CAACC,QAApB,EAA+B;AAC7B;AACD;AACD;AACA,SAAK1H,EAAL,CAASyH,SAAT,EAAoBC,QAApB;AACA;AACA;AACA,QAAIO,aAAa,KAAKC,WAAL,GAAmB,KAAKA,WAAL,IAAoB,EAAxD;AACA;AACA,QAAIC,gBAAgBF,WAAYR,SAAZ,IAA0BQ,WAAYR,SAAZ,KAA2B,EAAzE;AACA;AACAU,kBAAeT,QAAf,IAA4B,IAA5B;;AAEA,WAAO,IAAP;AACD,GAfD;;AAiBAH,QAAMa,GAAN,GAAY,UAAUX,SAAV,EAAqBC,QAArB,EAAgC;AAC1C,QAAIG,YAAY,KAAKD,OAAL,IAAgB,KAAKA,OAAL,CAAcH,SAAd,CAAhC;AACA,QAAK,CAACI,SAAD,IAAc,CAACA,UAAUzQ,MAA9B,EAAuC;AACrC;AACD;AACD,QAAImB,QAAQsP,UAAUC,OAAV,CAAmBJ,QAAnB,CAAZ;AACA,QAAKnP,SAAS,CAAC,CAAf,EAAmB;AACjBsP,gBAAUQ,MAAV,CAAkB9P,KAAlB,EAAyB,CAAzB;AACD;;AAED,WAAO,IAAP;AACD,GAXD;;AAaAgP,QAAMe,SAAN,GAAkB,UAAUb,SAAV,EAAqBc,IAArB,EAA4B;AAC5C,QAAIV,YAAY,KAAKD,OAAL,IAAgB,KAAKA,OAAL,CAAcH,SAAd,CAAhC;AACA,QAAK,CAACI,SAAD,IAAc,CAACA,UAAUzQ,MAA9B,EAAuC;AACrC;AACD;AACD,QAAI+B,IAAI,CAAR;AACA,QAAIuO,WAAWG,UAAU1O,CAAV,CAAf;AACAoP,WAAOA,QAAQ,EAAf;AACA;AACA,QAAIJ,gBAAgB,KAAKD,WAAL,IAAoB,KAAKA,WAAL,CAAkBT,SAAlB,CAAxC;;AAEA,WAAQC,QAAR,EAAmB;AACjB,UAAIc,SAASL,iBAAiBA,cAAeT,QAAf,CAA9B;AACA,UAAKc,MAAL,EAAc;AACZ;AACA;AACA,aAAKJ,GAAL,CAAUX,SAAV,EAAqBC,QAArB;AACA;AACA,eAAOS,cAAeT,QAAf,CAAP;AACD;AACD;AACAA,eAASlK,KAAT,CAAgB,IAAhB,EAAsB+K,IAAtB;AACA;AACApP,WAAKqP,SAAS,CAAT,GAAa,CAAlB;AACAd,iBAAWG,UAAU1O,CAAV,CAAX;AACD;;AAED,WAAO,IAAP;AACD,GA5BD;;AA8BA,SAAOmO,SAAP;AAEC,CApGC,CAAF;;AAsGA;;;;;;AAMA;AACA;;AAEA,CAAE,UAAU7P,MAAV,EAAkBwP,OAAlB,EAA4B;AAC5B;;AAEA,MAAK,OAAOC,MAAP,IAAiB,UAAjB,IAA+BA,OAAOC,GAA3C,EAAiD;AAC/C;AACAD,WAAQ,mBAAR,EAA4B,EAA5B,EAA+B,YAAW;AACxC,aAAOD,SAAP;AACD,KAFD;AAGD,GALD,MAKO,IAAK,QAAOG,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBJ,SAAjB;AACD,GAHM,MAGA;AACL;AACAxP,WAAO+W,OAAP,GAAiBvH,SAAjB;AACD;AAEF,CAhBD,EAgBIxP,MAhBJ,EAgBY,SAASwP,OAAT,GAAmB;AAC/B;;AAEA;;AAEA;;AACA,WAASwH,YAAT,CAAuB7P,KAAvB,EAA+B;AAC7B,QAAI8P,MAAM/Q,WAAYiB,KAAZ,CAAV;AACA;AACA,QAAI+P,UAAU/P,MAAMkJ,OAAN,CAAc,GAAd,KAAsB,CAAC,CAAvB,IAA4B,CAAC8G,MAAOF,GAAP,CAA3C;AACA,WAAOC,WAAWD,GAAlB;AACD;;AAED,WAASG,IAAT,GAAgB,CAAE;;AAElB,MAAIxB,WAAW,OAAO1E,OAAP,IAAkB,WAAlB,GAAgCkG,IAAhC,GACb,UAAUpD,OAAV,EAAoB;AAClB9C,YAAQ2E,KAAR,CAAe7B,OAAf;AACD,GAHH;;AAKA;;AAEA,MAAIqD,eAAe,CACjB,aADiB,EAEjB,cAFiB,EAGjB,YAHiB,EAIjB,eAJiB,EAKjB,YALiB,EAMjB,aANiB,EAOjB,WAPiB,EAQjB,cARiB,EASjB,iBATiB,EAUjB,kBAViB,EAWjB,gBAXiB,EAYjB,mBAZiB,CAAnB;;AAeA,MAAIC,qBAAqBD,aAAa1X,MAAtC;;AAEA,WAAS4X,WAAT,GAAuB;AACrB,QAAIC,OAAO;AACTvX,aAAO,CADE;AAETE,cAAQ,CAFC;AAGTsX,kBAAY,CAHH;AAITC,mBAAa,CAJJ;AAKTzQ,kBAAY,CALH;AAMTpB,mBAAa;AANJ,KAAX;AAQA,SAAM,IAAInE,IAAE,CAAZ,EAAeA,IAAI4V,kBAAnB,EAAuC5V,GAAvC,EAA6C;AAC3C,UAAIiW,cAAcN,aAAa3V,CAAb,CAAlB;AACA8V,WAAMG,WAAN,IAAsB,CAAtB;AACD;AACD,WAAOH,IAAP;AACD;;AAED;;AAEA;;;;AAIA,WAASI,QAAT,CAAmBhG,IAAnB,EAA0B;AACxB,QAAIjQ,QAAQuR,iBAAkBtB,IAAlB,CAAZ;AACA,QAAK,CAACjQ,KAAN,EAAc;AACZiU,eAAU,oBAAoBjU,KAApB,GACR,6DADQ,GAER,+BAFF;AAGD;AACD,WAAOA,KAAP;AACD;;AAED;;AAEA,MAAIkW,UAAU,KAAd;;AAEA,MAAIC,cAAJ;;AAEA;;;;;AAKA,WAAS7V,KAAT,GAAiB;AACf;AACA,QAAK4V,OAAL,EAAe;AACb;AACD;AACDA,cAAU,IAAV;;AAEA;;AAEA;;;;AAIA,QAAIvW,MAAMC,SAASC,aAAT,CAAuB,KAAvB,CAAV;AACAF,QAAIK,KAAJ,CAAU1B,KAAV,GAAkB,OAAlB;AACAqB,QAAIK,KAAJ,CAAUoW,OAAV,GAAoB,iBAApB;AACAzW,QAAIK,KAAJ,CAAUqW,WAAV,GAAwB,OAAxB;AACA1W,QAAIK,KAAJ,CAAUsW,WAAV,GAAwB,iBAAxB;AACA3W,QAAIK,KAAJ,CAAUuW,SAAV,GAAsB,YAAtB;;AAEA,QAAIC,OAAO5W,SAAS4W,IAAT,IAAiB5W,SAAS6W,eAArC;AACAD,SAAKE,WAAL,CAAkB/W,GAAlB;AACA,QAAIK,QAAQiW,SAAUtW,GAAV,CAAZ;;AAEAyV,YAAQe,cAAR,GAAyBA,iBAAiBd,aAAcrV,MAAM1B,KAApB,KAA+B,GAAzE;AACAkY,SAAKG,WAAL,CAAkBhX,GAAlB;AAED;;AAED;;AAEA,WAASyV,OAAT,CAAkBnF,IAAlB,EAAyB;AACvB3P;;AAEA;AACA,QAAK,OAAO2P,IAAP,IAAe,QAApB,EAA+B;AAC7BA,aAAOrQ,SAASgX,aAAT,CAAwB3G,IAAxB,CAAP;AACD;;AAED;AACA,QAAK,CAACA,IAAD,IAAS,QAAOA,IAAP,yCAAOA,IAAP,MAAe,QAAxB,IAAoC,CAACA,KAAKiB,QAA/C,EAA0D;AACxD;AACD;;AAED,QAAIlR,QAAQiW,SAAUhG,IAAV,CAAZ;;AAEA;AACA,QAAKjQ,MAAMuB,OAAN,IAAiB,MAAtB,EAA+B;AAC7B,aAAOqU,aAAP;AACD;;AAED,QAAIC,OAAO,EAAX;AACAA,SAAKvX,KAAL,GAAa2R,KAAK4G,WAAlB;AACAhB,SAAKrX,MAAL,GAAcyR,KAAK6G,YAAnB;;AAEA,QAAIC,cAAclB,KAAKkB,WAAL,GAAmB/W,MAAMuW,SAAN,IAAmB,YAAxD;;AAEA;AACA,SAAM,IAAIxW,IAAE,CAAZ,EAAeA,IAAI4V,kBAAnB,EAAuC5V,GAAvC,EAA6C;AAC3C,UAAIiW,cAAcN,aAAa3V,CAAb,CAAlB;AACA,UAAIyF,QAAQxF,MAAOgW,WAAP,CAAZ;AACA,UAAIV,MAAM/Q,WAAYiB,KAAZ,CAAV;AACA;AACAqQ,WAAMG,WAAN,IAAsB,CAACR,MAAOF,GAAP,CAAD,GAAgBA,GAAhB,GAAsB,CAA5C;AACD;;AAED,QAAI0B,eAAenB,KAAKoB,WAAL,GAAmBpB,KAAKqB,YAA3C;AACA,QAAIC,gBAAgBtB,KAAKuB,UAAL,GAAkBvB,KAAKwB,aAA3C;AACA,QAAIC,cAAczB,KAAK0B,UAAL,GAAkB1B,KAAK2B,WAAzC;AACA,QAAIC,eAAe5B,KAAK6B,SAAL,GAAiB7B,KAAK8B,YAAzC;AACA,QAAIrB,cAAcT,KAAK+B,eAAL,GAAuB/B,KAAKgC,gBAA9C;AACA,QAAIC,eAAejC,KAAKkC,cAAL,GAAsBlC,KAAKmC,iBAA9C;;AAEA,QAAIC,uBAAuBlB,eAAeZ,cAA1C;;AAEA;AACA,QAAI+B,aAAa7C,aAAcrV,MAAM1B,KAApB,CAAjB;AACA,QAAK4Z,eAAe,KAApB,EAA4B;AAC1BrC,WAAKvX,KAAL,GAAa4Z;AACX;AACED,6BAAuB,CAAvB,GAA2BjB,eAAeV,WAFjC,CAAb;AAGD;;AAED,QAAI6B,cAAc9C,aAAcrV,MAAMxB,MAApB,CAAlB;AACA,QAAK2Z,gBAAgB,KAArB,EAA6B;AAC3BtC,WAAKrX,MAAL,GAAc2Z;AACZ;AACEF,6BAAuB,CAAvB,GAA2Bd,gBAAgBW,YAFjC,CAAd;AAGD;;AAEDjC,SAAKC,UAAL,GAAkBD,KAAKvX,KAAL,IAAe0Y,eAAeV,WAA9B,CAAlB;AACAT,SAAKE,WAAL,GAAmBF,KAAKrX,MAAL,IAAgB2Y,gBAAgBW,YAAhC,CAAnB;;AAEAjC,SAAKvQ,UAAL,GAAkBuQ,KAAKvX,KAAL,GAAagZ,WAA/B;AACAzB,SAAK3R,WAAL,GAAmB2R,KAAKrX,MAAL,GAAciZ,YAAjC;;AAEA,WAAO5B,IAAP;AACD;;AAED,SAAOT,OAAP;AAEC,CAvMD;;AAyMA;;;;;;AAMA;;AAEE,WAAU/W,MAAV,EAAkBwP,OAAlB,EAA4B;AAC5B;AACA;AACA;;AACA,MAAK,OAAOC,MAAP,IAAiB,UAAjB,IAA+BA,OAAOC,GAA3C,EAAiD;AAC/C;AACAD,WAAQ,4CAAR,EAAqDD,OAArD;AACD,GAHD,MAGO,IAAK,QAAOG,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBJ,SAAjB;AACD,GAHM,MAGA;AACL;AACAxP,WAAO+Z,eAAP,GAAyBvK,SAAzB;AACD;AAEF,CAfC,EAeCxP,MAfD,EAeS,SAASwP,OAAT,GAAmB;AAC5B;;AAEA,MAAIwK,gBAAkB,YAAW;AAC/B,QAAIC,YAAYja,OAAOka,OAAP,CAAenK,SAA/B;AACA;AACA,QAAKkK,UAAU7G,OAAf,EAAyB;AACvB,aAAO,SAAP;AACD;AACD;AACA,QAAK6G,UAAUF,eAAf,EAAiC;AAC/B,aAAO,iBAAP;AACD;AACD;AACA,QAAII,WAAW,CAAE,QAAF,EAAY,KAAZ,EAAmB,IAAnB,EAAyB,GAAzB,CAAf;;AAEA,SAAM,IAAIzY,IAAE,CAAZ,EAAeA,IAAIyY,SAASxa,MAA5B,EAAoC+B,GAApC,EAA0C;AACxC,UAAI0Y,SAASD,SAASzY,CAAT,CAAb;AACA,UAAIuT,SAASmF,SAAS,iBAAtB;AACA,UAAKH,UAAWhF,MAAX,CAAL,EAA2B;AACzB,eAAOA,MAAP;AACD;AACF;AACF,GApBmB,EAApB;;AAsBA,SAAO,SAAS8E,eAAT,CAA0BnI,IAA1B,EAAgC/N,QAAhC,EAA2C;AAChD,WAAO+N,KAAMoI,aAAN,EAAuBnW,QAAvB,CAAP;AACD,GAFD;AAID,CA5CC,CAAF;;AA8CA;;;;;AAKA;;AAEE,WAAU7D,MAAV,EAAkBwP,OAAlB,EAA4B;AAC5B;AACA,2BAF4B,CAEF;;AAE1B,MAAK,OAAOC,MAAP,IAAiB,UAAjB,IAA+BA,OAAOC,GAA3C,EAAiD;AAC/C;AACAD,WAAQ,sBAAR,EAA+B,CAC7B,4CAD6B,CAA/B,EAEG,UAAUsK,eAAV,EAA4B;AAC7B,aAAOvK,QAASxP,MAAT,EAAiB+Z,eAAjB,CAAP;AACD,KAJD;AAKD,GAPD,MAOO,IAAK,QAAOpK,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBJ,QACfxP,MADe,EAEfgR,QAAQ,2BAAR,CAFe,CAAjB;AAID,GANM,MAMA;AACL;AACAhR,WAAOqa,YAAP,GAAsB7K,QACpBxP,MADoB,EAEpBA,OAAO+Z,eAFa,CAAtB;AAID;AAEF,CAzBC,EAyBC/Z,MAzBD,EAyBS,SAASwP,OAAT,CAAkBxP,MAAlB,EAA0B+Z,eAA1B,EAA4C;;AAIvD,MAAIO,QAAQ,EAAZ;;AAEA;;AAEA;AACAA,QAAM/Z,MAAN,GAAe,UAAU4Q,CAAV,EAAaC,CAAb,EAAiB;AAC9B,SAAM,IAAIC,IAAV,IAAkBD,CAAlB,EAAsB;AACpBD,QAAGE,IAAH,IAAYD,EAAGC,IAAH,CAAZ;AACD;AACD,WAAOF,CAAP;AACD,GALD;;AAOA;;AAEAmJ,QAAMC,MAAN,GAAe,UAAUtD,GAAV,EAAe3V,GAAf,EAAqB;AAClC,WAAO,CAAI2V,MAAM3V,GAAR,GAAgBA,GAAlB,IAA0BA,GAAjC;AACD,GAFD;;AAIA;;AAEA;AACAgZ,QAAMhJ,SAAN,GAAkB,UAAUC,GAAV,EAAgB;AAChC,QAAIC,MAAM,EAAV;AACA,QAAKC,MAAMC,OAAN,CAAeH,GAAf,CAAL,EAA4B;AAC1B;AACAC,YAAMD,GAAN;AACD,KAHD,MAGO,IAAKA,OAAO,QAAOA,GAAP,yCAAOA,GAAP,MAAc,QAArB,IACV,OAAOA,IAAI5R,MAAX,IAAqB,QADhB,EAC2B;AAChC;AACA,WAAM,IAAI+B,IAAE,CAAZ,EAAeA,IAAI6P,IAAI5R,MAAvB,EAA+B+B,GAA/B,EAAqC;AACnC8P,YAAIlB,IAAJ,CAAUiB,IAAI7P,CAAJ,CAAV;AACD;AACF,KANM,MAMA;AACL;AACA8P,UAAIlB,IAAJ,CAAUiB,GAAV;AACD;AACD,WAAOC,GAAP;AACD,GAhBD;;AAkBA;;AAEA8I,QAAME,UAAN,GAAmB,UAAUhJ,GAAV,EAAeD,GAAf,EAAqB;AACtC,QAAIzQ,QAAQ0Q,IAAInB,OAAJ,CAAakB,GAAb,CAAZ;AACA,QAAKzQ,SAAS,CAAC,CAAf,EAAmB;AACjB0Q,UAAIZ,MAAJ,CAAY9P,KAAZ,EAAmB,CAAnB;AACD;AACF,GALD;;AAOA;;AAEAwZ,QAAMG,SAAN,GAAkB,UAAU7I,IAAV,EAAgB/N,QAAhB,EAA2B;AAC3C,WAAQ+N,QAAQrQ,SAAS4W,IAAzB,EAAgC;AAC9BvG,aAAOA,KAAK8I,UAAZ;AACA,UAAKX,gBAAiBnI,IAAjB,EAAuB/N,QAAvB,CAAL,EAAyC;AACvC,eAAO+N,IAAP;AACD;AACF;AACF,GAPD;;AASA;;AAEA;AACA0I,QAAMK,eAAN,GAAwB,UAAU/I,IAAV,EAAiB;AACvC,QAAK,OAAOA,IAAP,IAAe,QAApB,EAA+B;AAC7B,aAAOrQ,SAASgX,aAAT,CAAwB3G,IAAxB,CAAP;AACD;AACD,WAAOA,IAAP;AACD,GALD;;AAOA;;AAEA;AACA0I,QAAMvF,WAAN,GAAoB,UAAUC,KAAV,EAAkB;AACpC,QAAIC,SAAS,OAAOD,MAAM5N,IAA1B;AACA,QAAK,KAAM6N,MAAN,CAAL,EAAsB;AACpB,WAAMA,MAAN,EAAgBD,KAAhB;AACD;AACF,GALD;;AAOA;;AAEAsF,QAAMM,kBAAN,GAA2B,UAAUC,KAAV,EAAiBhX,QAAjB,EAA4B;AACrD;AACAgX,YAAQP,MAAMhJ,SAAN,CAAiBuJ,KAAjB,CAAR;AACA,QAAIC,UAAU,EAAd;;AAEAD,UAAMtI,OAAN,CAAe,UAAUX,IAAV,EAAiB;AAC9B;AACA,UAAK,EAAGA,gBAAgBmJ,WAAnB,CAAL,EAAwC;AACtC;AACD;AACD;AACA,UAAK,CAAClX,QAAN,EAAiB;AACfiX,gBAAQxK,IAAR,CAAcsB,IAAd;AACA;AACD;AACD;AACA;AACA,UAAKmI,gBAAiBnI,IAAjB,EAAuB/N,QAAvB,CAAL,EAAyC;AACvCiX,gBAAQxK,IAAR,CAAcsB,IAAd;AACD;AACD;AACA,UAAIoJ,aAAapJ,KAAKE,gBAAL,CAAuBjO,QAAvB,CAAjB;AACA;AACA,WAAM,IAAInC,IAAE,CAAZ,EAAeA,IAAIsZ,WAAWrb,MAA9B,EAAsC+B,GAAtC,EAA4C;AAC1CoZ,gBAAQxK,IAAR,CAAc0K,WAAWtZ,CAAX,CAAd;AACD;AACF,KArBD;;AAuBA,WAAOoZ,OAAP;AACD,GA7BD;;AA+BA;;AAEAR,QAAMW,cAAN,GAAuB,UAAUC,MAAV,EAAkB1E,UAAlB,EAA8B2E,SAA9B,EAA0C;AAC/D;AACA,QAAIlG,SAASiG,OAAOnL,SAAP,CAAkByG,UAAlB,CAAb;AACA,QAAI4E,cAAc5E,aAAa,SAA/B;;AAEA0E,WAAOnL,SAAP,CAAkByG,UAAlB,IAAiC,YAAW;AAC1C,UAAIrM,UAAU,KAAMiR,WAAN,CAAd;AACA,UAAKjR,OAAL,EAAe;AACbkR,qBAAclR,OAAd;AACD;AACD,UAAI2G,OAAOsF,SAAX;;AAEA,UAAIzC,QAAQ,IAAZ;AACA,WAAMyH,WAAN,IAAsBhR,WAAY,YAAW;AAC3C6K,eAAOlP,KAAP,CAAc4N,KAAd,EAAqB7C,IAArB;AACA,eAAO6C,MAAOyH,WAAP,CAAP;AACD,OAHqB,EAGnBD,aAAa,GAHM,CAAtB;AAID,KAZD;AAaD,GAlBD;;AAoBA;;AAEAb,QAAMgB,QAAN,GAAiB,UAAUxX,QAAV,EAAqB;AACpC,QAAIyX,aAAaha,SAASga,UAA1B;AACA,QAAKA,cAAc,UAAd,IAA4BA,cAAc,aAA/C,EAA+D;AAC7D;AACAnR,iBAAYtG,QAAZ;AACD,KAHD,MAGO;AACLvC,eAASsT,gBAAT,CAA2B,kBAA3B,EAA+C/Q,QAA/C;AACD;AACF,GARD;;AAUA;;AAEA;AACAwW,QAAMkB,QAAN,GAAiB,UAAUC,GAAV,EAAgB;AAC/B,WAAOA,IAAI3Z,OAAJ,CAAa,aAAb,EAA4B,UAAU4Z,KAAV,EAAiBC,EAAjB,EAAqBC,EAArB,EAA0B;AAC3D,aAAOD,KAAK,GAAL,GAAWC,EAAlB;AACD,KAFM,EAEJ7Z,WAFI,EAAP;AAGD,GAJD;;AAMA,MAAImP,UAAUlR,OAAOkR,OAArB;AACA;;;;;AAKAoJ,QAAMuB,QAAN,GAAiB,UAAUC,WAAV,EAAuBhG,SAAvB,EAAmC;AAClDwE,UAAMgB,QAAN,CAAgB,YAAW;AACzB,UAAIS,kBAAkBzB,MAAMkB,QAAN,CAAgB1F,SAAhB,CAAtB;AACA,UAAIkG,WAAW,UAAUD,eAAzB;AACA,UAAIE,gBAAgB1a,SAASuQ,gBAAT,CAA2B,MAAMkK,QAAN,GAAiB,GAA5C,CAApB;AACA,UAAIE,cAAc3a,SAASuQ,gBAAT,CAA2B,SAASiK,eAApC,CAAlB;AACA,UAAIlB,QAAQP,MAAMhJ,SAAN,CAAiB2K,aAAjB,EACTE,MADS,CACD7B,MAAMhJ,SAAN,CAAiB4K,WAAjB,CADC,CAAZ;AAEA,UAAIE,kBAAkBJ,WAAW,UAAjC;AACA,UAAI1M,SAAStP,OAAOsP,MAApB;;AAEAuL,YAAMtI,OAAN,CAAe,UAAUX,IAAV,EAAiB;AAC9B,YAAI5P,OAAO4P,KAAKyK,YAAL,CAAmBL,QAAnB,KACTpK,KAAKyK,YAAL,CAAmBD,eAAnB,CADF;AAEA,YAAI1c,OAAJ;AACA,YAAI;AACFA,oBAAUsC,QAAQsa,KAAKC,KAAL,CAAYva,IAAZ,CAAlB;AACD,SAFD,CAEE,OAAQ6T,KAAR,EAAgB;AAChB;AACA,cAAK3E,OAAL,EAAe;AACbA,oBAAQ2E,KAAR,CAAe,mBAAmBmG,QAAnB,GAA8B,MAA9B,GAAuCpK,KAAK4K,SAA5C,GACf,IADe,GACR3G,KADP;AAED;AACD;AACD;AACD;AACA,YAAIL,WAAW,IAAIsG,WAAJ,CAAiBlK,IAAjB,EAAuBlS,OAAvB,CAAf;AACA;AACA,YAAK4P,MAAL,EAAc;AACZA,iBAAOlP,IAAP,CAAawR,IAAb,EAAmBkE,SAAnB,EAA8BN,QAA9B;AACD;AACF,OApBD;AAsBD,KAhCD;AAiCD,GAlCD;;AAoCA;;AAEA,SAAO8E,KAAP;AAEC,CAtOC,CAAF;;AAwOA;;;;AAIE,WAAUta,MAAV,EAAkBwP,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,OAAOC,MAAP,IAAiB,UAAjB,IAA+BA,OAAOC,GAA3C,EAAiD;AAC/C;AACAD,WAAQ,eAAR,EAAwB,CACpB,uBADoB,EAEpB,mBAFoB,CAAxB,EAIED,OAJF;AAMD,GARD,MAQO,IAAK,QAAOG,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBJ,QACfwB,QAAQ,YAAR,CADe,EAEfA,QAAQ,UAAR,CAFe,CAAjB;AAID,GANM,MAMA;AACL;AACAhR,WAAOyc,QAAP,GAAkB,EAAlB;AACAzc,WAAOyc,QAAP,CAAgBC,IAAhB,GAAuBlN,QACrBxP,OAAO6P,SADc,EAErB7P,OAAO+W,OAFc,CAAvB;AAID;AAEF,CA1BC,EA0BC/W,MA1BD,EA0BS,SAASwP,OAAT,CAAkBK,SAAlB,EAA6BkH,OAA7B,EAAuC;AAClD;;AAEA;;AAEA,WAAS4F,UAAT,CAAqBpL,GAArB,EAA2B;AACzB,SAAM,IAAIF,IAAV,IAAkBE,GAAlB,EAAwB;AACtB,aAAO,KAAP;AACD;AACDF,WAAO,IAAP;AACA,WAAO,IAAP;AACD;;AAED;;;AAGA,MAAIuL,eAAerb,SAAS6W,eAAT,CAAyBzW,KAA5C;;AAEA,MAAIkb,qBAAqB,OAAOD,aAAaE,UAApB,IAAkC,QAAlC,GACvB,YADuB,GACR,kBADjB;AAEA,MAAIC,oBAAoB,OAAOH,aAAalS,SAApB,IAAiC,QAAjC,GACtB,WADsB,GACR,iBADhB;;AAGA,MAAIsS,qBAAqB;AACvBC,sBAAkB,qBADK;AAEvBH,gBAAY;AAFW,IAGtBD,kBAHsB,CAAzB;;AAKA;AACA,MAAIK,mBAAmB;AACrBxS,eAAWqS,iBADU;AAErBD,gBAAYD,kBAFS;AAGrBM,wBAAoBN,qBAAqB,UAHpB;AAIrBA,wBAAoBA,qBAAqB,UAJpB;AAKrBO,qBAAiBP,qBAAqB;AALjB,GAAvB;;AAQA;;AAEA,WAASH,IAAT,CAAepH,OAAf,EAAwB+H,MAAxB,EAAiC;AAC/B,QAAK,CAAC/H,OAAN,EAAgB;AACd;AACD;;AAED,SAAKA,OAAL,GAAeA,OAAf;AACA;AACA,SAAK+H,MAAL,GAAcA,MAAd;AACA,SAAK3a,QAAL,GAAgB;AACd6J,SAAG,CADW;AAEdC,SAAG;AAFW,KAAhB;;AAKA,SAAK8Q,OAAL;AACD;;AAED;AACA,MAAIxN,QAAQ4M,KAAK3M,SAAL,GAAiBqC,OAAOC,MAAP,CAAexC,UAAUE,SAAzB,CAA7B;AACAD,QAAMyN,WAAN,GAAoBb,IAApB;;AAEA5M,QAAMwN,OAAN,GAAgB,YAAW;AACzB;AACA,SAAKE,OAAL,GAAe;AACbC,qBAAe,EADF;AAEbC,aAAO,EAFM;AAGbC,aAAO;AAHM,KAAf;;AAMA,SAAKlb,GAAL,CAAS;AACPC,gBAAU;AADH,KAAT;AAGD,GAXD;;AAaA;AACAoN,QAAMiF,WAAN,GAAoB,UAAUC,KAAV,EAAkB;AACpC,QAAIC,SAAS,OAAOD,MAAM5N,IAA1B;AACA,QAAK,KAAM6N,MAAN,CAAL,EAAsB;AACpB,WAAMA,MAAN,EAAgBD,KAAhB;AACD;AACF,GALD;;AAOAlF,QAAMiH,OAAN,GAAgB,YAAW;AACzB,SAAKS,IAAL,GAAYT,QAAS,KAAKzB,OAAd,CAAZ;AACD,GAFD;;AAIA;;;;AAIAxF,QAAMrN,GAAN,GAAY,UAAUd,KAAV,EAAkB;AAC5B,QAAIic,YAAY,KAAKtI,OAAL,CAAa3T,KAA7B;;AAEA,SAAM,IAAI0P,IAAV,IAAkB1P,KAAlB,EAA0B;AACxB;AACA,UAAIkc,gBAAgBX,iBAAkB7L,IAAlB,KAA4BA,IAAhD;AACAuM,gBAAWC,aAAX,IAA6Blc,MAAO0P,IAAP,CAA7B;AACD;AACF,GARD;;AAUC;AACDvB,QAAMgO,WAAN,GAAoB,YAAW;AAC7B,QAAInc,QAAQuR,iBAAkB,KAAKoC,OAAvB,CAAZ;AACA,QAAIyI,eAAe,KAAKV,MAAL,CAAYW,UAAZ,CAAuB,YAAvB,CAAnB;AACA,QAAIC,cAAc,KAAKZ,MAAL,CAAYW,UAAZ,CAAuB,WAAvB,CAAlB;AACA,QAAIE,SAASvc,MAAOoc,eAAe,MAAf,GAAwB,OAA/B,CAAb;AACA,QAAII,SAASxc,MAAOsc,cAAc,KAAd,GAAsB,QAA7B,CAAb;AACA;AACA,QAAIG,aAAa,KAAKf,MAAL,CAAY7F,IAA7B;AACA,QAAIjL,IAAI2R,OAAO7N,OAAP,CAAe,GAAf,KAAuB,CAAC,CAAxB,GACJnK,WAAYgY,MAAZ,IAAuB,GAAzB,GAAiCE,WAAWne,KADtC,GAC8CO,SAAU0d,MAAV,EAAkB,EAAlB,CADtD;AAEA,QAAI1R,IAAI2R,OAAO9N,OAAP,CAAe,GAAf,KAAuB,CAAC,CAAxB,GACJnK,WAAYiY,MAAZ,IAAuB,GAAzB,GAAiCC,WAAWje,MADtC,GAC+CK,SAAU2d,MAAV,EAAkB,EAAlB,CADvD;;AAGA;AACA5R,QAAI4K,MAAO5K,CAAP,IAAa,CAAb,GAAiBA,CAArB;AACAC,QAAI2K,MAAO3K,CAAP,IAAa,CAAb,GAAiBA,CAArB;AACA;AACAD,SAAKwR,eAAeK,WAAWxF,WAA1B,GAAwCwF,WAAWvF,YAAxD;AACArM,SAAKyR,cAAcG,WAAWrF,UAAzB,GAAsCqF,WAAWpF,aAAtD;;AAEA,SAAKtW,QAAL,CAAc6J,CAAd,GAAkBA,CAAlB;AACA,SAAK7J,QAAL,CAAc8J,CAAd,GAAkBA,CAAlB;AACD,GAtBD;;AAwBA;AACAsD,QAAMuO,cAAN,GAAuB,YAAW;AAChC,QAAID,aAAa,KAAKf,MAAL,CAAY7F,IAA7B;AACA,QAAI7V,QAAQ,EAAZ;AACA,QAAIoc,eAAe,KAAKV,MAAL,CAAYW,UAAZ,CAAuB,YAAvB,CAAnB;AACA,QAAIC,cAAc,KAAKZ,MAAL,CAAYW,UAAZ,CAAuB,WAAvB,CAAlB;;AAEA;AACA,QAAIM,WAAWP,eAAe,aAAf,GAA+B,cAA9C;AACA,QAAIQ,YAAYR,eAAe,MAAf,GAAwB,OAAxC;AACA,QAAIS,iBAAiBT,eAAe,OAAf,GAAyB,MAA9C;;AAEA,QAAIxR,IAAI,KAAK7J,QAAL,CAAc6J,CAAd,GAAkB6R,WAAYE,QAAZ,CAA1B;AACA;AACA3c,UAAO4c,SAAP,IAAqB,KAAKE,SAAL,CAAgBlS,CAAhB,CAArB;AACA;AACA5K,UAAO6c,cAAP,IAA0B,EAA1B;;AAEA;AACA,QAAIE,WAAWT,cAAc,YAAd,GAA6B,eAA5C;AACA,QAAIU,YAAYV,cAAc,KAAd,GAAsB,QAAtC;AACA,QAAIW,iBAAiBX,cAAc,QAAd,GAAyB,KAA9C;;AAEA,QAAIzR,IAAI,KAAK9J,QAAL,CAAc8J,CAAd,GAAkB4R,WAAYM,QAAZ,CAA1B;AACA;AACA/c,UAAOgd,SAAP,IAAqB,KAAKE,SAAL,CAAgBrS,CAAhB,CAArB;AACA;AACA7K,UAAOid,cAAP,IAA0B,EAA1B;;AAEA,SAAKnc,GAAL,CAAUd,KAAV;AACA,SAAKkP,SAAL,CAAgB,QAAhB,EAA0B,CAAE,IAAF,CAA1B;AACD,GA9BD;;AAgCAf,QAAM2O,SAAN,GAAkB,UAAUlS,CAAV,EAAc;AAC9B,QAAIuS,eAAe,KAAKzB,MAAL,CAAYW,UAAZ,CAAuB,YAAvB,CAAnB;AACA,WAAO,KAAKX,MAAL,CAAY3d,OAAZ,CAAoBqf,eAApB,IAAuC,CAACD,YAAxC,GACDvS,IAAI,KAAK8Q,MAAL,CAAY7F,IAAZ,CAAiBvX,KAAvB,GAAiC,GAAnC,GAA2C,GADtC,GAC4CsM,IAAI,IADvD;AAED,GAJD;;AAMAuD,QAAM+O,SAAN,GAAkB,UAAUrS,CAAV,EAAc;AAC9B,QAAIsS,eAAe,KAAKzB,MAAL,CAAYW,UAAZ,CAAuB,YAAvB,CAAnB;AACA,WAAO,KAAKX,MAAL,CAAY3d,OAAZ,CAAoBqf,eAApB,IAAuCD,YAAvC,GACDtS,IAAI,KAAK6Q,MAAL,CAAY7F,IAAZ,CAAiBrX,MAAvB,GAAkC,GAApC,GAA4C,GADvC,GAC6CqM,IAAI,IADxD;AAED,GAJD;;AAMAsD,QAAMkP,aAAN,GAAsB,UAAUzS,CAAV,EAAaC,CAAb,EAAiB;AACrC,SAAKsR,WAAL;AACA;AACA,QAAImB,OAAO,KAAKvc,QAAL,CAAc6J,CAAzB;AACA,QAAI2S,OAAO,KAAKxc,QAAL,CAAc8J,CAAzB;;AAEA,QAAI2S,WAAW3e,SAAU+L,CAAV,EAAa,EAAb,CAAf;AACA,QAAI6S,WAAW5e,SAAUgM,CAAV,EAAa,EAAb,CAAf;AACA,QAAI6S,aAAaF,aAAa,KAAKzc,QAAL,CAAc6J,CAA3B,IAAgC6S,aAAa,KAAK1c,QAAL,CAAc8J,CAA5E;;AAEA;AACA,SAAK8S,WAAL,CAAkB/S,CAAlB,EAAqBC,CAArB;;AAEA;AACA,QAAK6S,cAAc,CAAC,KAAKE,eAAzB,EAA2C;AACzC,WAAKlB,cAAL;AACA;AACD;;AAED,QAAImB,SAASjT,IAAI0S,IAAjB;AACA,QAAIQ,SAASjT,IAAI0S,IAAjB;AACA,QAAIQ,kBAAkB,EAAtB;AACAA,oBAAgBhV,SAAhB,GAA4B,KAAKiV,YAAL,CAAmBH,MAAnB,EAA2BC,MAA3B,CAA5B;;AAEA,SAAK3C,UAAL,CAAgB;AACd8C,UAAIF,eADU;AAEdG,uBAAiB;AACfnV,mBAAW,KAAK2T;AADD,OAFH;AAKdyB,kBAAY;AALE,KAAhB;AAOD,GA/BD;;AAiCAhQ,QAAM6P,YAAN,GAAqB,UAAUpT,CAAV,EAAaC,CAAb,EAAiB;AACpC;AACA,QAAIuR,eAAe,KAAKV,MAAL,CAAYW,UAAZ,CAAuB,YAAvB,CAAnB;AACA,QAAIC,cAAc,KAAKZ,MAAL,CAAYW,UAAZ,CAAuB,WAAvB,CAAlB;AACAzR,QAAIwR,eAAexR,CAAf,GAAmB,CAACA,CAAxB;AACAC,QAAIyR,cAAczR,CAAd,GAAkB,CAACA,CAAvB;AACA,WAAO,iBAAiBD,CAAjB,GAAqB,MAArB,GAA8BC,CAA9B,GAAkC,QAAzC;AACD,GAPD;;AASA;AACAsD,QAAMiQ,IAAN,GAAa,UAAUxT,CAAV,EAAaC,CAAb,EAAiB;AAC5B,SAAK8S,WAAL,CAAkB/S,CAAlB,EAAqBC,CAArB;AACA,SAAK6R,cAAL;AACD,GAHD;;AAKAvO,QAAMkQ,MAAN,GAAelQ,MAAMkP,aAArB;;AAEAlP,QAAMwP,WAAN,GAAoB,UAAU/S,CAAV,EAAaC,CAAb,EAAiB;AACnC,SAAK9J,QAAL,CAAc6J,CAAd,GAAkB/L,SAAU+L,CAAV,EAAa,EAAb,CAAlB;AACA,SAAK7J,QAAL,CAAc8J,CAAd,GAAkBhM,SAAUgM,CAAV,EAAa,EAAb,CAAlB;AACD,GAHD;;AAKA;;AAEA;;;;;AAKA;AACAsD,QAAMmQ,cAAN,GAAuB,UAAUnP,IAAV,EAAiB;AACtC,SAAKrO,GAAL,CAAUqO,KAAK8O,EAAf;AACA,QAAK9O,KAAKgP,UAAV,EAAuB;AACrB,WAAKI,aAAL,CAAoBpP,KAAK8O,EAAzB;AACD;AACD,SAAM,IAAIvO,IAAV,IAAkBP,KAAK+O,eAAvB,EAAyC;AACvC/O,WAAK+O,eAAL,CAAsBxO,IAAtB,EAA6BtM,IAA7B,CAAmC,IAAnC;AACD;AACF,GARD;;AAUA;;;;;;;;AAQA+K,QAAMgN,UAAN,GAAmB,UAAUhM,IAAV,EAAiB;AAClC;AACA,QAAK,CAAC5K,WAAY,KAAKmX,MAAL,CAAY3d,OAAZ,CAAoByd,kBAAhC,CAAN,EAA6D;AAC3D,WAAK8C,cAAL,CAAqBnP,IAArB;AACA;AACD;;AAED,QAAIqP,cAAc,KAAK3C,OAAvB;AACA;AACA,SAAM,IAAInM,IAAV,IAAkBP,KAAK+O,eAAvB,EAAyC;AACvCM,kBAAYxC,KAAZ,CAAmBtM,IAAnB,IAA4BP,KAAK+O,eAAL,CAAsBxO,IAAtB,CAA5B;AACD;AACD;AACA,SAAMA,IAAN,IAAcP,KAAK8O,EAAnB,EAAwB;AACtBO,kBAAY1C,aAAZ,CAA2BpM,IAA3B,IAAoC,IAApC;AACA;AACA,UAAKP,KAAKgP,UAAV,EAAuB;AACrBK,oBAAYzC,KAAZ,CAAmBrM,IAAnB,IAA4B,IAA5B;AACD;AACF;;AAED;AACA,QAAKP,KAAKsP,IAAV,EAAiB;AACf,WAAK3d,GAAL,CAAUqO,KAAKsP,IAAf;AACA;AACA,UAAIC,IAAI,KAAK/K,OAAL,CAAamD,YAArB;AACA;AACA4H,UAAI,IAAJ;AACD;AACD;AACA,SAAKC,gBAAL,CAAuBxP,KAAK8O,EAA5B;AACA;AACA,SAAKnd,GAAL,CAAUqO,KAAK8O,EAAf;;AAEA,SAAKL,eAAL,GAAuB,IAAvB;AAED,GApCD;;AAsCA;AACA;AACA,WAASgB,WAAT,CAAsB9E,GAAtB,EAA4B;AAC1B,WAAOA,IAAI3Z,OAAJ,CAAa,UAAb,EAAyB,UAAU6Z,EAAV,EAAe;AAC7C,aAAO,MAAMA,GAAG5Z,WAAH,EAAb;AACD,KAFM,CAAP;AAGD;;AAED,MAAIye,kBAAkB,aAAaD,YAAaxD,iBAAb,CAAnC;;AAEAjN,QAAMwQ,gBAAN,GAAyB,YAAS,WAAa;AAC7C;AACA;AACA,QAAK,KAAKf,eAAV,EAA4B;AAC1B;AACD;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAIlY,WAAW,KAAKgW,MAAL,CAAY3d,OAAZ,CAAoByd,kBAAnC;AACA9V,eAAW,OAAOA,QAAP,IAAmB,QAAnB,GAA8BA,WAAW,IAAzC,GAAgDA,QAA3D;AACA;AACA,SAAK5E,GAAL,CAAS;AACPoa,0BAAoB2D,eADb;AAEPrD,0BAAoB9V,QAFb;AAGP+V,uBAAiB,KAAKqD,YAAL,IAAqB;AAH/B,KAAT;AAKA;AACA,SAAKnL,OAAL,CAAaT,gBAAb,CAA+BmI,kBAA/B,EAAmD,IAAnD,EAAyD,KAAzD;AACD,GA3BD;;AA6BA;;AAEAlN,QAAM4Q,qBAAN,GAA8B,UAAU1L,KAAV,EAAkB;AAC9C,SAAK2L,eAAL,CAAsB3L,KAAtB;AACD,GAFD;;AAIAlF,QAAM8Q,gBAAN,GAAyB,UAAU5L,KAAV,EAAkB;AACzC,SAAK2L,eAAL,CAAsB3L,KAAtB;AACD,GAFD;;AAIA;AACA,MAAI6L,yBAAyB;AAC3B,yBAAqB;AADM,GAA7B;;AAIA/Q,QAAM6Q,eAAN,GAAwB,UAAU3L,KAAV,EAAkB;AACxC;AACA,QAAKA,MAAMtN,MAAN,KAAiB,KAAK4N,OAA3B,EAAqC;AACnC;AACD;AACD,QAAI6K,cAAc,KAAK3C,OAAvB;AACA;AACA,QAAIsD,eAAeD,uBAAwB7L,MAAM8L,YAA9B,KAAgD9L,MAAM8L,YAAzE;;AAEA;AACA,WAAOX,YAAY1C,aAAZ,CAA2BqD,YAA3B,CAAP;AACA;AACA,QAAKnE,WAAYwD,YAAY1C,aAAxB,CAAL,EAA+C;AAC7C;AACA,WAAKsD,iBAAL;AACD;AACD;AACA,QAAKD,gBAAgBX,YAAYzC,KAAjC,EAAyC;AACvC;AACA,WAAKpI,OAAL,CAAa3T,KAAb,CAAoBqT,MAAM8L,YAA1B,IAA2C,EAA3C;AACA,aAAOX,YAAYzC,KAAZ,CAAmBoD,YAAnB,CAAP;AACD;AACD;AACA,QAAKA,gBAAgBX,YAAYxC,KAAjC,EAAyC;AACvC,UAAIkC,kBAAkBM,YAAYxC,KAAZ,CAAmBmD,YAAnB,CAAtB;AACAjB,sBAAgB9a,IAAhB,CAAsB,IAAtB;AACA,aAAOob,YAAYxC,KAAZ,CAAmBmD,YAAnB,CAAP;AACD;;AAED,SAAKjQ,SAAL,CAAgB,eAAhB,EAAiC,CAAE,IAAF,CAAjC;AACD,GA9BD;;AAgCAf,QAAMiR,iBAAN,GAA0B,YAAW;AACnC,SAAKC,sBAAL;AACA,SAAK1L,OAAL,CAAaD,mBAAb,CAAkC2H,kBAAlC,EAAsD,IAAtD,EAA4D,KAA5D;AACA,SAAKuC,eAAL,GAAuB,KAAvB;AACD,GAJD;;AAMA;;;;AAIAzP,QAAMoQ,aAAN,GAAsB,UAAUve,KAAV,EAAkB;AACtC;AACA,QAAIsf,aAAa,EAAjB;AACA,SAAM,IAAI5P,IAAV,IAAkB1P,KAAlB,EAA0B;AACxBsf,iBAAY5P,IAAZ,IAAqB,EAArB;AACD;AACD,SAAK5O,GAAL,CAAUwe,UAAV;AACD,GAPD;;AASA,MAAIC,uBAAuB;AACzBrE,wBAAoB,EADK;AAEzBM,wBAAoB,EAFK;AAGzBC,qBAAiB;AAHQ,GAA3B;;AAMAtN,QAAMkR,sBAAN,GAA+B,YAAW;AACxC;AACA,SAAKve,GAAL,CAAUye,oBAAV;AACD,GAHD;;AAKA;;AAEApR,QAAMqR,OAAN,GAAgB,UAAUC,KAAV,EAAkB;AAChCA,YAAQjK,MAAOiK,KAAP,IAAiB,CAAjB,GAAqBA,KAA7B;AACA,SAAKX,YAAL,GAAoBW,QAAQ,IAA5B;AACD,GAHD;;AAKA;;AAEA;AACAtR,QAAMuR,UAAN,GAAmB,YAAW;AAC5B,SAAK/L,OAAL,CAAaoF,UAAb,CAAwBpC,WAAxB,CAAqC,KAAKhD,OAA1C;AACA;AACA,SAAK7S,GAAL,CAAS,EAAES,SAAS,EAAX,EAAT;AACA,SAAK2N,SAAL,CAAgB,QAAhB,EAA0B,CAAE,IAAF,CAA1B;AACD,GALD;;AAOAf,QAAMnL,MAAN,GAAe,YAAW;AACxB;AACA,QAAK,CAACkY,kBAAD,IAAuB,CAAC3W,WAAY,KAAKmX,MAAL,CAAY3d,OAAZ,CAAoByd,kBAAhC,CAA7B,EAAoF;AAClF,WAAKkE,UAAL;AACA;AACD;;AAED;AACA,SAAK9Q,IAAL,CAAW,eAAX,EAA4B,YAAW;AACrC,WAAK8Q,UAAL;AACD,KAFD;AAGA,SAAKC,IAAL;AACD,GAZD;;AAcAxR,QAAMyR,MAAN,GAAe,YAAW;AACxB,WAAO,KAAKC,QAAZ;AACA;AACA,SAAK/e,GAAL,CAAS,EAAES,SAAS,EAAX,EAAT;;AAEA,QAAIxD,UAAU,KAAK2d,MAAL,CAAY3d,OAA1B;;AAEA,QAAImgB,kBAAkB,EAAtB;AACA,QAAI4B,wBAAwB,KAAKC,kCAAL,CAAwC,cAAxC,CAA5B;AACA7B,oBAAiB4B,qBAAjB,IAA2C,KAAKE,qBAAhD;;AAEA,SAAK7E,UAAL,CAAgB;AACdsD,YAAM1gB,QAAQkiB,WADA;AAEdhC,UAAIlgB,QAAQmiB,YAFE;AAGd/B,kBAAY,IAHE;AAIdD,uBAAiBA;AAJH,KAAhB;AAMD,GAjBD;;AAmBA/P,QAAM6R,qBAAN,GAA8B,YAAW;AACvC;AACA;AACA,QAAK,CAAC,KAAKH,QAAX,EAAsB;AACpB,WAAK3Q,SAAL,CAAe,QAAf;AACD;AACF,GAND;;AAQA;;;;;AAKAf,QAAM4R,kCAAN,GAA2C,UAAUI,aAAV,EAA0B;AACnE,QAAIC,cAAc,KAAK1E,MAAL,CAAY3d,OAAZ,CAAqBoiB,aAArB,CAAlB;AACA;AACA,QAAKC,YAAYC,OAAjB,EAA2B;AACzB,aAAO,SAAP;AACD;AACD;AACA,SAAM,IAAI3Q,IAAV,IAAkB0Q,WAAlB,EAAgC;AAC9B,aAAO1Q,IAAP;AACD;AACF,GAVD;;AAYAvB,QAAMwR,IAAN,GAAa,YAAW;AACtB;AACA,SAAKE,QAAL,GAAgB,IAAhB;AACA;AACA,SAAK/e,GAAL,CAAS,EAAES,SAAS,EAAX,EAAT;;AAEA,QAAIxD,UAAU,KAAK2d,MAAL,CAAY3d,OAA1B;;AAEA,QAAImgB,kBAAkB,EAAtB;AACA,QAAI4B,wBAAwB,KAAKC,kCAAL,CAAwC,aAAxC,CAA5B;AACA7B,oBAAiB4B,qBAAjB,IAA2C,KAAKQ,mBAAhD;;AAEA,SAAKnF,UAAL,CAAgB;AACdsD,YAAM1gB,QAAQmiB,YADA;AAEdjC,UAAIlgB,QAAQkiB,WAFE;AAGd;AACA9B,kBAAY,IAJE;AAKdD,uBAAiBA;AALH,KAAhB;AAOD,GAnBD;;AAqBA/P,QAAMmS,mBAAN,GAA4B,YAAW;AACrC;AACA;AACA,QAAK,KAAKT,QAAV,EAAqB;AACnB,WAAK/e,GAAL,CAAS,EAAES,SAAS,MAAX,EAAT;AACA,WAAK2N,SAAL,CAAe,MAAf;AACD;AACF,GAPD;;AASAf,QAAMoS,OAAN,GAAgB,YAAW;AACzB,SAAKzf,GAAL,CAAS;AACPC,gBAAU,EADH;AAEPsE,YAAM,EAFC;AAGP2E,aAAO,EAHA;AAIPzE,WAAK,EAJE;AAKP0E,cAAQ,EALD;AAMPkR,kBAAY,EANL;AAOPpS,iBAAW;AAPJ,KAAT;AASD,GAVD;;AAYA,SAAOgS,IAAP;AAEC,CApiBC,CAAF;;AAsiBA;;;;;;AAME,WAAU1c,MAAV,EAAkBwP,OAAlB,EAA4B;AAC5B;AACA;AACA,4BAH4B,CAGD;;AAC3B,MAAK,OAAOC,MAAP,IAAiB,UAAjB,IAA+BA,OAAOC,GAA3C,EAAiD;AAC/C;AACAD,WAAQ,mBAAR,EAA4B,CACxB,uBADwB,EAExB,mBAFwB,EAGxB,sBAHwB,EAIxB,QAJwB,CAA5B,EAME,UAAUI,SAAV,EAAqBkH,OAArB,EAA8BuD,KAA9B,EAAqCoC,IAArC,EAA4C;AAC1C,aAAOlN,QAASxP,MAAT,EAAiB6P,SAAjB,EAA4BkH,OAA5B,EAAqCuD,KAArC,EAA4CoC,IAA5C,CAAP;AACD,KARH;AAUD,GAZD,MAYO,IAAK,QAAO/M,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBJ,QACfxP,MADe,EAEfgR,QAAQ,YAAR,CAFe,EAGfA,QAAQ,UAAR,CAHe,EAIfA,QAAQ,gBAAR,CAJe,EAKfA,QAAQ,QAAR,CALe,CAAjB;AAOD,GATM,MASA;AACL;AACAhR,WAAOyc,QAAP,GAAkBjN,QAChBxP,MADgB,EAEhBA,OAAO6P,SAFS,EAGhB7P,OAAO+W,OAHS,EAIhB/W,OAAOqa,YAJS,EAKhBra,OAAOyc,QAAP,CAAgBC,IALA,CAAlB;AAOD;AAEF,CApCC,EAoCC1c,MApCD,EAoCS,SAASwP,OAAT,CAAkBxP,MAAlB,EAA0B6P,SAA1B,EAAqCkH,OAArC,EAA8CuD,KAA9C,EAAqDoC,IAArD,EAA4D;AACvE;;AAEA;;AAEA,MAAIxL,UAAUlR,OAAOkR,OAArB;AACA,MAAI5B,SAAStP,OAAOsP,MAApB;AACA,MAAI8H,OAAO,SAAPA,IAAO,GAAW,CAAE,CAAxB;;AAEA;;AAEA;AACA,MAAI+K,OAAO,CAAX;AACA;AACA,MAAIC,YAAY,EAAhB;;AAGA;;;;;AAKA,WAAS3F,QAAT,CAAmBnH,OAAnB,EAA4B5V,OAA5B,EAAsC;AACpC,QAAI2iB,eAAe/H,MAAMK,eAAN,CAAuBrF,OAAvB,CAAnB;AACA,QAAK,CAAC+M,YAAN,EAAqB;AACnB,UAAKnR,OAAL,EAAe;AACbA,gBAAQ2E,KAAR,CAAe,qBAAqB,KAAK0H,WAAL,CAAiBzH,SAAtC,GACb,IADa,IACJuM,gBAAgB/M,OADZ,CAAf;AAED;AACD;AACD;AACD,SAAKA,OAAL,GAAe+M,YAAf;AACA;AACA,QAAK/S,MAAL,EAAc;AACZ,WAAKgT,QAAL,GAAgBhT,OAAQ,KAAKgG,OAAb,CAAhB;AACD;;AAED;AACA,SAAK5V,OAAL,GAAe4a,MAAM/Z,MAAN,CAAc,EAAd,EAAkB,KAAKgd,WAAL,CAAiB/hB,QAAnC,CAAf;AACA,SAAKwa,MAAL,CAAatW,OAAb;;AAEA;AACA,QAAI6iB,KAAK,EAAEJ,IAAX;AACA,SAAK7M,OAAL,CAAakN,YAAb,GAA4BD,EAA5B,CArBoC,CAqBJ;AAChCH,cAAWG,EAAX,IAAkB,IAAlB,CAtBoC,CAsBZ;;AAExB;AACA,SAAKjF,OAAL;;AAEA,QAAImF,eAAe,KAAKzE,UAAL,CAAgB,YAAhB,CAAnB;AACA,QAAKyE,YAAL,EAAoB;AAClB,WAAKpF,MAAL;AACD;AACF;;AAED;AACAZ,WAAS3G,SAAT,GAAqB,UAArB;AACA2G,WAASC,IAAT,GAAgBA,IAAhB;;AAEA;AACAD,WAASjhB,QAAT,GAAoB;AAClBknB,oBAAgB;AACdhgB,gBAAU;AADI,KADE;AAIlBigB,gBAAY,IAJM;AAKlBC,gBAAY,IALM;AAMlBC,eAAW,IANO;AAOlBC,YAAQ,IAPU;AAQlBC,qBAAiB,IARC;AASlB;AACA5F,wBAAoB,MAVF;AAWlByE,iBAAa;AACXI,eAAS,CADE;AAEXtX,iBAAW;AAFA,KAXK;AAelBmX,kBAAc;AACZG,eAAS,CADG;AAEZtX,iBAAW;AAFC;AAfI,GAApB;;AAqBA,MAAIoF,QAAQ2M,SAAS1M,SAArB;AACA;AACAuK,QAAM/Z,MAAN,CAAcuP,KAAd,EAAqBD,UAAUE,SAA/B;;AAEA;;;;AAIAD,QAAMkG,MAAN,GAAe,UAAUC,IAAV,EAAiB;AAC9BqE,UAAM/Z,MAAN,CAAc,KAAKb,OAAnB,EAA4BuW,IAA5B;AACD,GAFD;;AAIA;;;AAGAnG,QAAMkO,UAAN,GAAmB,UAAUhI,MAAV,EAAmB;AACpC,QAAIgN,YAAY,KAAKzF,WAAL,CAAiB0F,aAAjB,CAAgCjN,MAAhC,CAAhB;AACA,WAAOgN,aAAa,KAAKtjB,OAAL,CAAcsjB,SAAd,MAA8BphB,SAA3C,GACL,KAAKlC,OAAL,CAAcsjB,SAAd,CADK,GACuB,KAAKtjB,OAAL,CAAcsW,MAAd,CAD9B;AAED,GAJD;;AAMAyG,WAASwG,aAAT,GAAyB;AACvB;AACAN,gBAAY,cAFW;AAGvBO,gBAAY,cAHW;AAIvBC,mBAAe,iBAJQ;AAKvBP,gBAAY,cALW;AAMvBC,eAAW,aANY;AAOvBC,YAAQ,eAPe;AAQvBC,qBAAiB;AARM,GAAzB;;AAWAjT,QAAMwN,OAAN,GAAgB,YAAW;AACzB;AACA,SAAK8F,WAAL;AACA;AACA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKC,KAAL,CAAY,KAAK5jB,OAAL,CAAa4jB,KAAzB;AACA;AACAhJ,UAAM/Z,MAAN,CAAc,KAAK+U,OAAL,CAAa3T,KAA3B,EAAkC,KAAKjC,OAAL,CAAagjB,cAA/C;;AAEA;AACA,QAAIa,gBAAgB,KAAKvF,UAAL,CAAgB,QAAhB,CAApB;AACA,QAAKuF,aAAL,EAAqB;AACnB,WAAKC,UAAL;AACD;AACF,GAdD;;AAgBA;AACA1T,QAAMsT,WAAN,GAAoB,YAAW;AAC7B;AACA,SAAKK,KAAL,GAAa,KAAKC,QAAL,CAAe,KAAKpO,OAAL,CAAa7U,QAA5B,CAAb;AACD,GAHD;;AAMA;;;;;AAKAqP,QAAM4T,QAAN,GAAiB,UAAU7I,KAAV,EAAkB;;AAEjC,QAAI8I,YAAY,KAAKC,uBAAL,CAA8B/I,KAA9B,CAAhB;AACA,QAAI6B,OAAO,KAAKa,WAAL,CAAiBb,IAA5B;;AAEA;AACA,QAAI+G,QAAQ,EAAZ;AACA,SAAM,IAAI/hB,IAAE,CAAZ,EAAeA,IAAIiiB,UAAUhkB,MAA7B,EAAqC+B,GAArC,EAA2C;AACzC,UAAIkQ,OAAO+R,UAAUjiB,CAAV,CAAX;AACA,UAAImiB,OAAO,IAAInH,IAAJ,CAAU9K,IAAV,EAAgB,IAAhB,CAAX;AACA6R,YAAMnT,IAAN,CAAYuT,IAAZ;AACD;;AAED,WAAOJ,KAAP;AACD,GAdD;;AAgBA;;;;;AAKA3T,QAAM8T,uBAAN,GAAgC,UAAU/I,KAAV,EAAkB;AAChD,WAAOP,MAAMM,kBAAN,CAA0BC,KAA1B,EAAiC,KAAKnb,OAAL,CAAaokB,YAA9C,CAAP;AACD,GAFD;;AAIA;;;;AAIAhU,QAAMiU,eAAN,GAAwB,YAAW;AACjC,WAAO,KAAKN,KAAL,CAAWzd,GAAX,CAAgB,UAAU6d,IAAV,EAAiB;AACtC,aAAOA,KAAKvO,OAAZ;AACD,KAFM,CAAP;AAGD,GAJD;;AAMA;;AAEA;;;AAGAxF,QAAMuN,MAAN,GAAe,YAAW;AACxB,SAAK2G,YAAL;AACA,SAAKC,aAAL;;AAEA;AACA,QAAId,gBAAgB,KAAKnF,UAAL,CAAgB,eAAhB,CAApB;AACA,QAAIkG,YAAYf,kBAAkBvhB,SAAlB,GACduhB,aADc,GACE,CAAC,KAAKgB,eADxB;AAEA,SAAKC,WAAL,CAAkB,KAAKX,KAAvB,EAA8BS,SAA9B;;AAEA;AACA,SAAKC,eAAL,GAAuB,IAAvB;AACD,GAZD;;AAcA;AACArU,QAAM8G,KAAN,GAAc9G,MAAMuN,MAApB;;AAEA;;;AAGAvN,QAAMkU,YAAN,GAAqB,YAAW;AAC9B,SAAKjN,OAAL;AACD,GAFD;;AAKAjH,QAAMiH,OAAN,GAAgB,YAAW;AACzB,SAAKS,IAAL,GAAYT,QAAS,KAAKzB,OAAd,CAAZ;AACD,GAFD;;AAIA;;;;;;;;;;AAUAxF,QAAMuU,eAAN,GAAwB,UAAU1M,WAAV,EAAuBH,IAAvB,EAA8B;AACpD,QAAIxB,SAAS,KAAKtW,OAAL,CAAciY,WAAd,CAAb;AACA,QAAI/F,IAAJ;AACA,QAAK,CAACoE,MAAN,EAAe;AACb;AACA,WAAM2B,WAAN,IAAsB,CAAtB;AACD,KAHD,MAGO;AACL;AACA,UAAK,OAAO3B,MAAP,IAAiB,QAAtB,EAAiC;AAC/BpE,eAAO,KAAK0D,OAAL,CAAaiD,aAAb,CAA4BvC,MAA5B,CAAP;AACD,OAFD,MAEO,IAAKA,kBAAkB+E,WAAvB,EAAqC;AAC1CnJ,eAAOoE,MAAP;AACD;AACD;AACA,WAAM2B,WAAN,IAAsB/F,OAAOmF,QAASnF,IAAT,EAAiB4F,IAAjB,CAAP,GAAiCxB,MAAvD;AACD;AACF,GAhBD;;AAkBA;;;;AAIAlG,QAAMsU,WAAN,GAAoB,UAAUX,KAAV,EAAiBS,SAAjB,EAA6B;AAC/CT,YAAQ,KAAKa,kBAAL,CAAyBb,KAAzB,CAAR;;AAEA,SAAKc,YAAL,CAAmBd,KAAnB,EAA0BS,SAA1B;;AAEA,SAAKM,WAAL;AACD,GAND;;AAQA;;;;;;AAMA1U,QAAMwU,kBAAN,GAA2B,UAAUb,KAAV,EAAkB;AAC3C,WAAOA,MAAMnV,MAAN,CAAc,UAAUuV,IAAV,EAAiB;AACpC,aAAO,CAACA,KAAKY,SAAb;AACD,KAFM,CAAP;AAGD,GAJD;;AAMA;;;;;AAKA3U,QAAMyU,YAAN,GAAqB,UAAUd,KAAV,EAAiBS,SAAjB,EAA6B;AAChD,SAAKQ,oBAAL,CAA2B,QAA3B,EAAqCjB,KAArC;;AAEA,QAAK,CAACA,KAAD,IAAU,CAACA,MAAM9jB,MAAtB,EAA+B;AAC7B;AACA;AACD;;AAED,QAAIglB,QAAQ,EAAZ;;AAEAlB,UAAMlR,OAAN,CAAe,UAAUsR,IAAV,EAAiB;AAC9B;AACA,UAAInhB,WAAW,KAAKkiB,sBAAL,CAA6Bf,IAA7B,CAAf;AACA;AACAnhB,eAASmhB,IAAT,GAAgBA,IAAhB;AACAnhB,eAASwhB,SAAT,GAAqBA,aAAaL,KAAKgB,eAAvC;AACAF,YAAMrU,IAAN,CAAY5N,QAAZ;AACD,KAPD,EAOG,IAPH;;AASA,SAAKoiB,mBAAL,CAA0BH,KAA1B;AACD,GApBD;;AAsBA;;;;;AAKA7U,QAAM8U,sBAAN,GAA+B,YAAU,UAAa;AACpD,WAAO;AACLrY,SAAG,CADE;AAELC,SAAG;AAFE,KAAP;AAID,GALD;;AAOA;;;;;;AAMAsD,QAAMgV,mBAAN,GAA4B,UAAUH,KAAV,EAAkB;AAC5C,SAAKI,aAAL;AACAJ,UAAMpS,OAAN,CAAe,UAAUhB,GAAV,EAAe7P,CAAf,EAAmB;AAChC,WAAKsjB,aAAL,CAAoBzT,IAAIsS,IAAxB,EAA8BtS,IAAIhF,CAAlC,EAAqCgF,IAAI/E,CAAzC,EAA4C+E,IAAI2S,SAAhD,EAA2DxiB,CAA3D;AACD,KAFD,EAEG,IAFH;AAGD,GALD;;AAOA;AACAoO,QAAMiV,aAAN,GAAsB,YAAW;AAC/B,QAAI5D,UAAU,KAAKzhB,OAAL,CAAayhB,OAA3B;AACA,QAAKA,YAAY,IAAZ,IAAoBA,YAAYvf,SAArC,EAAiD;AAC/C,WAAKuf,OAAL,GAAe,CAAf;AACA;AACD;AACD,SAAKA,OAAL,GAAe8D,gBAAiB9D,OAAjB,CAAf;AACA,WAAO,KAAKA,OAAZ;AACD,GARD;;AAUA;;;;;;;AAOArR,QAAMkV,aAAN,GAAsB,UAAUnB,IAAV,EAAgBtX,CAAhB,EAAmBC,CAAnB,EAAsB0X,SAAtB,EAAiCxiB,CAAjC,EAAqC;AACzD,QAAKwiB,SAAL,EAAiB;AACf;AACAL,WAAK9D,IAAL,CAAWxT,CAAX,EAAcC,CAAd;AACD,KAHD,MAGO;AACLqX,WAAK1C,OAAL,CAAczf,IAAI,KAAKyf,OAAvB;AACA0C,WAAK7D,MAAL,CAAazT,CAAb,EAAgBC,CAAhB;AACD;AACF,GARD;;AAUA;;;;AAIAsD,QAAM0U,WAAN,GAAoB,YAAW;AAC7B,SAAKzB,eAAL;AACD,GAFD;;AAIAjT,QAAMiT,eAAN,GAAwB,YAAW;AACjC,QAAImC,sBAAsB,KAAKlH,UAAL,CAAgB,iBAAhB,CAA1B;AACA,QAAK,CAACkH,mBAAN,EAA4B;AAC1B;AACD;AACD,QAAI1N,OAAO,KAAK2N,iBAAL,EAAX;AACA,QAAK3N,IAAL,EAAY;AACV,WAAK4N,oBAAL,CAA2B5N,KAAKvX,KAAhC,EAAuC,IAAvC;AACA,WAAKmlB,oBAAL,CAA2B5N,KAAKrX,MAAhC,EAAwC,KAAxC;AACD;AACF,GAVD;;AAYA;;;;;;AAMA2P,QAAMqV,iBAAN,GAA0B/N,IAA1B;;AAEA;;;;AAIAtH,QAAMsV,oBAAN,GAA6B,UAAUC,OAAV,EAAmBC,OAAnB,EAA6B;AACxD,QAAKD,YAAYzjB,SAAjB,EAA6B;AAC3B;AACD;;AAED,QAAI2jB,WAAW,KAAK/N,IAApB;AACA;AACA,QAAK+N,SAAS7M,WAAd,EAA4B;AAC1B2M,iBAAWC,UAAUC,SAAS3M,WAAT,GAAuB2M,SAAS1M,YAAhC,GACnB0M,SAAShM,eADU,GACQgM,SAAS/L,gBAD3B,GAET+L,SAASvM,aAAT,GAAyBuM,SAASxM,UAAlC,GACAwM,SAAS7L,cADT,GAC0B6L,SAAS5L,iBAHrC;AAID;;AAED0L,cAAU3kB,KAAKoF,GAAL,CAAUuf,OAAV,EAAmB,CAAnB,CAAV;AACA,SAAK/P,OAAL,CAAa3T,KAAb,CAAoB2jB,UAAU,OAAV,GAAoB,QAAxC,IAAqDD,UAAU,IAA/D;AACD,GAhBD;;AAkBA;;;;;AAKAvV,QAAM4U,oBAAN,GAA6B,UAAU1U,SAAV,EAAqByT,KAArB,EAA6B;AACxD,QAAI9P,QAAQ,IAAZ;AACA,aAAS6R,UAAT,GAAsB;AACpB7R,YAAM8R,aAAN,CAAqBzV,YAAY,UAAjC,EAA6C,IAA7C,EAAmD,CAAEyT,KAAF,CAAnD;AACD;;AAED,QAAIxf,QAAQwf,MAAM9jB,MAAlB;AACA,QAAK,CAAC8jB,KAAD,IAAU,CAACxf,KAAhB,EAAwB;AACtBuhB;AACA;AACD;;AAED,QAAIE,YAAY,CAAhB;AACA,aAASC,IAAT,GAAgB;AACdD;AACA,UAAKA,aAAazhB,KAAlB,EAA0B;AACxBuhB;AACD;AACF;;AAED;AACA/B,UAAMlR,OAAN,CAAe,UAAUsR,IAAV,EAAiB;AAC9BA,WAAKtT,IAAL,CAAWP,SAAX,EAAsB2V,IAAtB;AACD,KAFD;AAGD,GAxBD;;AA0BA;;;;;;AAMA7V,QAAM2V,aAAN,GAAsB,UAAUre,IAAV,EAAgB4N,KAAhB,EAAuBlE,IAAvB,EAA8B;AAClD;AACA,QAAI8U,WAAW5Q,QAAQ,CAAEA,KAAF,EAAUmH,MAAV,CAAkBrL,IAAlB,CAAR,GAAmCA,IAAlD;AACA,SAAKD,SAAL,CAAgBzJ,IAAhB,EAAsBwe,QAAtB;;AAEA,QAAKtW,MAAL,EAAc;AACZ;AACA,WAAKgT,QAAL,GAAgB,KAAKA,QAAL,IAAiBhT,OAAQ,KAAKgG,OAAb,CAAjC;AACA,UAAKN,KAAL,EAAa;AACX;AACA,YAAI6Q,SAASvW,OAAOwW,KAAP,CAAc9Q,KAAd,CAAb;AACA6Q,eAAOze,IAAP,GAAcA,IAAd;AACA,aAAKkb,QAAL,CAAcle,OAAd,CAAuByhB,MAAvB,EAA+B/U,IAA/B;AACD,OALD,MAKO;AACL;AACA,aAAKwR,QAAL,CAAcle,OAAd,CAAuBgD,IAAvB,EAA6B0J,IAA7B;AACD;AACF;AACF,GAlBD;;AAoBA;;;AAGA;;;;;AAKAhB,QAAMiW,MAAN,GAAe,UAAUnU,IAAV,EAAiB;AAC9B,QAAIiS,OAAO,KAAKmC,OAAL,CAAcpU,IAAd,CAAX;AACA,QAAKiS,IAAL,EAAY;AACVA,WAAKY,SAAL,GAAiB,IAAjB;AACD;AACF,GALD;;AAOA;;;;AAIA3U,QAAMmW,QAAN,GAAiB,UAAUrU,IAAV,EAAiB;AAChC,QAAIiS,OAAO,KAAKmC,OAAL,CAAcpU,IAAd,CAAX;AACA,QAAKiS,IAAL,EAAY;AACV,aAAOA,KAAKY,SAAZ;AACD;AACF,GALD;;AAOA;;;;AAIA3U,QAAMwT,KAAN,GAAc,UAAUzI,KAAV,EAAkB;AAC9BA,YAAQ,KAAKqL,KAAL,CAAYrL,KAAZ,CAAR;AACA,QAAK,CAACA,KAAN,EAAc;AACZ;AACD;;AAED,SAAKwI,MAAL,GAAc,KAAKA,MAAL,CAAYlH,MAAZ,CAAoBtB,KAApB,CAAd;AACA;AACAA,UAAMtI,OAAN,CAAe,KAAKwT,MAApB,EAA4B,IAA5B;AACD,GATD;;AAWA;;;;AAIAjW,QAAMqW,OAAN,GAAgB,UAAUtL,KAAV,EAAkB;AAChCA,YAAQ,KAAKqL,KAAL,CAAYrL,KAAZ,CAAR;AACA,QAAK,CAACA,KAAN,EAAa;AACX;AACD;;AAEDA,UAAMtI,OAAN,CAAe,UAAUX,IAAV,EAAiB;AAC9B;AACA0I,YAAME,UAAN,CAAkB,KAAK6I,MAAvB,EAA+BzR,IAA/B;AACA,WAAKqU,QAAL,CAAerU,IAAf;AACD,KAJD,EAIG,IAJH;AAKD,GAXD;;AAaA;;;;;AAKA9B,QAAMoW,KAAN,GAAc,UAAUrL,KAAV,EAAkB;AAC9B,QAAK,CAACA,KAAN,EAAc;AACZ;AACD;AACD;AACA,QAAK,OAAOA,KAAP,IAAgB,QAArB,EAAgC;AAC9BA,cAAQ,KAAKvF,OAAL,CAAaxD,gBAAb,CAA+B+I,KAA/B,CAAR;AACD;AACDA,YAAQP,MAAMhJ,SAAN,CAAiBuJ,KAAjB,CAAR;AACA,WAAOA,KAAP;AACD,GAVD;;AAYA/K,QAAMmU,aAAN,GAAsB,YAAW;AAC/B,QAAK,CAAC,KAAKZ,MAAN,IAAgB,CAAC,KAAKA,MAAL,CAAY1jB,MAAlC,EAA2C;AACzC;AACD;;AAED,SAAKymB,gBAAL;;AAEA,SAAK/C,MAAL,CAAY9Q,OAAZ,CAAqB,KAAK8T,YAA1B,EAAwC,IAAxC;AACD,GARD;;AAUA;AACAvW,QAAMsW,gBAAN,GAAyB,YAAW;AAClC;AACA,QAAIE,eAAe,KAAKhR,OAAL,CAAaiR,qBAAb,EAAnB;AACA,QAAI/O,OAAO,KAAKA,IAAhB;AACA,SAAKgP,aAAL,GAAqB;AACnBxf,YAAMsf,aAAatf,IAAb,GAAoBwQ,KAAKoB,WAAzB,GAAuCpB,KAAK+B,eAD/B;AAEnBrS,WAAKof,aAAapf,GAAb,GAAmBsQ,KAAKuB,UAAxB,GAAqCvB,KAAKkC,cAF5B;AAGnB/N,aAAO2a,aAAa3a,KAAb,IAAuB6L,KAAKqB,YAAL,GAAoBrB,KAAKgC,gBAAhD,CAHY;AAInB5N,cAAQ0a,aAAa1a,MAAb,IAAwB4L,KAAKwB,aAAL,GAAqBxB,KAAKmC,iBAAlD;AAJW,KAArB;AAMD,GAVD;;AAYA;;;AAGA7J,QAAMuW,YAAN,GAAqBjP,IAArB;;AAEA;;;;;AAKAtH,QAAM2W,iBAAN,GAA0B,UAAU7U,IAAV,EAAiB;AACzC,QAAI0U,eAAe1U,KAAK2U,qBAAL,EAAnB;AACA,QAAIG,WAAW,KAAKF,aAApB;AACA,QAAIhP,OAAOT,QAASnF,IAAT,CAAX;AACA,QAAIlG,SAAS;AACX1E,YAAMsf,aAAatf,IAAb,GAAoB0f,SAAS1f,IAA7B,GAAoCwQ,KAAK0B,UADpC;AAEXhS,WAAKof,aAAapf,GAAb,GAAmBwf,SAASxf,GAA5B,GAAkCsQ,KAAK6B,SAFjC;AAGX1N,aAAO+a,SAAS/a,KAAT,GAAiB2a,aAAa3a,KAA9B,GAAsC6L,KAAK2B,WAHvC;AAIXvN,cAAQ8a,SAAS9a,MAAT,GAAkB0a,aAAa1a,MAA/B,GAAwC4L,KAAK8B;AAJ1C,KAAb;AAMA,WAAO5N,MAAP;AACD,GAXD;;AAaA;;AAEA;AACA;AACAoE,QAAMiF,WAAN,GAAoBuF,MAAMvF,WAA1B;;AAEA;;;AAGAjF,QAAM0T,UAAN,GAAmB,YAAW;AAC5BxjB,WAAO6U,gBAAP,CAAyB,QAAzB,EAAmC,IAAnC;AACA,SAAK8R,aAAL,GAAqB,IAArB;AACD,GAHD;;AAKA;;;AAGA7W,QAAM8W,YAAN,GAAqB,YAAW;AAC9B5mB,WAAOqV,mBAAP,CAA4B,QAA5B,EAAsC,IAAtC;AACA,SAAKsR,aAAL,GAAqB,KAArB;AACD,GAHD;;AAKA7W,QAAM+W,QAAN,GAAiB,YAAW;AAC1B,SAAK/D,MAAL;AACD,GAFD;;AAIAxI,QAAMW,cAAN,CAAsBwB,QAAtB,EAAgC,UAAhC,EAA4C,GAA5C;;AAEA3M,QAAMgT,MAAN,GAAe,YAAW;AACxB;AACA;AACA,QAAK,CAAC,KAAK6D,aAAN,IAAuB,CAAC,KAAKG,iBAAL,EAA7B,EAAwD;AACtD;AACD;;AAED,SAAKzJ,MAAL;AACD,GARD;;AAUA;;;;AAIAvN,QAAMgX,iBAAN,GAA0B,YAAW;AACnC,QAAItP,OAAOT,QAAS,KAAKzB,OAAd,CAAX;AACA;AACA;AACA,QAAIyR,WAAW,KAAKvP,IAAL,IAAaA,IAA5B;AACA,WAAOuP,YAAYvP,KAAKC,UAAL,KAAoB,KAAKD,IAAL,CAAUC,UAAjD;AACD,GAND;;AAQA;;AAEA;;;;;AAKA3H,QAAMkX,QAAN,GAAiB,UAAUnM,KAAV,EAAkB;AACjC,QAAI4I,QAAQ,KAAKC,QAAL,CAAe7I,KAAf,CAAZ;AACA;AACA,QAAK4I,MAAM9jB,MAAX,EAAoB;AAClB,WAAK8jB,KAAL,GAAa,KAAKA,KAAL,CAAWtH,MAAX,CAAmBsH,KAAnB,CAAb;AACD;AACD,WAAOA,KAAP;AACD,GAPD;;AASA;;;;AAIA3T,QAAMmX,QAAN,GAAiB,UAAUpM,KAAV,EAAkB;AACjC,QAAI4I,QAAQ,KAAKuD,QAAL,CAAenM,KAAf,CAAZ;AACA,QAAK,CAAC4I,MAAM9jB,MAAZ,EAAqB;AACnB;AACD;AACD;AACA,SAAKykB,WAAL,CAAkBX,KAAlB,EAAyB,IAAzB;AACA,SAAKlC,MAAL,CAAakC,KAAb;AACD,GARD;;AAUA;;;;AAIA3T,QAAMoX,SAAN,GAAkB,UAAUrM,KAAV,EAAkB;AAClC,QAAI4I,QAAQ,KAAKC,QAAL,CAAe7I,KAAf,CAAZ;AACA,QAAK,CAAC4I,MAAM9jB,MAAZ,EAAqB;AACnB;AACD;AACD;AACA,QAAIwnB,gBAAgB,KAAK1D,KAAL,CAAWpf,KAAX,CAAiB,CAAjB,CAApB;AACA,SAAKof,KAAL,GAAaA,MAAMtH,MAAN,CAAcgL,aAAd,CAAb;AACA;AACA,SAAKnD,YAAL;AACA,SAAKC,aAAL;AACA;AACA,SAAKG,WAAL,CAAkBX,KAAlB,EAAyB,IAAzB;AACA,SAAKlC,MAAL,CAAakC,KAAb;AACA;AACA,SAAKW,WAAL,CAAkB+C,aAAlB;AACD,GAhBD;;AAkBA;;;;AAIArX,QAAMyR,MAAN,GAAe,UAAUkC,KAAV,EAAkB;AAC/B,SAAKiB,oBAAL,CAA2B,QAA3B,EAAqCjB,KAArC;AACA,QAAK,CAACA,KAAD,IAAU,CAACA,MAAM9jB,MAAtB,EAA+B;AAC7B;AACD;AACD,QAAIwhB,UAAU,KAAK4D,aAAL,EAAd;AACAtB,UAAMlR,OAAN,CAAe,UAAUsR,IAAV,EAAgBniB,CAAhB,EAAoB;AACjCmiB,WAAK1C,OAAL,CAAczf,IAAIyf,OAAlB;AACA0C,WAAKtC,MAAL;AACD,KAHD;AAID,GAVD;;AAYA;;;;AAIAzR,QAAMwR,IAAN,GAAa,UAAUmC,KAAV,EAAkB;AAC7B,SAAKiB,oBAAL,CAA2B,MAA3B,EAAmCjB,KAAnC;AACA,QAAK,CAACA,KAAD,IAAU,CAACA,MAAM9jB,MAAtB,EAA+B;AAC7B;AACD;AACD,QAAIwhB,UAAU,KAAK4D,aAAL,EAAd;AACAtB,UAAMlR,OAAN,CAAe,UAAUsR,IAAV,EAAgBniB,CAAhB,EAAoB;AACjCmiB,WAAK1C,OAAL,CAAczf,IAAIyf,OAAlB;AACA0C,WAAKvC,IAAL;AACD,KAHD;AAID,GAVD;;AAYA;;;;AAIAxR,QAAMsX,kBAAN,GAA2B,UAAUvM,KAAV,EAAkB;AAC3C,QAAI4I,QAAQ,KAAK4D,QAAL,CAAexM,KAAf,CAAZ;AACA,SAAK0G,MAAL,CAAakC,KAAb;AACD,GAHD;;AAKA;;;;AAIA3T,QAAMwX,gBAAN,GAAyB,UAAUzM,KAAV,EAAkB;AACzC,QAAI4I,QAAQ,KAAK4D,QAAL,CAAexM,KAAf,CAAZ;AACA,SAAKyG,IAAL,CAAWmC,KAAX;AACD,GAHD;;AAKA;;;;;;AAMA3T,QAAMkW,OAAN,GAAgB,UAAUpU,IAAV,EAAiB;AAC/B;AACA,SAAM,IAAIlQ,IAAE,CAAZ,EAAeA,IAAI,KAAK+hB,KAAL,CAAW9jB,MAA9B,EAAsC+B,GAAtC,EAA4C;AAC1C,UAAImiB,OAAO,KAAKJ,KAAL,CAAW/hB,CAAX,CAAX;AACA,UAAKmiB,KAAKvO,OAAL,IAAgB1D,IAArB,EAA4B;AAC1B;AACA,eAAOiS,IAAP;AACD;AACF;AACF,GATD;;AAWA;;;;;AAKA/T,QAAMuX,QAAN,GAAiB,UAAUxM,KAAV,EAAkB;AACjCA,YAAQP,MAAMhJ,SAAN,CAAiBuJ,KAAjB,CAAR;AACA,QAAI4I,QAAQ,EAAZ;AACA5I,UAAMtI,OAAN,CAAe,UAAUX,IAAV,EAAiB;AAC9B,UAAIiS,OAAO,KAAKmC,OAAL,CAAcpU,IAAd,CAAX;AACA,UAAKiS,IAAL,EAAY;AACVJ,cAAMnT,IAAN,CAAYuT,IAAZ;AACD;AACF,KALD,EAKG,IALH;;AAOA,WAAOJ,KAAP;AACD,GAXD;;AAaA;;;;AAIA3T,QAAMnL,MAAN,GAAe,UAAUkW,KAAV,EAAkB;AAC/B,QAAI0M,cAAc,KAAKF,QAAL,CAAexM,KAAf,CAAlB;;AAEA,SAAK6J,oBAAL,CAA2B,QAA3B,EAAqC6C,WAArC;;AAEA;AACA,QAAK,CAACA,WAAD,IAAgB,CAACA,YAAY5nB,MAAlC,EAA2C;AACzC;AACD;;AAED4nB,gBAAYhV,OAAZ,CAAqB,UAAUsR,IAAV,EAAiB;AACpCA,WAAKlf,MAAL;AACA;AACA2V,YAAME,UAAN,CAAkB,KAAKiJ,KAAvB,EAA8BI,IAA9B;AACD,KAJD,EAIG,IAJH;AAKD,GAfD;;AAiBA;;AAEA;AACA/T,QAAMoS,OAAN,GAAgB,YAAW;AACzB;AACA,QAAIvgB,QAAQ,KAAK2T,OAAL,CAAa3T,KAAzB;AACAA,UAAMxB,MAAN,GAAe,EAAf;AACAwB,UAAMe,QAAN,GAAiB,EAAjB;AACAf,UAAM1B,KAAN,GAAc,EAAd;AACA;AACA,SAAKwjB,KAAL,CAAWlR,OAAX,CAAoB,UAAUsR,IAAV,EAAiB;AACnCA,WAAK3B,OAAL;AACD,KAFD;;AAIA,SAAK0E,YAAL;;AAEA,QAAIrE,KAAK,KAAKjN,OAAL,CAAakN,YAAtB;AACA,WAAOJ,UAAWG,EAAX,CAAP,CAdyB,CAcD;AACxB,WAAO,KAAKjN,OAAL,CAAakN,YAApB;AACA;AACA,QAAKlT,MAAL,EAAc;AACZA,aAAOF,UAAP,CAAmB,KAAKkG,OAAxB,EAAiC,KAAKiI,WAAL,CAAiBzH,SAAlD;AACD;AAEF,GArBD;;AAuBA;;AAEA;;;;;AAKA2G,WAASrc,IAAT,GAAgB,UAAUwR,IAAV,EAAiB;AAC/BA,WAAO0I,MAAMK,eAAN,CAAuB/I,IAAvB,CAAP;AACA,QAAI2Q,KAAK3Q,QAAQA,KAAK4Q,YAAtB;AACA,WAAOD,MAAMH,UAAWG,EAAX,CAAb;AACD,GAJD;;AAOA;;AAEA;;;;AAIA9F,WAASpK,MAAT,GAAkB,UAAUyD,SAAV,EAAqBpW,OAArB,EAA+B;AAC/C;AACA,QAAI8nB,SAASC,SAAUhL,QAAV,CAAb;AACA;AACA+K,WAAOhsB,QAAP,GAAkB8e,MAAM/Z,MAAN,CAAc,EAAd,EAAkBkc,SAASjhB,QAA3B,CAAlB;AACA8e,UAAM/Z,MAAN,CAAcinB,OAAOhsB,QAArB,EAA+BkE,OAA/B;AACA8nB,WAAOvE,aAAP,GAAuB3I,MAAM/Z,MAAN,CAAc,EAAd,EAAkBkc,SAASwG,aAA3B,CAAvB;;AAEAuE,WAAO1R,SAAP,GAAmBA,SAAnB;;AAEA0R,WAAOpnB,IAAP,GAAcqc,SAASrc,IAAvB;;AAEA;AACAonB,WAAO9K,IAAP,GAAc+K,SAAU/K,IAAV,CAAd;;AAEA;;AAEApC,UAAMuB,QAAN,CAAgB2L,MAAhB,EAAwB1R,SAAxB;;AAEA;;AAEA;AACA,QAAKxG,UAAUA,OAAOwH,OAAtB,EAAgC;AAC9BxH,aAAOwH,OAAP,CAAgBhB,SAAhB,EAA2B0R,MAA3B;AACD;;AAED,WAAOA,MAAP;AACD,GA3BD;;AA6BA,WAASC,QAAT,CAAmBC,MAAnB,EAA4B;AAC1B,aAASC,QAAT,GAAoB;AAClBD,aAAO3hB,KAAP,CAAc,IAAd,EAAoBqQ,SAApB;AACD;;AAEDuR,aAAS5X,SAAT,GAAqBqC,OAAOC,MAAP,CAAeqV,OAAO3X,SAAtB,CAArB;AACA4X,aAAS5X,SAAT,CAAmBwN,WAAnB,GAAiCoK,QAAjC;;AAEA,WAAOA,QAAP;AACD;;AAED;;AAEA;AACA,MAAIC,UAAU;AACZC,QAAI,CADQ;AAEZC,OAAG;AAFS,GAAd;;AAKA;AACA;AACA,WAAS7C,eAAT,CAA0B8C,IAA1B,EAAiC;AAC/B,QAAK,OAAOA,IAAP,IAAe,QAApB,EAA+B;AAC7B,aAAOA,IAAP;AACD;AACD,QAAI3U,UAAU2U,KAAKrM,KAAL,CAAY,mBAAZ,CAAd;AACA,QAAIzE,MAAM7D,WAAWA,QAAQ,CAAR,CAArB;AACA,QAAI4U,OAAO5U,WAAWA,QAAQ,CAAR,CAAtB;AACA,QAAK,CAAC6D,IAAItX,MAAV,EAAmB;AACjB,aAAO,CAAP;AACD;AACDsX,UAAM/Q,WAAY+Q,GAAZ,CAAN;AACA,QAAIgR,OAAOL,QAASI,IAAT,KAAmB,CAA9B;AACA,WAAO/Q,MAAMgR,IAAb;AACD;;AAED;;AAEA;AACAxL,WAASC,IAAT,GAAgBA,IAAhB;;AAEA,SAAOD,QAAP;AAEC,CAp6BC,CAAF;;AAs6BA;;;;;;;;AAQE,WAAUzc,MAAV,EAAkBwP,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,OAAOC,MAAP,IAAiB,UAAjB,IAA+BA,OAAOC,GAA3C,EAAiD;AAC/C;AACAD,WAAQ,CACJ,mBADI,EAEJ,mBAFI,CAAR,EAIED,OAJF;AAKD,GAPD,MAOO,IAAK,QAAOG,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBJ,QACfwB,QAAQ,UAAR,CADe,EAEfA,QAAQ,UAAR,CAFe,CAAjB;AAID,GANM,MAMA;AACL;AACAhR,WAAOkoB,OAAP,GAAiB1Y,QACfxP,OAAOyc,QADQ,EAEfzc,OAAO+W,OAFQ,CAAjB;AAID;AAEF,CAxBC,EAwBC/W,MAxBD,EAwBS,SAASwP,OAAT,CAAkBiN,QAAlB,EAA4B1F,OAA5B,EAAsC;;AAIjD;;AAEE;AACA,MAAImR,UAAUzL,SAASpK,MAAT,CAAgB,SAAhB,CAAd;AACA;AACA6V,UAAQjF,aAAR,CAAsBkF,QAAtB,GAAiC,YAAjC;;AAEA,MAAIrY,QAAQoY,QAAQnY,SAApB;;AAEAD,QAAMkU,YAAN,GAAqB,YAAW;AAC9B,SAAKjN,OAAL;AACA,SAAKsN,eAAL,CAAsB,aAAtB,EAAqC,YAArC;AACA,SAAKA,eAAL,CAAsB,QAAtB,EAAgC,YAAhC;AACA,SAAK+D,cAAL;;AAEA;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAM,IAAI3mB,IAAE,CAAZ,EAAeA,IAAI,KAAK4mB,IAAxB,EAA8B5mB,GAA9B,EAAoC;AAClC,WAAK2mB,KAAL,CAAW/X,IAAX,CAAiB,CAAjB;AACD;;AAED,SAAKiY,IAAL,GAAY,CAAZ;AACA,SAAKC,kBAAL,GAA0B,CAA1B;AACD,GAdD;;AAgBA1Y,QAAMsY,cAAN,GAAuB,YAAW;AAChC,SAAKK,iBAAL;AACA;AACA,QAAK,CAAC,KAAKC,WAAX,EAAyB;AACvB,UAAIC,YAAY,KAAKlF,KAAL,CAAW,CAAX,CAAhB;AACA,UAAImF,gBAAgBD,aAAaA,UAAUrT,OAA3C;AACA;AACA,WAAKoT,WAAL,GAAmBE,iBAAiB7R,QAAS6R,aAAT,EAAyB3hB,UAA1C;AACjB;AACA,WAAK4hB,cAFP;AAGD;;AAED,QAAIH,cAAc,KAAKA,WAAL,IAAoB,KAAKI,MAA3C;;AAEA;AACA,QAAID,iBAAiB,KAAKA,cAAL,GAAsB,KAAKC,MAAhD;AACA,QAAIR,OAAOO,iBAAiBH,WAA5B;AACA;AACA,QAAIK,SAASL,cAAcG,iBAAiBH,WAA5C;AACA;AACA,QAAIM,aAAaD,UAAUA,SAAS,CAAnB,GAAuB,OAAvB,GAAiC,OAAlD;AACAT,WAAO5nB,KAAMsoB,UAAN,EAAoBV,IAApB,CAAP;AACA,SAAKA,IAAL,GAAY5nB,KAAKoF,GAAL,CAAUwiB,IAAV,EAAgB,CAAhB,CAAZ;AACD,GAvBD;;AAyBAxY,QAAM2Y,iBAAN,GAA0B,YAAW;AACnC;AACA,QAAIQ,aAAa,KAAKjL,UAAL,CAAgB,UAAhB,CAAjB;AACA,QAAIkL,YAAYD,aAAa,KAAK3T,OAAL,CAAaoF,UAA1B,GAAuC,KAAKpF,OAA5D;AACA;AACA;AACA,QAAIkC,OAAOT,QAASmS,SAAT,CAAX;AACA,SAAKL,cAAL,GAAsBrR,QAAQA,KAAKC,UAAnC;AACD,GARD;;AAUA3H,QAAM8U,sBAAN,GAA+B,UAAUf,IAAV,EAAiB;AAC9CA,SAAK9M,OAAL;AACA;AACA,QAAIoS,YAAYtF,KAAKrM,IAAL,CAAUvQ,UAAV,GAAuB,KAAKyhB,WAA5C;AACA,QAAIM,aAAaG,aAAaA,YAAY,CAAzB,GAA6B,OAA7B,GAAuC,MAAxD;AACA;AACA,QAAIC,UAAU1oB,KAAMsoB,UAAN,EAAoBnF,KAAKrM,IAAL,CAAUvQ,UAAV,GAAuB,KAAKyhB,WAAhD,CAAd;AACAU,cAAU1oB,KAAK2oB,GAAL,CAAUD,OAAV,EAAmB,KAAKd,IAAxB,CAAV;AACA;AACA,QAAIgB,eAAe,KAAK5pB,OAAL,CAAa6pB,eAAb,GACjB,2BADiB,GACa,oBADhC;AAEA,QAAIC,cAAc,KAAMF,YAAN,EAAsBF,OAAtB,EAA+BvF,IAA/B,CAAlB;AACA;AACA,QAAInhB,WAAW;AACb6J,SAAG,KAAKmc,WAAL,GAAmBc,YAAYC,GADrB;AAEbjd,SAAGgd,YAAYhd;AAFF,KAAf;AAIA;AACA,QAAIkd,YAAYF,YAAYhd,CAAZ,GAAgBqX,KAAKrM,IAAL,CAAU3R,WAA1C;AACA,QAAI8jB,SAASP,UAAUI,YAAYC,GAAnC;AACA,SAAM,IAAI/nB,IAAI8nB,YAAYC,GAA1B,EAA+B/nB,IAAIioB,MAAnC,EAA2CjoB,GAA3C,EAAiD;AAC/C,WAAK2mB,KAAL,CAAW3mB,CAAX,IAAgBgoB,SAAhB;AACD;;AAED,WAAOhnB,QAAP;AACD,GAzBD;;AA2BAoN,QAAM8Z,kBAAN,GAA2B,UAAUR,OAAV,EAAoB;AAC7C,QAAIS,WAAW,KAAKC,eAAL,CAAsBV,OAAtB,CAAf;AACA;AACA,QAAIW,WAAWrpB,KAAK2oB,GAAL,CAAStjB,KAAT,CAAgBrF,IAAhB,EAAsBmpB,QAAtB,CAAf;;AAEA,WAAO;AACLJ,WAAKI,SAASxZ,OAAT,CAAkB0Z,QAAlB,CADA;AAELvd,SAAGud;AAFE,KAAP;AAID,GATD;;AAWA;;;;AAIAja,QAAMga,eAAN,GAAwB,UAAUV,OAAV,EAAoB;AAC1C,QAAKA,UAAU,CAAf,EAAmB;AACjB;AACA,aAAO,KAAKf,KAAZ;AACD;;AAED,QAAIwB,WAAW,EAAf;AACA;AACA,QAAIG,aAAa,KAAK1B,IAAL,GAAY,CAAZ,GAAgBc,OAAjC;AACA;AACA,SAAM,IAAI1nB,IAAI,CAAd,EAAiBA,IAAIsoB,UAArB,EAAiCtoB,GAAjC,EAAuC;AACrCmoB,eAASnoB,CAAT,IAAc,KAAKuoB,aAAL,CAAoBvoB,CAApB,EAAuB0nB,OAAvB,CAAd;AACD;AACD,WAAOS,QAAP;AACD,GAdD;;AAgBA/Z,QAAMma,aAAN,GAAsB,UAAUR,GAAV,EAAeL,OAAf,EAAyB;AAC7C,QAAKA,UAAU,CAAf,EAAmB;AACjB,aAAO,KAAKf,KAAL,CAAYoB,GAAZ,CAAP;AACD;AACD;AACA,QAAIS,aAAa,KAAK7B,KAAL,CAAWhkB,KAAX,CAAkBolB,GAAlB,EAAuBA,MAAML,OAA7B,CAAjB;AACA;AACA,WAAO1oB,KAAKoF,GAAL,CAASC,KAAT,CAAgBrF,IAAhB,EAAsBwpB,UAAtB,CAAP;AACD,GARD;;AAUA;AACApa,QAAMqa,yBAAN,GAAkC,UAAUf,OAAV,EAAmBvF,IAAnB,EAA0B;AAC1D,QAAI4F,MAAM,KAAKjB,kBAAL,GAA0B,KAAKF,IAAzC;AACA,QAAI8B,SAAShB,UAAU,CAAV,IAAeK,MAAML,OAAN,GAAgB,KAAKd,IAAjD;AACA;AACAmB,UAAMW,SAAS,CAAT,GAAaX,GAAnB;AACA;AACA,QAAIY,UAAUxG,KAAKrM,IAAL,CAAUvQ,UAAV,IAAwB4c,KAAKrM,IAAL,CAAU3R,WAAhD;AACA,SAAK2iB,kBAAL,GAA0B6B,UAAUZ,MAAML,OAAhB,GAA0B,KAAKZ,kBAAzD;;AAEA,WAAO;AACLiB,WAAKA,GADA;AAELjd,SAAG,KAAKyd,aAAL,CAAoBR,GAApB,EAAyBL,OAAzB;AAFE,KAAP;AAID,GAbD;;AAeAtZ,QAAMuW,YAAN,GAAqB,UAAU/C,KAAV,EAAkB;AACrC,QAAIgH,YAAYvT,QAASuM,KAAT,CAAhB;AACA,QAAI5X,SAAS,KAAK+a,iBAAL,CAAwBnD,KAAxB,CAAb;AACA;AACA,QAAIvF,eAAe,KAAKC,UAAL,CAAgB,YAAhB,CAAnB;AACA,QAAIuM,SAASxM,eAAerS,OAAO1E,IAAtB,GAA6B0E,OAAOC,KAAjD;AACA,QAAI6e,QAAQD,SAASD,UAAUrjB,UAA/B;AACA,QAAIwjB,WAAW/pB,KAAKC,KAAL,CAAY4pB,SAAS,KAAK7B,WAA1B,CAAf;AACA+B,eAAW/pB,KAAKoF,GAAL,CAAU,CAAV,EAAa2kB,QAAb,CAAX;AACA,QAAIC,UAAUhqB,KAAKC,KAAL,CAAY6pB,QAAQ,KAAK9B,WAAzB,CAAd;AACA;AACAgC,eAAWF,QAAQ,KAAK9B,WAAb,GAA2B,CAA3B,GAA+B,CAA1C;AACAgC,cAAUhqB,KAAK2oB,GAAL,CAAU,KAAKf,IAAL,GAAY,CAAtB,EAAyBoC,OAAzB,CAAV;AACA;;AAEA,QAAIzM,cAAc,KAAKD,UAAL,CAAgB,WAAhB,CAAlB;AACA,QAAI2M,YAAY,CAAE1M,cAAcvS,OAAOxE,GAArB,GAA2BwE,OAAOE,MAApC,IACd0e,UAAUzkB,WADZ;AAEA,SAAM,IAAInE,IAAI+oB,QAAd,EAAwB/oB,KAAKgpB,OAA7B,EAAsChpB,GAAtC,EAA4C;AAC1C,WAAK2mB,KAAL,CAAW3mB,CAAX,IAAgBhB,KAAKoF,GAAL,CAAU6kB,SAAV,EAAqB,KAAKtC,KAAL,CAAW3mB,CAAX,CAArB,CAAhB;AACD;AACF,GArBD;;AAuBAoO,QAAMqV,iBAAN,GAA0B,YAAW;AACnC,SAAKoD,IAAL,GAAY7nB,KAAKoF,GAAL,CAASC,KAAT,CAAgBrF,IAAhB,EAAsB,KAAK2nB,KAA3B,CAAZ;AACA,QAAI7Q,OAAO;AACTrX,cAAQ,KAAKooB;AADJ,KAAX;;AAIA,QAAK,KAAKvK,UAAL,CAAgB,UAAhB,CAAL,EAAmC;AACjCxG,WAAKvX,KAAL,GAAa,KAAK2qB,qBAAL,EAAb;AACD;;AAED,WAAOpT,IAAP;AACD,GAXD;;AAaA1H,QAAM8a,qBAAN,GAA8B,YAAW;AACvC,QAAIC,aAAa,CAAjB;AACA;AACA,QAAInpB,IAAI,KAAK4mB,IAAb;AACA,WAAQ,EAAE5mB,CAAV,EAAc;AACZ,UAAK,KAAK2mB,KAAL,CAAW3mB,CAAX,MAAkB,CAAvB,EAA2B;AACzB;AACD;AACDmpB;AACD;AACD;AACA,WAAO,CAAE,KAAKvC,IAAL,GAAYuC,UAAd,IAA6B,KAAKnC,WAAlC,GAAgD,KAAKI,MAA5D;AACD,GAZD;;AAcAhZ,QAAMgX,iBAAN,GAA0B,YAAW;AACnC,QAAIgE,gBAAgB,KAAKjC,cAAzB;AACA,SAAKJ,iBAAL;AACA,WAAOqC,iBAAiB,KAAKjC,cAA7B;AACD,GAJD;;AAMA,SAAOX,OAAP;AAED,CAtOC,CAAF;AC3tEA;AACI;AACA;;AAEA;AACA;;AAEA,IAAI6C,QAAQ,EAAZ;;AAEA,SAASC,IAAT,CAAcvP,GAAd,EAAmBrb,IAAnB,EAAyB;AACrB;AACA;AACA,QAAIZ,KAAK,CAAC,KAAKyrB,IAAL,CAAUxP,GAAV,CAAD,GACPsP,MAAMtP,GAAN,IAAasP,MAAMtP,GAAN,KACXuP,KAAKzpB,SAAS2pB,cAAT,CAAwBzP,GAAxB,EAA6B0P,SAAlC,CAFK;;AAIP;AACA;AACA,QAAIC,QAAJ,CAAa,KAAb,EACE;;AAEA;AACA,wBAHA;;AAKA;AACA3P,QACG3Z,OADH,CACW,WADX,EACwB,GADxB,EAEGkJ,KAFH,CAES,IAFT,EAEeqgB,IAFf,CAEoB,IAFpB,EAGGvpB,OAHH,CAGW,kBAHX,EAG+B,MAH/B,EAIGA,OAJH,CAIW,aAJX,EAI0B,QAJ1B,EAKGkJ,KALH,CAKS,IALT,EAKeqgB,IALf,CAKoB,KALpB,EAMGrgB,KANH,CAMS,IANT,EAMeqgB,IANf,CAMoB,UANpB,EAOGrgB,KAPH,CAOS,IAPT,EAOeqgB,IAPf,CAOoB,KAPpB,CANA,GAcA,wBAfF,CANF;;AAuBA;AACA,WAAOjrB,OAAOZ,GAAIY,IAAJ,CAAP,GAAoBZ,EAA3B;AACD;ACrCC;;AAEA,IAAI8rB,SAASC,cAAc,CAAd,CAAb;;AAEA,SAASA,aAAT,CAAuBC,CAAvB,EAA0B;AACtB,QAAI1D,IAAG,EAAP;AACA,QAAI2D,MAAK,oEAAT;AACA,QAAIC,KAAKD,IAAI9rB,MAAb;AACA,WAAMmoB,EAAEnoB,MAAF,GAAW6rB,CAAjB;AACA1D,aAAK2D,IAAI/qB,KAAKE,MAAL,KAAgB8qB,EAAhB,GAAmB,CAAvB,CAAL;AADA,KAEA,OAAO5D,CAAP;AACH;;AAEDvsB,EAAEowB,IAAF,CAAO;AACHrY,SAAK,0BADF;AAEH2B,YAAQ,KAFL;AAGH2W,cAAU,OAHP;AAIHxrB,UAAM;AACFyrB,aAAK,mCADH;AAEFC,WAAGR,MAFD;AAGFS,oBAAY,OAHV;AAIFjoB,kBAAU,qBAJR;AAKFkoB,kBAAU,CALR;AAMFC,kBAAU,QANR;AAOFC,mBAAW;AAPT;AAJH,CAAP;;AAeAlsB,OAAOmsB,mBAAP,GAA6B,UAAUC,KAAV,EAAiB;;AAE1C,QAAIC,QAAQ9wB,EAAE,oBAAF,EAAwB+M,IAAxB,EAAZ;AACA;AACA,QAAIgkB,YAAY;AACZF,eAAOA;AADK,KAAhB;AAGA,QAAIG,iBAAiBvB,KAAKqB,KAAL,EAAYC,SAAZ,CAArB;;AAEA/wB,MAAE,mBAAF,EAAuB+M,IAAvB,CAA4B,EAA5B;AACA/M,MAAE,mBAAF,EAAuBmJ,MAAvB,CAA8B6nB,cAA9B;;AAEAC;AACH,CAbD;;AAeAjxB,EAAE,MAAF,EAAUkxB,MAAV,CAAiB,UAASzX,KAAT,EAAgB;;AAE7BA,UAAM5L,cAAN;AACAkiB,aAAS/vB,EAAE,mBAAF,EAAuBmxB,GAAvB,EAAT;AACAnxB,MAAEowB,IAAF,CAAO;AACHrY,aAAK,0BADF;AAEH2B,gBAAQ,KAFL;AAGH2W,kBAAU,OAHP;AAIHxrB,cAAM;AACFyrB,iBAAK,mCADH;AAEFC,eAAGR,MAFD;AAGFS,wBAAY,OAHV;AAIFjoB,sBAAU,qBAJR;AAKFkoB,sBAAU,CALR;AAMFC,sBAAU,QANR;AAOFC,uBAAW;AAPT;AAJH,KAAP;AAcA3wB,MAAE,mBAAF,EAAuBmxB,GAAvB,CAA2B,EAA3B;AACH,CAnBD;;AAqBA,SAASF,GAAT,GAAe;AACX,QAAIG,QAAQpxB,EAAE,mBAAF,EAAuB0V,YAAvB,CAAqC,YAAW;AACxD;AACA0b,cAAMC,OAAN,CAAc;AACV9I,0BAAc,YADJ;AAEV4E,yBAAa;AAFH,SAAd;AAIH,KANW,CAAZ;AAOH;;;ACxETntB,EAAE,WAAF,EAAekE,QAAf;;;ACAI,IAAIotB,kBACJ,OAAO,0BAAP,GACA,6CADA,GAEA,kCAFA,GAGA,kFAHA,GAIA,iIAJA,GAKA,QALA,GAMA,0EANA,GAOA,mDAPA,GAQA,QARA,GASA,OAVA;;;ACAI,IAAIC,UAAUxQ,KAAKC,KAAL,CAAWwQ,WAAX,CAAd;AACA,IAAIV,QAAQW,WAAZ;AACA,IAAIV,YAAY;AACZF,eAAOU;AADK,CAAhB;AAGA,IAAIG,WAAWC,SAASb,KAAT,EAAgBC,SAAhB,CAAf;;AAEA/wB,EAAE,yBAAF,EAA6B+M,IAA7B,CAAkC,EAAlC;AACA/M,EAAE,yBAAF,EAA6BmJ,MAA7B,CAAoCuoB,QAApC;ACRJ;AACA;;AACA,IAAIE,cACJ;AACI5K,QAAI,GADR;AAEIniB,UAAM,CACF;AACImiB,YAAI,GADR;AAEI6K,cAAM,SAFV;AAGIC,iBAAS,QAHb;AAIIC,eAAO,kCAJX;AAKIC,cAAM,yDALV;AAMIC,mBAAW,QANf;AAOIC,cAAM;AAPV,KADE,EAUF;AACIlL,YAAI,GADR;AAEI6K,cAAM,OAFV;AAGIC,iBAAS,QAHb;AAIIC,eAAO,kCAJX;AAKIC,cAAM,kHALV;AAMIC,mBAAW,QANf;AAOIC,cAAM;AAPV,KAVE,EAmBF;AACIlL,YAAI,GADR;AAEI6K,cAAM,SAFV;AAGIC,iBAAS,QAHb;AAIIC,eAAO,kCAJX;AAKIC,cAAM,+DALV;AAMIC,mBAAW,QANf;AAOIC,cAAM;AAPV,KAnBE,EA4BF;AACIlL,YAAI,GADR;AAEI6K,cAAM,OAFV;AAGIC,iBAAS,QAHb;AAIIC,eAAO,mCAJX;AAKIC,cAAM,uGALV;AAMIC,mBAAW,QANf;AAOIC,cAAM;AAPV,KA5BE;AAFV,CADA;AA0CA,IAAIV,cAAczQ,KAAKoR,SAAL,CAAeP,WAAf,CAAlB;AACA","file":"script.min.js","sourcesContent":["/**\r\n * bxSlider v4.2.12\r\n * Copyright 2013-2015 Steven Wanderski\r\n * Written while drinking Belgian ales and listening to jazz\r\n * Licensed under MIT (http://opensource.org/licenses/MIT)\r\n */\r\n\r\n;(function($) {\r\n\r\n  var defaults = {\r\n\r\n    // GENERAL\r\n    mode: 'horizontal',\r\n    slideSelector: '',\r\n    infiniteLoop: true,\r\n    hideControlOnEnd: false,\r\n    speed: 500,\r\n    easing: null,\r\n    slideMargin: 0,\r\n    startSlide: 0,\r\n    randomStart: false,\r\n    captions: false,\r\n    ticker: false,\r\n    tickerHover: false,\r\n    adaptiveHeight: false,\r\n    adaptiveHeightSpeed: 500,\r\n    video: false,\r\n    useCSS: true,\r\n    preloadImages: 'visible',\r\n    responsive: true,\r\n    slideZIndex: 50,\r\n    wrapperClass: 'bx-wrapper',\r\n\r\n    // TOUCH\r\n    touchEnabled: true,\r\n    swipeThreshold: 50,\r\n    oneToOneTouch: true,\r\n    preventDefaultSwipeX: true,\r\n    preventDefaultSwipeY: false,\r\n\r\n    // ACCESSIBILITY\r\n    ariaLive: true,\r\n    ariaHidden: true,\r\n\r\n    // KEYBOARD\r\n    keyboardEnabled: false,\r\n\r\n    // PAGER\r\n    pager: true,\r\n    pagerType: 'full',\r\n    pagerShortSeparator: ' / ',\r\n    pagerSelector: null,\r\n    buildPager: null,\r\n    pagerCustom: null,\r\n\r\n    // CONTROLS\r\n    controls: true,\r\n    nextText: 'Next',\r\n    prevText: 'Prev',\r\n    nextSelector: null,\r\n    prevSelector: null,\r\n    autoControls: false,\r\n    startText: 'Start',\r\n    stopText: 'Stop',\r\n    autoControlsCombine: false,\r\n    autoControlsSelector: null,\r\n\r\n    // AUTO\r\n    auto: false,\r\n    pause: 4000,\r\n    autoStart: true,\r\n    autoDirection: 'next',\r\n    stopAutoOnClick: false,\r\n    autoHover: false,\r\n    autoDelay: 0,\r\n    autoSlideForOnePage: false,\r\n\r\n    // CAROUSEL\r\n    minSlides: 1,\r\n    maxSlides: 1,\r\n    moveSlides: 0,\r\n    slideWidth: 0,\r\n    shrinkItems: false,\r\n\r\n    // CALLBACKS\r\n    onSliderLoad: function() { return true; },\r\n    onSlideBefore: function() { return true; },\r\n    onSlideAfter: function() { return true; },\r\n    onSlideNext: function() { return true; },\r\n    onSlidePrev: function() { return true; },\r\n    onSliderResize: function() { return true; }\r\n  };\r\n\r\n  $.fn.bxSlider = function(options) {\r\n\r\n    if (this.length === 0) {\r\n      return this;\r\n    }\r\n\r\n    // support multiple elements\r\n    if (this.length > 1) {\r\n      this.each(function() {\r\n        $(this).bxSlider(options);\r\n      });\r\n      return this;\r\n    }\r\n\r\n    // create a namespace to be used throughout the plugin\r\n    var slider = {},\r\n    // set a reference to our slider element\r\n    el = this,\r\n    // get the original window dimens (thanks a lot IE)\r\n    windowWidth = $(window).width(),\r\n    windowHeight = $(window).height();\r\n\r\n    // Return if slider is already initialized\r\n    if ($(el).data('bxSlider')) { return; }\r\n\r\n    /**\r\n     * ===================================================================================\r\n     * = PRIVATE FUNCTIONS\r\n     * ===================================================================================\r\n     */\r\n\r\n    /**\r\n     * Initializes namespace settings to be used throughout plugin\r\n     */\r\n    var init = function() {\r\n      // Return if slider is already initialized\r\n      if ($(el).data('bxSlider')) { return; }\r\n      // merge user-supplied options with the defaults\r\n      slider.settings = $.extend({}, defaults, options);\r\n      // parse slideWidth setting\r\n      slider.settings.slideWidth = parseInt(slider.settings.slideWidth);\r\n      // store the original children\r\n      slider.children = el.children(slider.settings.slideSelector);\r\n      // check if actual number of slides is less than minSlides / maxSlides\r\n      if (slider.children.length < slider.settings.minSlides) { slider.settings.minSlides = slider.children.length; }\r\n      if (slider.children.length < slider.settings.maxSlides) { slider.settings.maxSlides = slider.children.length; }\r\n      // if random start, set the startSlide setting to random number\r\n      if (slider.settings.randomStart) { slider.settings.startSlide = Math.floor(Math.random() * slider.children.length); }\r\n      // store active slide information\r\n      slider.active = { index: slider.settings.startSlide };\r\n      // store if the slider is in carousel mode (displaying / moving multiple slides)\r\n      slider.carousel = slider.settings.minSlides > 1 || slider.settings.maxSlides > 1 ? true : false;\r\n      // if carousel, force preloadImages = 'all'\r\n      if (slider.carousel) { slider.settings.preloadImages = 'all'; }\r\n      // calculate the min / max width thresholds based on min / max number of slides\r\n      // used to setup and update carousel slides dimensions\r\n      slider.minThreshold = (slider.settings.minSlides * slider.settings.slideWidth) + ((slider.settings.minSlides - 1) * slider.settings.slideMargin);\r\n      slider.maxThreshold = (slider.settings.maxSlides * slider.settings.slideWidth) + ((slider.settings.maxSlides - 1) * slider.settings.slideMargin);\r\n      // store the current state of the slider (if currently animating, working is true)\r\n      slider.working = false;\r\n      // initialize the controls object\r\n      slider.controls = {};\r\n      // initialize an auto interval\r\n      slider.interval = null;\r\n      // determine which property to use for transitions\r\n      slider.animProp = slider.settings.mode === 'vertical' ? 'top' : 'left';\r\n      // determine if hardware acceleration can be used\r\n      slider.usingCSS = slider.settings.useCSS && slider.settings.mode !== 'fade' && (function() {\r\n        // create our test div element\r\n        var div = document.createElement('div'),\r\n        // css transition properties\r\n        props = ['WebkitPerspective', 'MozPerspective', 'OPerspective', 'msPerspective'];\r\n        // test for each property\r\n        for (var i = 0; i < props.length; i++) {\r\n          if (div.style[props[i]] !== undefined) {\r\n            slider.cssPrefix = props[i].replace('Perspective', '').toLowerCase();\r\n            slider.animProp = '-' + slider.cssPrefix + '-transform';\r\n            return true;\r\n          }\r\n        }\r\n        return false;\r\n      }());\r\n      // if vertical mode always make maxSlides and minSlides equal\r\n      if (slider.settings.mode === 'vertical') { slider.settings.maxSlides = slider.settings.minSlides; }\r\n      // save original style data\r\n      el.data('origStyle', el.attr('style'));\r\n      el.children(slider.settings.slideSelector).each(function() {\r\n        $(this).data('origStyle', $(this).attr('style'));\r\n      });\r\n\r\n      // perform all DOM / CSS modifications\r\n      setup();\r\n    };\r\n\r\n    /**\r\n     * Performs all DOM and CSS modifications\r\n     */\r\n    var setup = function() {\r\n      var preloadSelector = slider.children.eq(slider.settings.startSlide); // set the default preload selector (visible)\r\n\r\n      // wrap el in a wrapper\r\n      el.wrap('<div class=\"' + slider.settings.wrapperClass + '\"><div class=\"bx-viewport\"></div></div>');\r\n      // store a namespace reference to .bx-viewport\r\n      slider.viewport = el.parent();\r\n\r\n      // add aria-live if the setting is enabled and ticker mode is disabled\r\n      if (slider.settings.ariaLive && !slider.settings.ticker) {\r\n        slider.viewport.attr('aria-live', 'polite');\r\n      }\r\n      // add a loading div to display while images are loading\r\n      slider.loader = $('<div class=\"bx-loading\" />');\r\n      slider.viewport.prepend(slider.loader);\r\n      // set el to a massive width, to hold any needed slides\r\n      // also strip any margin and padding from el\r\n      el.css({\r\n        width: slider.settings.mode === 'horizontal' ? (slider.children.length * 1000 + 215) + '%' : 'auto',\r\n        position: 'relative'\r\n      });\r\n      // if using CSS, add the easing property\r\n      if (slider.usingCSS && slider.settings.easing) {\r\n        el.css('-' + slider.cssPrefix + '-transition-timing-function', slider.settings.easing);\r\n      // if not using CSS and no easing value was supplied, use the default JS animation easing (swing)\r\n      } else if (!slider.settings.easing) {\r\n        slider.settings.easing = 'swing';\r\n      }\r\n      // make modifications to the viewport (.bx-viewport)\r\n      slider.viewport.css({\r\n        width: '100%',\r\n        overflow: 'hidden',\r\n        position: 'relative'\r\n      });\r\n      slider.viewport.parent().css({\r\n        maxWidth: getViewportMaxWidth()\r\n      });\r\n      // apply css to all slider children\r\n      slider.children.css({\r\n        float: slider.settings.mode === 'horizontal' ? 'left' : 'none',\r\n        listStyle: 'none',\r\n        position: 'relative'\r\n      });\r\n      // apply the calculated width after the float is applied to prevent scrollbar interference\r\n      slider.children.css('width', getSlideWidth());\r\n      // if slideMargin is supplied, add the css\r\n      if (slider.settings.mode === 'horizontal' && slider.settings.slideMargin > 0) { slider.children.css('marginRight', slider.settings.slideMargin); }\r\n      if (slider.settings.mode === 'vertical' && slider.settings.slideMargin > 0) { slider.children.css('marginBottom', slider.settings.slideMargin); }\r\n      // if \"fade\" mode, add positioning and z-index CSS\r\n      if (slider.settings.mode === 'fade') {\r\n        slider.children.css({\r\n          position: 'absolute',\r\n          zIndex: 0,\r\n          display: 'none'\r\n        });\r\n        // prepare the z-index on the showing element\r\n        slider.children.eq(slider.settings.startSlide).css({zIndex: slider.settings.slideZIndex, display: 'block'});\r\n      }\r\n      // create an element to contain all slider controls (pager, start / stop, etc)\r\n      slider.controls.el = $('<div class=\"bx-controls\" />');\r\n      // if captions are requested, add them\r\n      if (slider.settings.captions) { appendCaptions(); }\r\n      // check if startSlide is last slide\r\n      slider.active.last = slider.settings.startSlide === getPagerQty() - 1;\r\n      // if video is true, set up the fitVids plugin\r\n      if (slider.settings.video) { el.fitVids(); }\r\n      if (slider.settings.preloadImages === 'all' || slider.settings.ticker) { preloadSelector = slider.children; }\r\n      // only check for control addition if not in \"ticker\" mode\r\n      if (!slider.settings.ticker) {\r\n        // if controls are requested, add them\r\n        if (slider.settings.controls) { appendControls(); }\r\n        // if auto is true, and auto controls are requested, add them\r\n        if (slider.settings.auto && slider.settings.autoControls) { appendControlsAuto(); }\r\n        // if pager is requested, add it\r\n        if (slider.settings.pager) { appendPager(); }\r\n        // if any control option is requested, add the controls wrapper\r\n        if (slider.settings.controls || slider.settings.autoControls || slider.settings.pager) { slider.viewport.after(slider.controls.el); }\r\n      // if ticker mode, do not allow a pager\r\n      } else {\r\n        slider.settings.pager = false;\r\n      }\r\n      loadElements(preloadSelector, start);\r\n    };\r\n\r\n    var loadElements = function(selector, callback) {\r\n      var total = selector.find('img:not([src=\"\"]), iframe').length,\r\n      count = 0;\r\n      if (total === 0) {\r\n        callback();\r\n        return;\r\n      }\r\n      selector.find('img:not([src=\"\"]), iframe').each(function() {\r\n        $(this).one('load error', function() {\r\n          if (++count === total) { callback(); }\r\n        }).each(function() {\r\n          if (this.complete) { $(this).trigger('load'); }\r\n        });\r\n      });\r\n    };\r\n\r\n    /**\r\n     * Start the slider\r\n     */\r\n    var start = function() {\r\n      // if infinite loop, prepare additional slides\r\n      if (slider.settings.infiniteLoop && slider.settings.mode !== 'fade' && !slider.settings.ticker) {\r\n        var slice    = slider.settings.mode === 'vertical' ? slider.settings.minSlides : slider.settings.maxSlides,\r\n        sliceAppend  = slider.children.slice(0, slice).clone(true).addClass('bx-clone'),\r\n        slicePrepend = slider.children.slice(-slice).clone(true).addClass('bx-clone');\r\n        if (slider.settings.ariaHidden) {\r\n          sliceAppend.attr('aria-hidden', true);\r\n          slicePrepend.attr('aria-hidden', true);\r\n        }\r\n        el.append(sliceAppend).prepend(slicePrepend);\r\n      }\r\n      // remove the loading DOM element\r\n      slider.loader.remove();\r\n      // set the left / top position of \"el\"\r\n      setSlidePosition();\r\n      // if \"vertical\" mode, always use adaptiveHeight to prevent odd behavior\r\n      if (slider.settings.mode === 'vertical') { slider.settings.adaptiveHeight = true; }\r\n      // set the viewport height\r\n      slider.viewport.height(getViewportHeight());\r\n      // make sure everything is positioned just right (same as a window resize)\r\n      el.redrawSlider();\r\n      // onSliderLoad callback\r\n      slider.settings.onSliderLoad.call(el, slider.active.index);\r\n      // slider has been fully initialized\r\n      slider.initialized = true;\r\n      // bind the resize call to the window\r\n      if (slider.settings.responsive) { $(window).bind('resize', resizeWindow); }\r\n      // if auto is true and has more than 1 page, start the show\r\n      if (slider.settings.auto && slider.settings.autoStart && (getPagerQty() > 1 || slider.settings.autoSlideForOnePage)) { initAuto(); }\r\n      // if ticker is true, start the ticker\r\n      if (slider.settings.ticker) { initTicker(); }\r\n      // if pager is requested, make the appropriate pager link active\r\n      if (slider.settings.pager) { updatePagerActive(slider.settings.startSlide); }\r\n      // check for any updates to the controls (like hideControlOnEnd updates)\r\n      if (slider.settings.controls) { updateDirectionControls(); }\r\n      // if touchEnabled is true, setup the touch events\r\n      if (slider.settings.touchEnabled && !slider.settings.ticker) { initTouch(); }\r\n      // if keyboardEnabled is true, setup the keyboard events\r\n      if (slider.settings.keyboardEnabled && !slider.settings.ticker) {\r\n        $(document).keydown(keyPress);\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Returns the calculated height of the viewport, used to determine either adaptiveHeight or the maxHeight value\r\n     */\r\n    var getViewportHeight = function() {\r\n      var height = 0;\r\n      // first determine which children (slides) should be used in our height calculation\r\n      var children = $();\r\n      // if mode is not \"vertical\" and adaptiveHeight is false, include all children\r\n      if (slider.settings.mode !== 'vertical' && !slider.settings.adaptiveHeight) {\r\n        children = slider.children;\r\n      } else {\r\n        // if not carousel, return the single active child\r\n        if (!slider.carousel) {\r\n          children = slider.children.eq(slider.active.index);\r\n        // if carousel, return a slice of children\r\n        } else {\r\n          // get the individual slide index\r\n          var currentIndex = slider.settings.moveSlides === 1 ? slider.active.index : slider.active.index * getMoveBy();\r\n          // add the current slide to the children\r\n          children = slider.children.eq(currentIndex);\r\n          // cycle through the remaining \"showing\" slides\r\n          for (i = 1; i <= slider.settings.maxSlides - 1; i++) {\r\n            // if looped back to the start\r\n            if (currentIndex + i >= slider.children.length) {\r\n              children = children.add(slider.children.eq(i - 1));\r\n            } else {\r\n              children = children.add(slider.children.eq(currentIndex + i));\r\n            }\r\n          }\r\n        }\r\n      }\r\n      // if \"vertical\" mode, calculate the sum of the heights of the children\r\n      if (slider.settings.mode === 'vertical') {\r\n        children.each(function(index) {\r\n          height += $(this).outerHeight();\r\n        });\r\n        // add user-supplied margins\r\n        if (slider.settings.slideMargin > 0) {\r\n          height += slider.settings.slideMargin * (slider.settings.minSlides - 1);\r\n        }\r\n      // if not \"vertical\" mode, calculate the max height of the children\r\n      } else {\r\n        height = Math.max.apply(Math, children.map(function() {\r\n          return $(this).outerHeight(false);\r\n        }).get());\r\n      }\r\n\r\n      if (slider.viewport.css('box-sizing') === 'border-box') {\r\n        height += parseFloat(slider.viewport.css('padding-top')) + parseFloat(slider.viewport.css('padding-bottom')) +\r\n              parseFloat(slider.viewport.css('border-top-width')) + parseFloat(slider.viewport.css('border-bottom-width'));\r\n      } else if (slider.viewport.css('box-sizing') === 'padding-box') {\r\n        height += parseFloat(slider.viewport.css('padding-top')) + parseFloat(slider.viewport.css('padding-bottom'));\r\n      }\r\n\r\n      return height;\r\n    };\r\n\r\n    /**\r\n     * Returns the calculated width to be used for the outer wrapper / viewport\r\n     */\r\n    var getViewportMaxWidth = function() {\r\n      var width = '100%';\r\n      if (slider.settings.slideWidth > 0) {\r\n        if (slider.settings.mode === 'horizontal') {\r\n          width = (slider.settings.maxSlides * slider.settings.slideWidth) + ((slider.settings.maxSlides - 1) * slider.settings.slideMargin);\r\n        } else {\r\n          width = slider.settings.slideWidth;\r\n        }\r\n      }\r\n      return width;\r\n    };\r\n\r\n    /**\r\n     * Returns the calculated width to be applied to each slide\r\n     */\r\n    var getSlideWidth = function() {\r\n      var newElWidth = slider.settings.slideWidth, // start with any user-supplied slide width\r\n      wrapWidth      = slider.viewport.width();    // get the current viewport width\r\n      // if slide width was not supplied, or is larger than the viewport use the viewport width\r\n      if (slider.settings.slideWidth === 0 ||\r\n        (slider.settings.slideWidth > wrapWidth && !slider.carousel) ||\r\n        slider.settings.mode === 'vertical') {\r\n        newElWidth = wrapWidth;\r\n      // if carousel, use the thresholds to determine the width\r\n      } else if (slider.settings.maxSlides > 1 && slider.settings.mode === 'horizontal') {\r\n        if (wrapWidth > slider.maxThreshold) {\r\n          return newElWidth;\r\n        } else if (wrapWidth < slider.minThreshold) {\r\n          newElWidth = (wrapWidth - (slider.settings.slideMargin * (slider.settings.minSlides - 1))) / slider.settings.minSlides;\r\n        } else if (slider.settings.shrinkItems) {\r\n          newElWidth = Math.floor((wrapWidth + slider.settings.slideMargin) / (Math.ceil((wrapWidth + slider.settings.slideMargin) / (newElWidth + slider.settings.slideMargin))) - slider.settings.slideMargin);\r\n        }\r\n      }\r\n      return newElWidth;\r\n    };\r\n\r\n    /**\r\n     * Returns the number of slides currently visible in the viewport (includes partially visible slides)\r\n     */\r\n    var getNumberSlidesShowing = function() {\r\n      var slidesShowing = 1,\r\n      childWidth = null;\r\n      if (slider.settings.mode === 'horizontal' && slider.settings.slideWidth > 0) {\r\n        // if viewport is smaller than minThreshold, return minSlides\r\n        if (slider.viewport.width() < slider.minThreshold) {\r\n          slidesShowing = slider.settings.minSlides;\r\n        // if viewport is larger than maxThreshold, return maxSlides\r\n        } else if (slider.viewport.width() > slider.maxThreshold) {\r\n          slidesShowing = slider.settings.maxSlides;\r\n        // if viewport is between min / max thresholds, divide viewport width by first child width\r\n        } else {\r\n          childWidth = slider.children.first().width() + slider.settings.slideMargin;\r\n          slidesShowing = Math.floor((slider.viewport.width() +\r\n            slider.settings.slideMargin) / childWidth);\r\n        }\r\n      // if \"vertical\" mode, slides showing will always be minSlides\r\n      } else if (slider.settings.mode === 'vertical') {\r\n        slidesShowing = slider.settings.minSlides;\r\n      }\r\n      return slidesShowing;\r\n    };\r\n\r\n    /**\r\n     * Returns the number of pages (one full viewport of slides is one \"page\")\r\n     */\r\n    var getPagerQty = function() {\r\n      var pagerQty = 0,\r\n      breakPoint = 0,\r\n      counter = 0;\r\n      // if moveSlides is specified by the user\r\n      if (slider.settings.moveSlides > 0) {\r\n        if (slider.settings.infiniteLoop) {\r\n          pagerQty = Math.ceil(slider.children.length / getMoveBy());\r\n        } else {\r\n          // when breakpoint goes above children length, counter is the number of pages\r\n          while (breakPoint < slider.children.length) {\r\n            ++pagerQty;\r\n            breakPoint = counter + getNumberSlidesShowing();\r\n            counter += slider.settings.moveSlides <= getNumberSlidesShowing() ? slider.settings.moveSlides : getNumberSlidesShowing();\r\n          }\r\n        }\r\n      // if moveSlides is 0 (auto) divide children length by sides showing, then round up\r\n      } else {\r\n        pagerQty = Math.ceil(slider.children.length / getNumberSlidesShowing());\r\n      }\r\n      return pagerQty;\r\n    };\r\n\r\n    /**\r\n     * Returns the number of individual slides by which to shift the slider\r\n     */\r\n    var getMoveBy = function() {\r\n      // if moveSlides was set by the user and moveSlides is less than number of slides showing\r\n      if (slider.settings.moveSlides > 0 && slider.settings.moveSlides <= getNumberSlidesShowing()) {\r\n        return slider.settings.moveSlides;\r\n      }\r\n      // if moveSlides is 0 (auto)\r\n      return getNumberSlidesShowing();\r\n    };\r\n\r\n    /**\r\n     * Sets the slider's (el) left or top position\r\n     */\r\n    var setSlidePosition = function() {\r\n      var position, lastChild, lastShowingIndex;\r\n      // if last slide, not infinite loop, and number of children is larger than specified maxSlides\r\n      if (slider.children.length > slider.settings.maxSlides && slider.active.last && !slider.settings.infiniteLoop) {\r\n        if (slider.settings.mode === 'horizontal') {\r\n          // get the last child's position\r\n          lastChild = slider.children.last();\r\n          position = lastChild.position();\r\n          // set the left position\r\n          setPositionProperty(-(position.left - (slider.viewport.width() - lastChild.outerWidth())), 'reset', 0);\r\n        } else if (slider.settings.mode === 'vertical') {\r\n          // get the last showing index's position\r\n          lastShowingIndex = slider.children.length - slider.settings.minSlides;\r\n          position = slider.children.eq(lastShowingIndex).position();\r\n          // set the top position\r\n          setPositionProperty(-position.top, 'reset', 0);\r\n        }\r\n      // if not last slide\r\n      } else {\r\n        // get the position of the first showing slide\r\n        position = slider.children.eq(slider.active.index * getMoveBy()).position();\r\n        // check for last slide\r\n        if (slider.active.index === getPagerQty() - 1) { slider.active.last = true; }\r\n        // set the respective position\r\n        if (position !== undefined) {\r\n          if (slider.settings.mode === 'horizontal') { setPositionProperty(-position.left, 'reset', 0); }\r\n          else if (slider.settings.mode === 'vertical') { setPositionProperty(-position.top, 'reset', 0); }\r\n        }\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Sets the el's animating property position (which in turn will sometimes animate el).\r\n     * If using CSS, sets the transform property. If not using CSS, sets the top / left property.\r\n     *\r\n     * @param value (int)\r\n     *  - the animating property's value\r\n     *\r\n     * @param type (string) 'slide', 'reset', 'ticker'\r\n     *  - the type of instance for which the function is being\r\n     *\r\n     * @param duration (int)\r\n     *  - the amount of time (in ms) the transition should occupy\r\n     *\r\n     * @param params (array) optional\r\n     *  - an optional parameter containing any variables that need to be passed in\r\n     */\r\n    var setPositionProperty = function(value, type, duration, params) {\r\n      var animateObj, propValue;\r\n      // use CSS transform\r\n      if (slider.usingCSS) {\r\n        // determine the translate3d value\r\n        propValue = slider.settings.mode === 'vertical' ? 'translate3d(0, ' + value + 'px, 0)' : 'translate3d(' + value + 'px, 0, 0)';\r\n        // add the CSS transition-duration\r\n        el.css('-' + slider.cssPrefix + '-transition-duration', duration / 1000 + 's');\r\n        if (type === 'slide') {\r\n          // set the property value\r\n          el.css(slider.animProp, propValue);\r\n          if (duration !== 0) {\r\n            // bind a callback method - executes when CSS transition completes\r\n            el.bind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function(e) {\r\n              //make sure it's the correct one\r\n              if (!$(e.target).is(el)) { return; }\r\n              // unbind the callback\r\n              el.unbind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');\r\n              updateAfterSlideTransition();\r\n            });\r\n          } else { //duration = 0\r\n            updateAfterSlideTransition();\r\n          }\r\n        } else if (type === 'reset') {\r\n          el.css(slider.animProp, propValue);\r\n        } else if (type === 'ticker') {\r\n          // make the transition use 'linear'\r\n          el.css('-' + slider.cssPrefix + '-transition-timing-function', 'linear');\r\n          el.css(slider.animProp, propValue);\r\n          if (duration !== 0) {\r\n            el.bind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function(e) {\r\n              //make sure it's the correct one\r\n              if (!$(e.target).is(el)) { return; }\r\n              // unbind the callback\r\n              el.unbind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');\r\n              // reset the position\r\n              setPositionProperty(params.resetValue, 'reset', 0);\r\n              // start the loop again\r\n              tickerLoop();\r\n            });\r\n          } else { //duration = 0\r\n            setPositionProperty(params.resetValue, 'reset', 0);\r\n            tickerLoop();\r\n          }\r\n        }\r\n      // use JS animate\r\n      } else {\r\n        animateObj = {};\r\n        animateObj[slider.animProp] = value;\r\n        if (type === 'slide') {\r\n          el.animate(animateObj, duration, slider.settings.easing, function() {\r\n            updateAfterSlideTransition();\r\n          });\r\n        } else if (type === 'reset') {\r\n          el.css(slider.animProp, value);\r\n        } else if (type === 'ticker') {\r\n          el.animate(animateObj, duration, 'linear', function() {\r\n            setPositionProperty(params.resetValue, 'reset', 0);\r\n            // run the recursive loop after animation\r\n            tickerLoop();\r\n          });\r\n        }\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Populates the pager with proper amount of pages\r\n     */\r\n    var populatePager = function() {\r\n      var pagerHtml = '',\r\n      linkContent = '',\r\n      pagerQty = getPagerQty();\r\n      // loop through each pager item\r\n      for (var i = 0; i < pagerQty; i++) {\r\n        linkContent = '';\r\n        // if a buildPager function is supplied, use it to get pager link value, else use index + 1\r\n        if (slider.settings.buildPager && $.isFunction(slider.settings.buildPager) || slider.settings.pagerCustom) {\r\n          linkContent = slider.settings.buildPager(i);\r\n          slider.pagerEl.addClass('bx-custom-pager');\r\n        } else {\r\n          linkContent = i + 1;\r\n          slider.pagerEl.addClass('bx-default-pager');\r\n        }\r\n        // var linkContent = slider.settings.buildPager && $.isFunction(slider.settings.buildPager) ? slider.settings.buildPager(i) : i + 1;\r\n        // add the markup to the string\r\n        pagerHtml += '<div class=\"bx-pager-item\"><a href=\"\" data-slide-index=\"' + i + '\" class=\"bx-pager-link\">' + linkContent + '</a></div>';\r\n      }\r\n      // populate the pager element with pager links\r\n      slider.pagerEl.html(pagerHtml);\r\n    };\r\n\r\n    /**\r\n     * Appends the pager to the controls element\r\n     */\r\n    var appendPager = function() {\r\n      if (!slider.settings.pagerCustom) {\r\n        // create the pager DOM element\r\n        slider.pagerEl = $('<div class=\"bx-pager\" />');\r\n        // if a pager selector was supplied, populate it with the pager\r\n        if (slider.settings.pagerSelector) {\r\n          $(slider.settings.pagerSelector).html(slider.pagerEl);\r\n        // if no pager selector was supplied, add it after the wrapper\r\n        } else {\r\n          slider.controls.el.addClass('bx-has-pager').append(slider.pagerEl);\r\n        }\r\n        // populate the pager\r\n        populatePager();\r\n      } else {\r\n        slider.pagerEl = $(slider.settings.pagerCustom);\r\n      }\r\n      // assign the pager click binding\r\n      slider.pagerEl.on('click touchend', 'a', clickPagerBind);\r\n    };\r\n\r\n    /**\r\n     * Appends prev / next controls to the controls element\r\n     */\r\n    var appendControls = function() {\r\n      slider.controls.next = $('<a class=\"bx-next\" href=\"\">' + slider.settings.nextText + '</a>');\r\n      slider.controls.prev = $('<a class=\"bx-prev\" href=\"\">' + slider.settings.prevText + '</a>');\r\n      // bind click actions to the controls\r\n      slider.controls.next.bind('click touchend', clickNextBind);\r\n      slider.controls.prev.bind('click touchend', clickPrevBind);\r\n      // if nextSelector was supplied, populate it\r\n      if (slider.settings.nextSelector) {\r\n        $(slider.settings.nextSelector).append(slider.controls.next);\r\n      }\r\n      // if prevSelector was supplied, populate it\r\n      if (slider.settings.prevSelector) {\r\n        $(slider.settings.prevSelector).append(slider.controls.prev);\r\n      }\r\n      // if no custom selectors were supplied\r\n      if (!slider.settings.nextSelector && !slider.settings.prevSelector) {\r\n        // add the controls to the DOM\r\n        slider.controls.directionEl = $('<div class=\"bx-controls-direction\" />');\r\n        // add the control elements to the directionEl\r\n        slider.controls.directionEl.append(slider.controls.prev).append(slider.controls.next);\r\n        // slider.viewport.append(slider.controls.directionEl);\r\n        slider.controls.el.addClass('bx-has-controls-direction').append(slider.controls.directionEl);\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Appends start / stop auto controls to the controls element\r\n     */\r\n    var appendControlsAuto = function() {\r\n      slider.controls.start = $('<div class=\"bx-controls-auto-item\"><a class=\"bx-start\" href=\"\">' + slider.settings.startText + '</a></div>');\r\n      slider.controls.stop = $('<div class=\"bx-controls-auto-item\"><a class=\"bx-stop\" href=\"\">' + slider.settings.stopText + '</a></div>');\r\n      // add the controls to the DOM\r\n      slider.controls.autoEl = $('<div class=\"bx-controls-auto\" />');\r\n      // bind click actions to the controls\r\n      slider.controls.autoEl.on('click', '.bx-start', clickStartBind);\r\n      slider.controls.autoEl.on('click', '.bx-stop', clickStopBind);\r\n      // if autoControlsCombine, insert only the \"start\" control\r\n      if (slider.settings.autoControlsCombine) {\r\n        slider.controls.autoEl.append(slider.controls.start);\r\n      // if autoControlsCombine is false, insert both controls\r\n      } else {\r\n        slider.controls.autoEl.append(slider.controls.start).append(slider.controls.stop);\r\n      }\r\n      // if auto controls selector was supplied, populate it with the controls\r\n      if (slider.settings.autoControlsSelector) {\r\n        $(slider.settings.autoControlsSelector).html(slider.controls.autoEl);\r\n      // if auto controls selector was not supplied, add it after the wrapper\r\n      } else {\r\n        slider.controls.el.addClass('bx-has-controls-auto').append(slider.controls.autoEl);\r\n      }\r\n      // update the auto controls\r\n      updateAutoControls(slider.settings.autoStart ? 'stop' : 'start');\r\n    };\r\n\r\n    /**\r\n     * Appends image captions to the DOM\r\n     */\r\n    var appendCaptions = function() {\r\n      // cycle through each child\r\n      slider.children.each(function(index) {\r\n        // get the image title attribute\r\n        var title = $(this).find('img:first').attr('title');\r\n        // append the caption\r\n        if (title !== undefined && ('' + title).length) {\r\n          $(this).append('<div class=\"bx-caption\"><span>' + title + '</span></div>');\r\n        }\r\n      });\r\n    };\r\n\r\n    /**\r\n     * Click next binding\r\n     *\r\n     * @param e (event)\r\n     *  - DOM event object\r\n     */\r\n    var clickNextBind = function(e) {\r\n      e.preventDefault();\r\n      if (slider.controls.el.hasClass('disabled')) { return; }\r\n      // if auto show is running, stop it\r\n      if (slider.settings.auto && slider.settings.stopAutoOnClick) { el.stopAuto(); }\r\n      el.goToNextSlide();\r\n    };\r\n\r\n    /**\r\n     * Click prev binding\r\n     *\r\n     * @param e (event)\r\n     *  - DOM event object\r\n     */\r\n    var clickPrevBind = function(e) {\r\n      e.preventDefault();\r\n      if (slider.controls.el.hasClass('disabled')) { return; }\r\n      // if auto show is running, stop it\r\n      if (slider.settings.auto && slider.settings.stopAutoOnClick) { el.stopAuto(); }\r\n      el.goToPrevSlide();\r\n    };\r\n\r\n    /**\r\n     * Click start binding\r\n     *\r\n     * @param e (event)\r\n     *  - DOM event object\r\n     */\r\n    var clickStartBind = function(e) {\r\n      el.startAuto();\r\n      e.preventDefault();\r\n    };\r\n\r\n    /**\r\n     * Click stop binding\r\n     *\r\n     * @param e (event)\r\n     *  - DOM event object\r\n     */\r\n    var clickStopBind = function(e) {\r\n      el.stopAuto();\r\n      e.preventDefault();\r\n    };\r\n\r\n    /**\r\n     * Click pager binding\r\n     *\r\n     * @param e (event)\r\n     *  - DOM event object\r\n     */\r\n    var clickPagerBind = function(e) {\r\n      var pagerLink, pagerIndex;\r\n      e.preventDefault();\r\n      if (slider.controls.el.hasClass('disabled')) {\r\n        return;\r\n      }\r\n      // if auto show is running, stop it\r\n      if (slider.settings.auto  && slider.settings.stopAutoOnClick) { el.stopAuto(); }\r\n      pagerLink = $(e.currentTarget);\r\n      if (pagerLink.attr('data-slide-index') !== undefined) {\r\n        pagerIndex = parseInt(pagerLink.attr('data-slide-index'));\r\n        // if clicked pager link is not active, continue with the goToSlide call\r\n        if (pagerIndex !== slider.active.index) { el.goToSlide(pagerIndex); }\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Updates the pager links with an active class\r\n     *\r\n     * @param slideIndex (int)\r\n     *  - index of slide to make active\r\n     */\r\n    var updatePagerActive = function(slideIndex) {\r\n      // if \"short\" pager type\r\n      var len = slider.children.length; // nb of children\r\n      if (slider.settings.pagerType === 'short') {\r\n        if (slider.settings.maxSlides > 1) {\r\n          len = Math.ceil(slider.children.length / slider.settings.maxSlides);\r\n        }\r\n        slider.pagerEl.html((slideIndex + 1) + slider.settings.pagerShortSeparator + len);\r\n        return;\r\n      }\r\n      // remove all pager active classes\r\n      slider.pagerEl.find('a').removeClass('active');\r\n      // apply the active class for all pagers\r\n      slider.pagerEl.each(function(i, el) { $(el).find('a').eq(slideIndex).addClass('active'); });\r\n    };\r\n\r\n    /**\r\n     * Performs needed actions after a slide transition\r\n     */\r\n    var updateAfterSlideTransition = function() {\r\n      // if infinite loop is true\r\n      if (slider.settings.infiniteLoop) {\r\n        var position = '';\r\n        // first slide\r\n        if (slider.active.index === 0) {\r\n          // set the new position\r\n          position = slider.children.eq(0).position();\r\n        // carousel, last slide\r\n        } else if (slider.active.index === getPagerQty() - 1 && slider.carousel) {\r\n          position = slider.children.eq((getPagerQty() - 1) * getMoveBy()).position();\r\n        // last slide\r\n        } else if (slider.active.index === slider.children.length - 1) {\r\n          position = slider.children.eq(slider.children.length - 1).position();\r\n        }\r\n        if (position) {\r\n          if (slider.settings.mode === 'horizontal') { setPositionProperty(-position.left, 'reset', 0); }\r\n          else if (slider.settings.mode === 'vertical') { setPositionProperty(-position.top, 'reset', 0); }\r\n        }\r\n      }\r\n      // declare that the transition is complete\r\n      slider.working = false;\r\n      // onSlideAfter callback\r\n      slider.settings.onSlideAfter.call(el, slider.children.eq(slider.active.index), slider.oldIndex, slider.active.index);\r\n    };\r\n\r\n    /**\r\n     * Updates the auto controls state (either active, or combined switch)\r\n     *\r\n     * @param state (string) \"start\", \"stop\"\r\n     *  - the new state of the auto show\r\n     */\r\n    var updateAutoControls = function(state) {\r\n      // if autoControlsCombine is true, replace the current control with the new state\r\n      if (slider.settings.autoControlsCombine) {\r\n        slider.controls.autoEl.html(slider.controls[state]);\r\n      // if autoControlsCombine is false, apply the \"active\" class to the appropriate control\r\n      } else {\r\n        slider.controls.autoEl.find('a').removeClass('active');\r\n        slider.controls.autoEl.find('a:not(.bx-' + state + ')').addClass('active');\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Updates the direction controls (checks if either should be hidden)\r\n     */\r\n    var updateDirectionControls = function() {\r\n      if (getPagerQty() === 1) {\r\n        slider.controls.prev.addClass('disabled');\r\n        slider.controls.next.addClass('disabled');\r\n      } else if (!slider.settings.infiniteLoop && slider.settings.hideControlOnEnd) {\r\n        // if first slide\r\n        if (slider.active.index === 0) {\r\n          slider.controls.prev.addClass('disabled');\r\n          slider.controls.next.removeClass('disabled');\r\n        // if last slide\r\n        } else if (slider.active.index === getPagerQty() - 1) {\r\n          slider.controls.next.addClass('disabled');\r\n          slider.controls.prev.removeClass('disabled');\r\n        // if any slide in the middle\r\n        } else {\r\n          slider.controls.prev.removeClass('disabled');\r\n          slider.controls.next.removeClass('disabled');\r\n        }\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Initializes the auto process\r\n     */\r\n    var initAuto = function() {\r\n      // if autoDelay was supplied, launch the auto show using a setTimeout() call\r\n      if (slider.settings.autoDelay > 0) {\r\n        var timeout = setTimeout(el.startAuto, slider.settings.autoDelay);\r\n      // if autoDelay was not supplied, start the auto show normally\r\n      } else {\r\n        el.startAuto();\r\n\r\n        //add focus and blur events to ensure its running if timeout gets paused\r\n        $(window).focus(function() {\r\n          el.startAuto();\r\n        }).blur(function() {\r\n          el.stopAuto();\r\n        });\r\n      }\r\n      // if autoHover is requested\r\n      if (slider.settings.autoHover) {\r\n        // on el hover\r\n        el.hover(function() {\r\n          // if the auto show is currently playing (has an active interval)\r\n          if (slider.interval) {\r\n            // stop the auto show and pass true argument which will prevent control update\r\n            el.stopAuto(true);\r\n            // create a new autoPaused value which will be used by the relative \"mouseout\" event\r\n            slider.autoPaused = true;\r\n          }\r\n        }, function() {\r\n          // if the autoPaused value was created be the prior \"mouseover\" event\r\n          if (slider.autoPaused) {\r\n            // start the auto show and pass true argument which will prevent control update\r\n            el.startAuto(true);\r\n            // reset the autoPaused value\r\n            slider.autoPaused = null;\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Initializes the ticker process\r\n     */\r\n    var initTicker = function() {\r\n      var startPosition = 0,\r\n      position, transform, value, idx, ratio, property, newSpeed, totalDimens;\r\n      // if autoDirection is \"next\", append a clone of the entire slider\r\n      if (slider.settings.autoDirection === 'next') {\r\n        el.append(slider.children.clone().addClass('bx-clone'));\r\n      // if autoDirection is \"prev\", prepend a clone of the entire slider, and set the left position\r\n      } else {\r\n        el.prepend(slider.children.clone().addClass('bx-clone'));\r\n        position = slider.children.first().position();\r\n        startPosition = slider.settings.mode === 'horizontal' ? -position.left : -position.top;\r\n      }\r\n      setPositionProperty(startPosition, 'reset', 0);\r\n      // do not allow controls in ticker mode\r\n      slider.settings.pager = false;\r\n      slider.settings.controls = false;\r\n      slider.settings.autoControls = false;\r\n      // if autoHover is requested\r\n      if (slider.settings.tickerHover) {\r\n        if (slider.usingCSS) {\r\n          idx = slider.settings.mode === 'horizontal' ? 4 : 5;\r\n          slider.viewport.hover(function() {\r\n            transform = el.css('-' + slider.cssPrefix + '-transform');\r\n            value = parseFloat(transform.split(',')[idx]);\r\n            setPositionProperty(value, 'reset', 0);\r\n          }, function() {\r\n            totalDimens = 0;\r\n            slider.children.each(function(index) {\r\n              totalDimens += slider.settings.mode === 'horizontal' ? $(this).outerWidth(true) : $(this).outerHeight(true);\r\n            });\r\n            // calculate the speed ratio (used to determine the new speed to finish the paused animation)\r\n            ratio = slider.settings.speed / totalDimens;\r\n            // determine which property to use\r\n            property = slider.settings.mode === 'horizontal' ? 'left' : 'top';\r\n            // calculate the new speed\r\n            newSpeed = ratio * (totalDimens - (Math.abs(parseInt(value))));\r\n            tickerLoop(newSpeed);\r\n          });\r\n        } else {\r\n          // on el hover\r\n          slider.viewport.hover(function() {\r\n            el.stop();\r\n          }, function() {\r\n            // calculate the total width of children (used to calculate the speed ratio)\r\n            totalDimens = 0;\r\n            slider.children.each(function(index) {\r\n              totalDimens += slider.settings.mode === 'horizontal' ? $(this).outerWidth(true) : $(this).outerHeight(true);\r\n            });\r\n            // calculate the speed ratio (used to determine the new speed to finish the paused animation)\r\n            ratio = slider.settings.speed / totalDimens;\r\n            // determine which property to use\r\n            property = slider.settings.mode === 'horizontal' ? 'left' : 'top';\r\n            // calculate the new speed\r\n            newSpeed = ratio * (totalDimens - (Math.abs(parseInt(el.css(property)))));\r\n            tickerLoop(newSpeed);\r\n          });\r\n        }\r\n      }\r\n      // start the ticker loop\r\n      tickerLoop();\r\n    };\r\n\r\n    /**\r\n     * Runs a continuous loop, news ticker-style\r\n     */\r\n    var tickerLoop = function(resumeSpeed) {\r\n      var speed = resumeSpeed ? resumeSpeed : slider.settings.speed,\r\n      position = {left: 0, top: 0},\r\n      reset = {left: 0, top: 0},\r\n      animateProperty, resetValue, params;\r\n\r\n      // if \"next\" animate left position to last child, then reset left to 0\r\n      if (slider.settings.autoDirection === 'next') {\r\n        position = el.find('.bx-clone').first().position();\r\n      // if \"prev\" animate left position to 0, then reset left to first non-clone child\r\n      } else {\r\n        reset = slider.children.first().position();\r\n      }\r\n      animateProperty = slider.settings.mode === 'horizontal' ? -position.left : -position.top;\r\n      resetValue = slider.settings.mode === 'horizontal' ? -reset.left : -reset.top;\r\n      params = {resetValue: resetValue};\r\n      setPositionProperty(animateProperty, 'ticker', speed, params);\r\n    };\r\n\r\n    /**\r\n     * Check if el is on screen\r\n     */\r\n    var isOnScreen = function(el) {\r\n      var win = $(window),\r\n      viewport = {\r\n        top: win.scrollTop(),\r\n        left: win.scrollLeft()\r\n      },\r\n      bounds = el.offset();\r\n\r\n      viewport.right = viewport.left + win.width();\r\n      viewport.bottom = viewport.top + win.height();\r\n      bounds.right = bounds.left + el.outerWidth();\r\n      bounds.bottom = bounds.top + el.outerHeight();\r\n\r\n      return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));\r\n    };\r\n\r\n    /**\r\n     * Initializes keyboard events\r\n     */\r\n    var keyPress = function(e) {\r\n      var activeElementTag = document.activeElement.tagName.toLowerCase(),\r\n      tagFilters = 'input|textarea',\r\n      p = new RegExp(activeElementTag,['i']),\r\n      result = p.exec(tagFilters);\r\n\r\n      if (result == null && isOnScreen(el)) {\r\n        if (e.keyCode === 39) {\r\n          clickNextBind(e);\r\n          return false;\r\n        } else if (e.keyCode === 37) {\r\n          clickPrevBind(e);\r\n          return false;\r\n        }\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Initializes touch events\r\n     */\r\n    var initTouch = function() {\r\n      // initialize object to contain all touch values\r\n      slider.touch = {\r\n        start: {x: 0, y: 0},\r\n        end: {x: 0, y: 0}\r\n      };\r\n      slider.viewport.bind('touchstart MSPointerDown pointerdown', onTouchStart);\r\n\r\n      //for browsers that have implemented pointer events and fire a click after\r\n      //every pointerup regardless of whether pointerup is on same screen location as pointerdown or not\r\n      slider.viewport.on('click', '.bxslider a', function(e) {\r\n        if (slider.viewport.hasClass('click-disabled')) {\r\n          e.preventDefault();\r\n          slider.viewport.removeClass('click-disabled');\r\n        }\r\n      });\r\n    };\r\n\r\n    /**\r\n     * Event handler for \"touchstart\"\r\n     *\r\n     * @param e (event)\r\n     *  - DOM event object\r\n     */\r\n    var onTouchStart = function(e) {\r\n      //disable slider controls while user is interacting with slides to avoid slider freeze that happens on touch devices when a slide swipe happens immediately after interacting with slider controls\r\n      slider.controls.el.addClass('disabled');\r\n\r\n      if (slider.working) {\r\n        e.preventDefault();\r\n        slider.controls.el.removeClass('disabled');\r\n      } else {\r\n        // record the original position when touch starts\r\n        slider.touch.originalPos = el.position();\r\n        var orig = e.originalEvent,\r\n        touchPoints = (typeof orig.changedTouches !== 'undefined') ? orig.changedTouches : [orig];\r\n        // record the starting touch x, y coordinates\r\n        slider.touch.start.x = touchPoints[0].pageX;\r\n        slider.touch.start.y = touchPoints[0].pageY;\r\n\r\n        if (slider.viewport.get(0).setPointerCapture) {\r\n          slider.pointerId = orig.pointerId;\r\n          slider.viewport.get(0).setPointerCapture(slider.pointerId);\r\n        }\r\n        // bind a \"touchmove\" event to the viewport\r\n        slider.viewport.bind('touchmove MSPointerMove pointermove', onTouchMove);\r\n        // bind a \"touchend\" event to the viewport\r\n        slider.viewport.bind('touchend MSPointerUp pointerup', onTouchEnd);\r\n        slider.viewport.bind('MSPointerCancel pointercancel', onPointerCancel);\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Cancel Pointer for Windows Phone\r\n     *\r\n     * @param e (event)\r\n     *  - DOM event object\r\n     */\r\n    var onPointerCancel = function(e) {\r\n      /* onPointerCancel handler is needed to deal with situations when a touchend\r\n      doesn't fire after a touchstart (this happens on windows phones only) */\r\n      setPositionProperty(slider.touch.originalPos.left, 'reset', 0);\r\n\r\n      //remove handlers\r\n      slider.controls.el.removeClass('disabled');\r\n      slider.viewport.unbind('MSPointerCancel pointercancel', onPointerCancel);\r\n      slider.viewport.unbind('touchmove MSPointerMove pointermove', onTouchMove);\r\n      slider.viewport.unbind('touchend MSPointerUp pointerup', onTouchEnd);\r\n      if (slider.viewport.get(0).releasePointerCapture) {\r\n        slider.viewport.get(0).releasePointerCapture(slider.pointerId);\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Event handler for \"touchmove\"\r\n     *\r\n     * @param e (event)\r\n     *  - DOM event object\r\n     */\r\n    var onTouchMove = function(e) {\r\n      var orig = e.originalEvent,\r\n      touchPoints = (typeof orig.changedTouches !== 'undefined') ? orig.changedTouches : [orig],\r\n      // if scrolling on y axis, do not prevent default\r\n      xMovement = Math.abs(touchPoints[0].pageX - slider.touch.start.x),\r\n      yMovement = Math.abs(touchPoints[0].pageY - slider.touch.start.y),\r\n      value = 0,\r\n      change = 0;\r\n\r\n      // x axis swipe\r\n      if ((xMovement * 3) > yMovement && slider.settings.preventDefaultSwipeX) {\r\n        e.preventDefault();\r\n      // y axis swipe\r\n      } else if ((yMovement * 3) > xMovement && slider.settings.preventDefaultSwipeY) {\r\n        e.preventDefault();\r\n      }\r\n      if (slider.settings.mode !== 'fade' && slider.settings.oneToOneTouch) {\r\n        // if horizontal, drag along x axis\r\n        if (slider.settings.mode === 'horizontal') {\r\n          change = touchPoints[0].pageX - slider.touch.start.x;\r\n          value = slider.touch.originalPos.left + change;\r\n        // if vertical, drag along y axis\r\n        } else {\r\n          change = touchPoints[0].pageY - slider.touch.start.y;\r\n          value = slider.touch.originalPos.top + change;\r\n        }\r\n        setPositionProperty(value, 'reset', 0);\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Event handler for \"touchend\"\r\n     *\r\n     * @param e (event)\r\n     *  - DOM event object\r\n     */\r\n    var onTouchEnd = function(e) {\r\n      slider.viewport.unbind('touchmove MSPointerMove pointermove', onTouchMove);\r\n      //enable slider controls as soon as user stops interacing with slides\r\n      slider.controls.el.removeClass('disabled');\r\n      var orig    = e.originalEvent,\r\n      touchPoints = (typeof orig.changedTouches !== 'undefined') ? orig.changedTouches : [orig],\r\n      value       = 0,\r\n      distance    = 0;\r\n      // record end x, y positions\r\n      slider.touch.end.x = touchPoints[0].pageX;\r\n      slider.touch.end.y = touchPoints[0].pageY;\r\n      // if fade mode, check if absolute x distance clears the threshold\r\n      if (slider.settings.mode === 'fade') {\r\n        distance = Math.abs(slider.touch.start.x - slider.touch.end.x);\r\n        if (distance >= slider.settings.swipeThreshold) {\r\n          if (slider.touch.start.x > slider.touch.end.x) {\r\n            el.goToNextSlide();\r\n          } else {\r\n            el.goToPrevSlide();\r\n          }\r\n          el.stopAuto();\r\n        }\r\n      // not fade mode\r\n      } else {\r\n        // calculate distance and el's animate property\r\n        if (slider.settings.mode === 'horizontal') {\r\n          distance = slider.touch.end.x - slider.touch.start.x;\r\n          value = slider.touch.originalPos.left;\r\n        } else {\r\n          distance = slider.touch.end.y - slider.touch.start.y;\r\n          value = slider.touch.originalPos.top;\r\n        }\r\n        // if not infinite loop and first / last slide, do not attempt a slide transition\r\n        if (!slider.settings.infiniteLoop && ((slider.active.index === 0 && distance > 0) || (slider.active.last && distance < 0))) {\r\n          setPositionProperty(value, 'reset', 200);\r\n        } else {\r\n          // check if distance clears threshold\r\n          if (Math.abs(distance) >= slider.settings.swipeThreshold) {\r\n            if (distance < 0) {\r\n              el.goToNextSlide();\r\n            } else {\r\n              el.goToPrevSlide();\r\n            }\r\n            el.stopAuto();\r\n          } else {\r\n            // el.animate(property, 200);\r\n            setPositionProperty(value, 'reset', 200);\r\n          }\r\n        }\r\n      }\r\n      slider.viewport.unbind('touchend MSPointerUp pointerup', onTouchEnd);\r\n      if (slider.viewport.get(0).releasePointerCapture) {\r\n        slider.viewport.get(0).releasePointerCapture(slider.pointerId);\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Window resize event callback\r\n     */\r\n    var resizeWindow = function(e) {\r\n      // don't do anything if slider isn't initialized.\r\n      if (!slider.initialized) { return; }\r\n      // Delay if slider working.\r\n      if (slider.working) {\r\n        window.setTimeout(resizeWindow, 10);\r\n      } else {\r\n        // get the new window dimens (again, thank you IE)\r\n        var windowWidthNew = $(window).width(),\r\n        windowHeightNew = $(window).height();\r\n        // make sure that it is a true window resize\r\n        // *we must check this because our dinosaur friend IE fires a window resize event when certain DOM elements\r\n        // are resized. Can you just die already?*\r\n        if (windowWidth !== windowWidthNew || windowHeight !== windowHeightNew) {\r\n          // set the new window dimens\r\n          windowWidth = windowWidthNew;\r\n          windowHeight = windowHeightNew;\r\n          // update all dynamic elements\r\n          el.redrawSlider();\r\n          // Call user resize handler\r\n          slider.settings.onSliderResize.call(el, slider.active.index);\r\n        }\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Adds an aria-hidden=true attribute to each element\r\n     *\r\n     * @param startVisibleIndex (int)\r\n     *  - the first visible element's index\r\n     */\r\n    var applyAriaHiddenAttributes = function(startVisibleIndex) {\r\n      var numberOfSlidesShowing = getNumberSlidesShowing();\r\n      // only apply attributes if the setting is enabled and not in ticker mode\r\n      if (slider.settings.ariaHidden && !slider.settings.ticker) {\r\n        // add aria-hidden=true to all elements\r\n        slider.children.attr('aria-hidden', 'true');\r\n        // get the visible elements and change to aria-hidden=false\r\n        slider.children.slice(startVisibleIndex, startVisibleIndex + numberOfSlidesShowing).attr('aria-hidden', 'false');\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Returns index according to present page range\r\n     *\r\n     * @param slideOndex (int)\r\n     *  - the desired slide index\r\n     */\r\n    var setSlideIndex = function(slideIndex) {\r\n      if (slideIndex < 0) {\r\n        if (slider.settings.infiniteLoop) {\r\n          return getPagerQty() - 1;\r\n        }else {\r\n          //we don't go to undefined slides\r\n          return slider.active.index;\r\n        }\r\n      // if slideIndex is greater than children length, set active index to 0 (this happens during infinite loop)\r\n      } else if (slideIndex >= getPagerQty()) {\r\n        if (slider.settings.infiniteLoop) {\r\n          return 0;\r\n        } else {\r\n          //we don't move to undefined pages\r\n          return slider.active.index;\r\n        }\r\n      // set active index to requested slide\r\n      } else {\r\n        return slideIndex;\r\n      }\r\n    };\r\n\r\n    /**\r\n     * ===================================================================================\r\n     * = PUBLIC FUNCTIONS\r\n     * ===================================================================================\r\n     */\r\n\r\n    /**\r\n     * Performs slide transition to the specified slide\r\n     *\r\n     * @param slideIndex (int)\r\n     *  - the destination slide's index (zero-based)\r\n     *\r\n     * @param direction (string)\r\n     *  - INTERNAL USE ONLY - the direction of travel (\"prev\" / \"next\")\r\n     */\r\n    el.goToSlide = function(slideIndex, direction) {\r\n      // onSlideBefore, onSlideNext, onSlidePrev callbacks\r\n      // Allow transition canceling based on returned value\r\n      var performTransition = true,\r\n      moveBy = 0,\r\n      position = {left: 0, top: 0},\r\n      lastChild = null,\r\n      lastShowingIndex, eq, value, requestEl;\r\n      // store the old index\r\n      slider.oldIndex = slider.active.index;\r\n      //set new index\r\n      slider.active.index = setSlideIndex(slideIndex);\r\n\r\n      // if plugin is currently in motion, ignore request\r\n      if (slider.working || slider.active.index === slider.oldIndex) { return; }\r\n      // declare that plugin is in motion\r\n      slider.working = true;\r\n\r\n      performTransition = slider.settings.onSlideBefore.call(el, slider.children.eq(slider.active.index), slider.oldIndex, slider.active.index);\r\n\r\n      // If transitions canceled, reset and return\r\n      if (typeof (performTransition) !== 'undefined' && !performTransition) {\r\n        slider.active.index = slider.oldIndex; // restore old index\r\n        slider.working = false; // is not in motion\r\n        return;\r\n      }\r\n\r\n      if (direction === 'next') {\r\n        // Prevent canceling in future functions or lack there-of from negating previous commands to cancel\r\n        if (!slider.settings.onSlideNext.call(el, slider.children.eq(slider.active.index), slider.oldIndex, slider.active.index)) {\r\n          performTransition = false;\r\n        }\r\n      } else if (direction === 'prev') {\r\n        // Prevent canceling in future functions or lack there-of from negating previous commands to cancel\r\n        if (!slider.settings.onSlidePrev.call(el, slider.children.eq(slider.active.index), slider.oldIndex, slider.active.index)) {\r\n          performTransition = false;\r\n        }\r\n      }\r\n\r\n      // check if last slide\r\n      slider.active.last = slider.active.index >= getPagerQty() - 1;\r\n      // update the pager with active class\r\n      if (slider.settings.pager || slider.settings.pagerCustom) { updatePagerActive(slider.active.index); }\r\n      // // check for direction control update\r\n      if (slider.settings.controls) { updateDirectionControls(); }\r\n      // if slider is set to mode: \"fade\"\r\n      if (slider.settings.mode === 'fade') {\r\n        // if adaptiveHeight is true and next height is different from current height, animate to the new height\r\n        if (slider.settings.adaptiveHeight && slider.viewport.height() !== getViewportHeight()) {\r\n          slider.viewport.animate({height: getViewportHeight()}, slider.settings.adaptiveHeightSpeed);\r\n        }\r\n        // fade out the visible child and reset its z-index value\r\n        slider.children.filter(':visible').fadeOut(slider.settings.speed).css({zIndex: 0});\r\n        // fade in the newly requested slide\r\n        slider.children.eq(slider.active.index).css('zIndex', slider.settings.slideZIndex + 1).fadeIn(slider.settings.speed, function() {\r\n          $(this).css('zIndex', slider.settings.slideZIndex);\r\n          updateAfterSlideTransition();\r\n        });\r\n      // slider mode is not \"fade\"\r\n      } else {\r\n        // if adaptiveHeight is true and next height is different from current height, animate to the new height\r\n        if (slider.settings.adaptiveHeight && slider.viewport.height() !== getViewportHeight()) {\r\n          slider.viewport.animate({height: getViewportHeight()}, slider.settings.adaptiveHeightSpeed);\r\n        }\r\n        // if carousel and not infinite loop\r\n        if (!slider.settings.infiniteLoop && slider.carousel && slider.active.last) {\r\n          if (slider.settings.mode === 'horizontal') {\r\n            // get the last child position\r\n            lastChild = slider.children.eq(slider.children.length - 1);\r\n            position = lastChild.position();\r\n            // calculate the position of the last slide\r\n            moveBy = slider.viewport.width() - lastChild.outerWidth();\r\n          } else {\r\n            // get last showing index position\r\n            lastShowingIndex = slider.children.length - slider.settings.minSlides;\r\n            position = slider.children.eq(lastShowingIndex).position();\r\n          }\r\n          // horizontal carousel, going previous while on first slide (infiniteLoop mode)\r\n        } else if (slider.carousel && slider.active.last && direction === 'prev') {\r\n          // get the last child position\r\n          eq = slider.settings.moveSlides === 1 ? slider.settings.maxSlides - getMoveBy() : ((getPagerQty() - 1) * getMoveBy()) - (slider.children.length - slider.settings.maxSlides);\r\n          lastChild = el.children('.bx-clone').eq(eq);\r\n          position = lastChild.position();\r\n        // if infinite loop and \"Next\" is clicked on the last slide\r\n        } else if (direction === 'next' && slider.active.index === 0) {\r\n          // get the last clone position\r\n          position = el.find('> .bx-clone').eq(slider.settings.maxSlides).position();\r\n          slider.active.last = false;\r\n        // normal non-zero requests\r\n        } else if (slideIndex >= 0) {\r\n          //parseInt is applied to allow floats for slides/page\r\n          requestEl = slideIndex * parseInt(getMoveBy());\r\n          position = slider.children.eq(requestEl).position();\r\n        }\r\n\r\n        /* If the position doesn't exist\r\n         * (e.g. if you destroy the slider on a next click),\r\n         * it doesn't throw an error.\r\n         */\r\n        if (typeof (position) !== 'undefined') {\r\n          value = slider.settings.mode === 'horizontal' ? -(position.left - moveBy) : -position.top;\r\n          // plugin values to be animated\r\n          setPositionProperty(value, 'slide', slider.settings.speed);\r\n        } else {\r\n          slider.working = false;\r\n        }\r\n      }\r\n      if (slider.settings.ariaHidden) { applyAriaHiddenAttributes(slider.active.index * getMoveBy()); }\r\n    };\r\n\r\n    /**\r\n     * Transitions to the next slide in the show\r\n     */\r\n    el.goToNextSlide = function() {\r\n      // if infiniteLoop is false and last page is showing, disregard call\r\n      if (!slider.settings.infiniteLoop && slider.active.last) { return; }\r\n      var pagerIndex = parseInt(slider.active.index) + 1;\r\n      el.goToSlide(pagerIndex, 'next');\r\n    };\r\n\r\n    /**\r\n     * Transitions to the prev slide in the show\r\n     */\r\n    el.goToPrevSlide = function() {\r\n      // if infiniteLoop is false and last page is showing, disregard call\r\n      if (!slider.settings.infiniteLoop && slider.active.index === 0) { return; }\r\n      var pagerIndex = parseInt(slider.active.index) - 1;\r\n      el.goToSlide(pagerIndex, 'prev');\r\n    };\r\n\r\n    /**\r\n     * Starts the auto show\r\n     *\r\n     * @param preventControlUpdate (boolean)\r\n     *  - if true, auto controls state will not be updated\r\n     */\r\n    el.startAuto = function(preventControlUpdate) {\r\n      // if an interval already exists, disregard call\r\n      if (slider.interval) { return; }\r\n      // create an interval\r\n      slider.interval = setInterval(function() {\r\n        if (slider.settings.autoDirection === 'next') {\r\n          el.goToNextSlide();\r\n        } else {\r\n          el.goToPrevSlide();\r\n        }\r\n      }, slider.settings.pause);\r\n      // if auto controls are displayed and preventControlUpdate is not true\r\n      if (slider.settings.autoControls && preventControlUpdate !== true) { updateAutoControls('stop'); }\r\n    };\r\n\r\n    /**\r\n     * Stops the auto show\r\n     *\r\n     * @param preventControlUpdate (boolean)\r\n     *  - if true, auto controls state will not be updated\r\n     */\r\n    el.stopAuto = function(preventControlUpdate) {\r\n      // if no interval exists, disregard call\r\n      if (!slider.interval) { return; }\r\n      // clear the interval\r\n      clearInterval(slider.interval);\r\n      slider.interval = null;\r\n      // if auto controls are displayed and preventControlUpdate is not true\r\n      if (slider.settings.autoControls && preventControlUpdate !== true) { updateAutoControls('start'); }\r\n    };\r\n\r\n    /**\r\n     * Returns current slide index (zero-based)\r\n     */\r\n    el.getCurrentSlide = function() {\r\n      return slider.active.index;\r\n    };\r\n\r\n    /**\r\n     * Returns current slide element\r\n     */\r\n    el.getCurrentSlideElement = function() {\r\n      return slider.children.eq(slider.active.index);\r\n    };\r\n\r\n    /**\r\n     * Returns a slide element\r\n     * @param index (int)\r\n     *  - The index (zero-based) of the element you want returned.\r\n     */\r\n    el.getSlideElement = function(index) {\r\n      return slider.children.eq(index);\r\n    };\r\n\r\n    /**\r\n     * Returns number of slides in show\r\n     */\r\n    el.getSlideCount = function() {\r\n      return slider.children.length;\r\n    };\r\n\r\n    /**\r\n     * Return slider.working variable\r\n     */\r\n    el.isWorking = function() {\r\n      return slider.working;\r\n    };\r\n\r\n    /**\r\n     * Update all dynamic slider elements\r\n     */\r\n    el.redrawSlider = function() {\r\n      // resize all children in ratio to new screen size\r\n      slider.children.add(el.find('.bx-clone')).outerWidth(getSlideWidth());\r\n      // adjust the height\r\n      slider.viewport.css('height', getViewportHeight());\r\n      // update the slide position\r\n      if (!slider.settings.ticker) { setSlidePosition(); }\r\n      // if active.last was true before the screen resize, we want\r\n      // to keep it last no matter what screen size we end on\r\n      if (slider.active.last) { slider.active.index = getPagerQty() - 1; }\r\n      // if the active index (page) no longer exists due to the resize, simply set the index as last\r\n      if (slider.active.index >= getPagerQty()) { slider.active.last = true; }\r\n      // if a pager is being displayed and a custom pager is not being used, update it\r\n      if (slider.settings.pager && !slider.settings.pagerCustom) {\r\n        populatePager();\r\n        updatePagerActive(slider.active.index);\r\n      }\r\n      if (slider.settings.ariaHidden) { applyAriaHiddenAttributes(slider.active.index * getMoveBy()); }\r\n    };\r\n\r\n    /**\r\n     * Destroy the current instance of the slider (revert everything back to original state)\r\n     */\r\n    el.destroySlider = function() {\r\n      // don't do anything if slider has already been destroyed\r\n      if (!slider.initialized) { return; }\r\n      slider.initialized = false;\r\n      $('.bx-clone', this).remove();\r\n      slider.children.each(function() {\r\n        if ($(this).data('origStyle') !== undefined) {\r\n          $(this).attr('style', $(this).data('origStyle'));\r\n        } else {\r\n          $(this).removeAttr('style');\r\n        }\r\n      });\r\n      if ($(this).data('origStyle') !== undefined) {\r\n        this.attr('style', $(this).data('origStyle'));\r\n      } else {\r\n        $(this).removeAttr('style');\r\n      }\r\n      $(this).unwrap().unwrap();\r\n      if (slider.controls.el) { slider.controls.el.remove(); }\r\n      if (slider.controls.next) { slider.controls.next.remove(); }\r\n      if (slider.controls.prev) { slider.controls.prev.remove(); }\r\n      if (slider.pagerEl && slider.settings.controls && !slider.settings.pagerCustom) { slider.pagerEl.remove(); }\r\n      $('.bx-caption', this).remove();\r\n      if (slider.controls.autoEl) { slider.controls.autoEl.remove(); }\r\n      clearInterval(slider.interval);\r\n      if (slider.settings.responsive) { $(window).unbind('resize', resizeWindow); }\r\n      if (slider.settings.keyboardEnabled) { $(document).unbind('keydown', keyPress); }\r\n      //remove self reference in data\r\n      $(this).removeData('bxSlider');\r\n    };\r\n\r\n    /**\r\n     * Reload the slider (revert all DOM changes, and re-initialize)\r\n     */\r\n    el.reloadSlider = function(settings) {\r\n      if (settings !== undefined) { options = settings; }\r\n      el.destroySlider();\r\n      init();\r\n      //store reference to self in order to access public functions later\r\n      $(el).data('bxSlider', this);\r\n    };\r\n\r\n    init();\r\n\r\n    $(el).data('bxSlider', this);\r\n\r\n    // returns the current jQuery object\r\n    return this;\r\n  };\r\n\r\n})(jQuery);\r\n","/*!\r\n * imagesLoaded PACKAGED v4.1.2\r\n * JavaScript is all like \"You images are done yet or what?\"\r\n * MIT License\r\n */\r\n\r\n/**\r\n * EvEmitter v1.0.3\r\n * Lil' event emitter\r\n * MIT License\r\n */\r\n\r\n/* jshint unused: true, undef: true, strict: true */\r\n\r\n( function( global, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /* globals define, module, window */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD - RequireJS\r\n    define( 'ev-emitter/ev-emitter',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS - Browserify, Webpack\r\n    module.exports = factory();\r\n  } else {\r\n    // Browser globals\r\n    global.EvEmitter = factory();\r\n  }\r\n\r\n}( typeof window != 'undefined' ? window : this, function() {\r\n\r\n\r\n\r\nfunction EvEmitter() {}\r\n\r\nvar proto = EvEmitter.prototype;\r\n\r\nproto.on = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // set events hash\r\n  var events = this._events = this._events || {};\r\n  // set listeners array\r\n  var listeners = events[ eventName ] = events[ eventName ] || [];\r\n  // only add once\r\n  if ( listeners.indexOf( listener ) == -1 ) {\r\n    listeners.push( listener );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.once = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // add event\r\n  this.on( eventName, listener );\r\n  // set once flag\r\n  // set onceEvents hash\r\n  var onceEvents = this._onceEvents = this._onceEvents || {};\r\n  // set onceListeners object\r\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\r\n  // set flag\r\n  onceListeners[ listener ] = true;\r\n\r\n  return this;\r\n};\r\n\r\nproto.off = function( eventName, listener ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  var index = listeners.indexOf( listener );\r\n  if ( index != -1 ) {\r\n    listeners.splice( index, 1 );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.emitEvent = function( eventName, args ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  var i = 0;\r\n  var listener = listeners[i];\r\n  args = args || [];\r\n  // once stuff\r\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\r\n\r\n  while ( listener ) {\r\n    var isOnce = onceListeners && onceListeners[ listener ];\r\n    if ( isOnce ) {\r\n      // remove listener\r\n      // remove before trigger to prevent recursion\r\n      this.off( eventName, listener );\r\n      // unset once flag\r\n      delete onceListeners[ listener ];\r\n    }\r\n    // trigger listener\r\n    listener.apply( this, args );\r\n    // get next listener\r\n    i += isOnce ? 0 : 1;\r\n    listener = listeners[i];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nreturn EvEmitter;\r\n\r\n}));\r\n\r\n/*!\r\n * imagesLoaded v4.1.2\r\n * JavaScript is all like \"You images are done yet or what?\"\r\n * MIT License\r\n */\r\n\r\n( function( window, factory ) { 'use strict';\r\n  // universal module definition\r\n\r\n  /*global define: false, module: false, require: false */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( [\r\n      'ev-emitter/ev-emitter'\r\n    ], function( EvEmitter ) {\r\n      return factory( window, EvEmitter );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.imagesLoaded = factory(\r\n      window,\r\n      window.EvEmitter\r\n    );\r\n  }\r\n\r\n})( typeof window !== 'undefined' ? window : this,\r\n\r\n// --------------------------  factory -------------------------- //\r\n\r\nfunction factory( window, EvEmitter ) {\r\n\r\n\r\n\r\nvar $ = window.jQuery;\r\nvar console = window.console;\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n// extend objects\r\nfunction extend( a, b ) {\r\n  for ( var prop in b ) {\r\n    a[ prop ] = b[ prop ];\r\n  }\r\n  return a;\r\n}\r\n\r\n// turn element or nodeList into an array\r\nfunction makeArray( obj ) {\r\n  var ary = [];\r\n  if ( Array.isArray( obj ) ) {\r\n    // use object if already an array\r\n    ary = obj;\r\n  } else if ( typeof obj.length == 'number' ) {\r\n    // convert nodeList to array\r\n    for ( var i=0; i < obj.length; i++ ) {\r\n      ary.push( obj[i] );\r\n    }\r\n  } else {\r\n    // array of single index\r\n    ary.push( obj );\r\n  }\r\n  return ary;\r\n}\r\n\r\n// -------------------------- imagesLoaded -------------------------- //\r\n\r\n/**\r\n * @param {Array, Element, NodeList, String} elem\r\n * @param {Object or Function} options - if function, use as callback\r\n * @param {Function} onAlways - callback function\r\n */\r\nfunction ImagesLoaded( elem, options, onAlways ) {\r\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\r\n  if ( !( this instanceof ImagesLoaded ) ) {\r\n    return new ImagesLoaded( elem, options, onAlways );\r\n  }\r\n  // use elem as selector string\r\n  if ( typeof elem == 'string' ) {\r\n    elem = document.querySelectorAll( elem );\r\n  }\r\n\r\n  this.elements = makeArray( elem );\r\n  this.options = extend( {}, this.options );\r\n\r\n  if ( typeof options == 'function' ) {\r\n    onAlways = options;\r\n  } else {\r\n    extend( this.options, options );\r\n  }\r\n\r\n  if ( onAlways ) {\r\n    this.on( 'always', onAlways );\r\n  }\r\n\r\n  this.getImages();\r\n\r\n  if ( $ ) {\r\n    // add jQuery Deferred object\r\n    this.jqDeferred = new $.Deferred();\r\n  }\r\n\r\n  // HACK check async to allow time to bind listeners\r\n  setTimeout( function() {\r\n    this.check();\r\n  }.bind( this ));\r\n}\r\n\r\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\r\n\r\nImagesLoaded.prototype.options = {};\r\n\r\nImagesLoaded.prototype.getImages = function() {\r\n  this.images = [];\r\n\r\n  // filter & find items if we have an item selector\r\n  this.elements.forEach( this.addElementImages, this );\r\n};\r\n\r\n/**\r\n * @param {Node} element\r\n */\r\nImagesLoaded.prototype.addElementImages = function( elem ) {\r\n  // filter siblings\r\n  if ( elem.nodeName == 'IMG' ) {\r\n    this.addImage( elem );\r\n  }\r\n  // get background image on element\r\n  if ( this.options.background === true ) {\r\n    this.addElementBackgroundImages( elem );\r\n  }\r\n\r\n  // find children\r\n  // no non-element nodes, #143\r\n  var nodeType = elem.nodeType;\r\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\r\n    return;\r\n  }\r\n  var childImgs = elem.querySelectorAll('img');\r\n  // concat childElems to filterFound array\r\n  for ( var i=0; i < childImgs.length; i++ ) {\r\n    var img = childImgs[i];\r\n    this.addImage( img );\r\n  }\r\n\r\n  // get child background images\r\n  if ( typeof this.options.background == 'string' ) {\r\n    var children = elem.querySelectorAll( this.options.background );\r\n    for ( i=0; i < children.length; i++ ) {\r\n      var child = children[i];\r\n      this.addElementBackgroundImages( child );\r\n    }\r\n  }\r\n};\r\n\r\nvar elementNodeTypes = {\r\n  1: true,\r\n  9: true,\r\n  11: true\r\n};\r\n\r\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\r\n  var style = getComputedStyle( elem );\r\n  if ( !style ) {\r\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\r\n    return;\r\n  }\r\n  // get url inside url(\"...\")\r\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\r\n  var matches = reURL.exec( style.backgroundImage );\r\n  while ( matches !== null ) {\r\n    var url = matches && matches[2];\r\n    if ( url ) {\r\n      this.addBackground( url, elem );\r\n    }\r\n    matches = reURL.exec( style.backgroundImage );\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Image} img\r\n */\r\nImagesLoaded.prototype.addImage = function( img ) {\r\n  var loadingImage = new LoadingImage( img );\r\n  this.images.push( loadingImage );\r\n};\r\n\r\nImagesLoaded.prototype.addBackground = function( url, elem ) {\r\n  var background = new Background( url, elem );\r\n  this.images.push( background );\r\n};\r\n\r\nImagesLoaded.prototype.check = function() {\r\n  var _this = this;\r\n  this.progressedCount = 0;\r\n  this.hasAnyBroken = false;\r\n  // complete if no images\r\n  if ( !this.images.length ) {\r\n    this.complete();\r\n    return;\r\n  }\r\n\r\n  function onProgress( image, elem, message ) {\r\n    // HACK - Chrome triggers event before object properties have changed. #83\r\n    setTimeout( function() {\r\n      _this.progress( image, elem, message );\r\n    });\r\n  }\r\n\r\n  this.images.forEach( function( loadingImage ) {\r\n    loadingImage.once( 'progress', onProgress );\r\n    loadingImage.check();\r\n  });\r\n};\r\n\r\nImagesLoaded.prototype.progress = function( image, elem, message ) {\r\n  this.progressedCount++;\r\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\r\n  // progress event\r\n  this.emitEvent( 'progress', [ this, image, elem ] );\r\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\r\n    this.jqDeferred.notify( this, image );\r\n  }\r\n  // check if completed\r\n  if ( this.progressedCount == this.images.length ) {\r\n    this.complete();\r\n  }\r\n\r\n  if ( this.options.debug && console ) {\r\n    console.log( 'progress: ' + message, image, elem );\r\n  }\r\n};\r\n\r\nImagesLoaded.prototype.complete = function() {\r\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\r\n  this.isComplete = true;\r\n  this.emitEvent( eventName, [ this ] );\r\n  this.emitEvent( 'always', [ this ] );\r\n  if ( this.jqDeferred ) {\r\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\r\n    this.jqDeferred[ jqMethod ]( this );\r\n  }\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nfunction LoadingImage( img ) {\r\n  this.img = img;\r\n}\r\n\r\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\r\n\r\nLoadingImage.prototype.check = function() {\r\n  // If complete is true and browser supports natural sizes,\r\n  // try to check for image status manually.\r\n  var isComplete = this.getIsImageComplete();\r\n  if ( isComplete ) {\r\n    // report based on naturalWidth\r\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\r\n    return;\r\n  }\r\n\r\n  // If none of the checks above matched, simulate loading on detached element.\r\n  this.proxyImage = new Image();\r\n  this.proxyImage.addEventListener( 'load', this );\r\n  this.proxyImage.addEventListener( 'error', this );\r\n  // bind to image as well for Firefox. #191\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  this.proxyImage.src = this.img.src;\r\n};\r\n\r\nLoadingImage.prototype.getIsImageComplete = function() {\r\n  return this.img.complete && this.img.naturalWidth !== undefined;\r\n};\r\n\r\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\r\n  this.isLoaded = isLoaded;\r\n  this.emitEvent( 'progress', [ this, this.img, message ] );\r\n};\r\n\r\n// ----- events ----- //\r\n\r\n// trigger specified handler for event type\r\nLoadingImage.prototype.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\nLoadingImage.prototype.onload = function() {\r\n  this.confirm( true, 'onload' );\r\n  this.unbindEvents();\r\n};\r\n\r\nLoadingImage.prototype.onerror = function() {\r\n  this.confirm( false, 'onerror' );\r\n  this.unbindEvents();\r\n};\r\n\r\nLoadingImage.prototype.unbindEvents = function() {\r\n  this.proxyImage.removeEventListener( 'load', this );\r\n  this.proxyImage.removeEventListener( 'error', this );\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n};\r\n\r\n// -------------------------- Background -------------------------- //\r\n\r\nfunction Background( url, element ) {\r\n  this.url = url;\r\n  this.element = element;\r\n  this.img = new Image();\r\n}\r\n\r\n// inherit LoadingImage prototype\r\nBackground.prototype = Object.create( LoadingImage.prototype );\r\n\r\nBackground.prototype.check = function() {\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  this.img.src = this.url;\r\n  // check if image is already complete\r\n  var isComplete = this.getIsImageComplete();\r\n  if ( isComplete ) {\r\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\r\n    this.unbindEvents();\r\n  }\r\n};\r\n\r\nBackground.prototype.unbindEvents = function() {\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n};\r\n\r\nBackground.prototype.confirm = function( isLoaded, message ) {\r\n  this.isLoaded = isLoaded;\r\n  this.emitEvent( 'progress', [ this, this.element, message ] );\r\n};\r\n\r\n// -------------------------- jQuery -------------------------- //\r\n\r\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\r\n  jQuery = jQuery || window.jQuery;\r\n  if ( !jQuery ) {\r\n    return;\r\n  }\r\n  // set local variable\r\n  $ = jQuery;\r\n  // $().imagesLoaded()\r\n  $.fn.imagesLoaded = function( options, callback ) {\r\n    var instance = new ImagesLoaded( this, options, callback );\r\n    return instance.jqDeferred.promise( $(this) );\r\n  };\r\n};\r\n// try making plugin\r\nImagesLoaded.makeJQueryPlugin();\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nreturn ImagesLoaded;\r\n\r\n});\r\n","/*!\r\n * Masonry PACKAGED v4.2.0\r\n * Cascading grid layout library\r\n * http://masonry.desandro.com\r\n * MIT License\r\n * by David DeSandro\r\n */\r\n\r\n/**\r\n * Bridget makes jQuery widgets\r\n * v2.0.1\r\n * MIT license\r\n */\r\n\r\n/* jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /* globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'jquery-bridget/jquery-bridget',[ 'jquery' ], function( jQuery ) {\r\n      return factory( window, jQuery );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('jquery')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.jQueryBridget = factory(\r\n      window,\r\n      window.jQuery\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, jQuery ) {\r\n'use strict';\r\n\r\n// ----- utils ----- //\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// helper function for logging errors\r\n// $.error breaks jQuery chaining\r\nvar console = window.console;\r\nvar logError = typeof console == 'undefined' ? function() {} :\r\n  function( message ) {\r\n    console.error( message );\r\n  };\r\n\r\n// ----- jQueryBridget ----- //\r\n\r\nfunction jQueryBridget( namespace, PluginClass, $ ) {\r\n  $ = $ || jQuery || window.jQuery;\r\n  if ( !$ ) {\r\n    return;\r\n  }\r\n\r\n  // add option method -> $().plugin('option', {...})\r\n  if ( !PluginClass.prototype.option ) {\r\n    // option setter\r\n    PluginClass.prototype.option = function( opts ) {\r\n      // bail out if not an object\r\n      if ( !$.isPlainObject( opts ) ){\r\n        return;\r\n      }\r\n      this.options = $.extend( true, this.options, opts );\r\n    };\r\n  }\r\n\r\n  // make jQuery plugin\r\n  $.fn[ namespace ] = function( arg0 /*, arg1 */ ) {\r\n    if ( typeof arg0 == 'string' ) {\r\n      // method call $().plugin( 'methodName', { options } )\r\n      // shift arguments by 1\r\n      var args = arraySlice.call( arguments, 1 );\r\n      return methodCall( this, arg0, args );\r\n    }\r\n    // just $().plugin({ options })\r\n    plainCall( this, arg0 );\r\n    return this;\r\n  };\r\n\r\n  // $().plugin('methodName')\r\n  function methodCall( $elems, methodName, args ) {\r\n    var returnValue;\r\n    var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\r\n\r\n    $elems.each( function( i, elem ) {\r\n      // get instance\r\n      var instance = $.data( elem, namespace );\r\n      if ( !instance ) {\r\n        logError( namespace + ' not initialized. Cannot call methods, i.e. ' +\r\n          pluginMethodStr );\r\n        return;\r\n      }\r\n\r\n      var method = instance[ methodName ];\r\n      if ( !method || methodName.charAt(0) == '_' ) {\r\n        logError( pluginMethodStr + ' is not a valid method' );\r\n        return;\r\n      }\r\n\r\n      // apply method, get return value\r\n      var value = method.apply( instance, args );\r\n      // set return value if value is returned, use only first value\r\n      returnValue = returnValue === undefined ? value : returnValue;\r\n    });\r\n\r\n    return returnValue !== undefined ? returnValue : $elems;\r\n  }\r\n\r\n  function plainCall( $elems, options ) {\r\n    $elems.each( function( i, elem ) {\r\n      var instance = $.data( elem, namespace );\r\n      if ( instance ) {\r\n        // set options & init\r\n        instance.option( options );\r\n        instance._init();\r\n      } else {\r\n        // initialize new instance\r\n        instance = new PluginClass( elem, options );\r\n        $.data( elem, namespace, instance );\r\n      }\r\n    });\r\n  }\r\n\r\n  updateJQuery( $ );\r\n\r\n}\r\n\r\n// ----- updateJQuery ----- //\r\n\r\n// set $.bridget for v1 backwards compatibility\r\nfunction updateJQuery( $ ) {\r\n  if ( !$ || ( $ && $.bridget ) ) {\r\n    return;\r\n  }\r\n  $.bridget = jQueryBridget;\r\n}\r\n\r\nupdateJQuery( jQuery || window.jQuery );\r\n\r\n// -----  ----- //\r\n\r\nreturn jQueryBridget;\r\n\r\n}));\r\n\r\n/**\r\n * EvEmitter v1.0.3\r\n * Lil' event emitter\r\n * MIT License\r\n */\r\n\r\n/* jshint unused: true, undef: true, strict: true */\r\n\r\n( function( global, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /* globals define, module, window */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD - RequireJS\r\n    define( 'ev-emitter/ev-emitter',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS - Browserify, Webpack\r\n    module.exports = factory();\r\n  } else {\r\n    // Browser globals\r\n    global.EvEmitter = factory();\r\n  }\r\n\r\n}( typeof window != 'undefined' ? window : this, function() {\r\n\r\n\r\n\r\nfunction EvEmitter() {}\r\n\r\nvar proto = EvEmitter.prototype;\r\n\r\nproto.on = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // set events hash\r\n  var events = this._events = this._events || {};\r\n  // set listeners array\r\n  var listeners = events[ eventName ] = events[ eventName ] || [];\r\n  // only add once\r\n  if ( listeners.indexOf( listener ) == -1 ) {\r\n    listeners.push( listener );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.once = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // add event\r\n  this.on( eventName, listener );\r\n  // set once flag\r\n  // set onceEvents hash\r\n  var onceEvents = this._onceEvents = this._onceEvents || {};\r\n  // set onceListeners object\r\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\r\n  // set flag\r\n  onceListeners[ listener ] = true;\r\n\r\n  return this;\r\n};\r\n\r\nproto.off = function( eventName, listener ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  var index = listeners.indexOf( listener );\r\n  if ( index != -1 ) {\r\n    listeners.splice( index, 1 );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.emitEvent = function( eventName, args ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  var i = 0;\r\n  var listener = listeners[i];\r\n  args = args || [];\r\n  // once stuff\r\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\r\n\r\n  while ( listener ) {\r\n    var isOnce = onceListeners && onceListeners[ listener ];\r\n    if ( isOnce ) {\r\n      // remove listener\r\n      // remove before trigger to prevent recursion\r\n      this.off( eventName, listener );\r\n      // unset once flag\r\n      delete onceListeners[ listener ];\r\n    }\r\n    // trigger listener\r\n    listener.apply( this, args );\r\n    // get next listener\r\n    i += isOnce ? 0 : 1;\r\n    listener = listeners[i];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nreturn EvEmitter;\r\n\r\n}));\r\n\r\n/*!\r\n * getSize v2.0.2\r\n * measure size of elements\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n/*global define: false, module: false, console: false */\r\n\r\n( function( window, factory ) {\r\n  'use strict';\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'get-size/get-size',[],function() {\r\n      return factory();\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.getSize = factory();\r\n  }\r\n\r\n})( window, function factory() {\r\n'use strict';\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n// get a number from a string, not a percentage\r\nfunction getStyleSize( value ) {\r\n  var num = parseFloat( value );\r\n  // not a percent like '100%', and a number\r\n  var isValid = value.indexOf('%') == -1 && !isNaN( num );\r\n  return isValid && num;\r\n}\r\n\r\nfunction noop() {}\r\n\r\nvar logError = typeof console == 'undefined' ? noop :\r\n  function( message ) {\r\n    console.error( message );\r\n  };\r\n\r\n// -------------------------- measurements -------------------------- //\r\n\r\nvar measurements = [\r\n  'paddingLeft',\r\n  'paddingRight',\r\n  'paddingTop',\r\n  'paddingBottom',\r\n  'marginLeft',\r\n  'marginRight',\r\n  'marginTop',\r\n  'marginBottom',\r\n  'borderLeftWidth',\r\n  'borderRightWidth',\r\n  'borderTopWidth',\r\n  'borderBottomWidth'\r\n];\r\n\r\nvar measurementsLength = measurements.length;\r\n\r\nfunction getZeroSize() {\r\n  var size = {\r\n    width: 0,\r\n    height: 0,\r\n    innerWidth: 0,\r\n    innerHeight: 0,\r\n    outerWidth: 0,\r\n    outerHeight: 0\r\n  };\r\n  for ( var i=0; i < measurementsLength; i++ ) {\r\n    var measurement = measurements[i];\r\n    size[ measurement ] = 0;\r\n  }\r\n  return size;\r\n}\r\n\r\n// -------------------------- getStyle -------------------------- //\r\n\r\n/**\r\n * getStyle, get style of element, check for Firefox bug\r\n * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\r\n */\r\nfunction getStyle( elem ) {\r\n  var style = getComputedStyle( elem );\r\n  if ( !style ) {\r\n    logError( 'Style returned ' + style +\r\n      '. Are you running this code in a hidden iframe on Firefox? ' +\r\n      'See http://bit.ly/getsizebug1' );\r\n  }\r\n  return style;\r\n}\r\n\r\n// -------------------------- setup -------------------------- //\r\n\r\nvar isSetup = false;\r\n\r\nvar isBoxSizeOuter;\r\n\r\n/**\r\n * setup\r\n * check isBoxSizerOuter\r\n * do on first getSize() rather than on page load for Firefox bug\r\n */\r\nfunction setup() {\r\n  // setup once\r\n  if ( isSetup ) {\r\n    return;\r\n  }\r\n  isSetup = true;\r\n\r\n  // -------------------------- box sizing -------------------------- //\r\n\r\n  /**\r\n   * WebKit measures the outer-width on style.width on border-box elems\r\n   * IE & Firefox<29 measures the inner-width\r\n   */\r\n  var div = document.createElement('div');\r\n  div.style.width = '200px';\r\n  div.style.padding = '1px 2px 3px 4px';\r\n  div.style.borderStyle = 'solid';\r\n  div.style.borderWidth = '1px 2px 3px 4px';\r\n  div.style.boxSizing = 'border-box';\r\n\r\n  var body = document.body || document.documentElement;\r\n  body.appendChild( div );\r\n  var style = getStyle( div );\r\n\r\n  getSize.isBoxSizeOuter = isBoxSizeOuter = getStyleSize( style.width ) == 200;\r\n  body.removeChild( div );\r\n\r\n}\r\n\r\n// -------------------------- getSize -------------------------- //\r\n\r\nfunction getSize( elem ) {\r\n  setup();\r\n\r\n  // use querySeletor if elem is string\r\n  if ( typeof elem == 'string' ) {\r\n    elem = document.querySelector( elem );\r\n  }\r\n\r\n  // do not proceed on non-objects\r\n  if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\r\n    return;\r\n  }\r\n\r\n  var style = getStyle( elem );\r\n\r\n  // if hidden, everything is 0\r\n  if ( style.display == 'none' ) {\r\n    return getZeroSize();\r\n  }\r\n\r\n  var size = {};\r\n  size.width = elem.offsetWidth;\r\n  size.height = elem.offsetHeight;\r\n\r\n  var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\r\n\r\n  // get all measurements\r\n  for ( var i=0; i < measurementsLength; i++ ) {\r\n    var measurement = measurements[i];\r\n    var value = style[ measurement ];\r\n    var num = parseFloat( value );\r\n    // any 'auto', 'medium' value will be 0\r\n    size[ measurement ] = !isNaN( num ) ? num : 0;\r\n  }\r\n\r\n  var paddingWidth = size.paddingLeft + size.paddingRight;\r\n  var paddingHeight = size.paddingTop + size.paddingBottom;\r\n  var marginWidth = size.marginLeft + size.marginRight;\r\n  var marginHeight = size.marginTop + size.marginBottom;\r\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\r\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\r\n\r\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\r\n\r\n  // overwrite width and height if we can get it from style\r\n  var styleWidth = getStyleSize( style.width );\r\n  if ( styleWidth !== false ) {\r\n    size.width = styleWidth +\r\n      // add padding and border unless it's already including it\r\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\r\n  }\r\n\r\n  var styleHeight = getStyleSize( style.height );\r\n  if ( styleHeight !== false ) {\r\n    size.height = styleHeight +\r\n      // add padding and border unless it's already including it\r\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\r\n  }\r\n\r\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\r\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\r\n\r\n  size.outerWidth = size.width + marginWidth;\r\n  size.outerHeight = size.height + marginHeight;\r\n\r\n  return size;\r\n}\r\n\r\nreturn getSize;\r\n\r\n});\r\n\r\n/**\r\n * matchesSelector v2.0.2\r\n * matchesSelector( element, '.selector' )\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  /*global define: false, module: false */\r\n  'use strict';\r\n  // universal module definition\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'desandro-matches-selector/matches-selector',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.matchesSelector = factory();\r\n  }\r\n\r\n}( window, function factory() {\r\n  'use strict';\r\n\r\n  var matchesMethod = ( function() {\r\n    var ElemProto = window.Element.prototype;\r\n    // check for the standard method name first\r\n    if ( ElemProto.matches ) {\r\n      return 'matches';\r\n    }\r\n    // check un-prefixed\r\n    if ( ElemProto.matchesSelector ) {\r\n      return 'matchesSelector';\r\n    }\r\n    // check vendor prefixes\r\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\r\n\r\n    for ( var i=0; i < prefixes.length; i++ ) {\r\n      var prefix = prefixes[i];\r\n      var method = prefix + 'MatchesSelector';\r\n      if ( ElemProto[ method ] ) {\r\n        return method;\r\n      }\r\n    }\r\n  })();\r\n\r\n  return function matchesSelector( elem, selector ) {\r\n    return elem[ matchesMethod ]( selector );\r\n  };\r\n\r\n}));\r\n\r\n/**\r\n * Fizzy UI utils v2.0.4\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'fizzy-ui-utils/utils',[\r\n      'desandro-matches-selector/matches-selector'\r\n    ], function( matchesSelector ) {\r\n      return factory( window, matchesSelector );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('desandro-matches-selector')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.fizzyUIUtils = factory(\r\n      window,\r\n      window.matchesSelector\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, matchesSelector ) {\r\n\r\n\r\n\r\nvar utils = {};\r\n\r\n// ----- extend ----- //\r\n\r\n// extends objects\r\nutils.extend = function( a, b ) {\r\n  for ( var prop in b ) {\r\n    a[ prop ] = b[ prop ];\r\n  }\r\n  return a;\r\n};\r\n\r\n// ----- modulo ----- //\r\n\r\nutils.modulo = function( num, div ) {\r\n  return ( ( num % div ) + div ) % div;\r\n};\r\n\r\n// ----- makeArray ----- //\r\n\r\n// turn element or nodeList into an array\r\nutils.makeArray = function( obj ) {\r\n  var ary = [];\r\n  if ( Array.isArray( obj ) ) {\r\n    // use object if already an array\r\n    ary = obj;\r\n  } else if ( obj && typeof obj == 'object' &&\r\n    typeof obj.length == 'number' ) {\r\n    // convert nodeList to array\r\n    for ( var i=0; i < obj.length; i++ ) {\r\n      ary.push( obj[i] );\r\n    }\r\n  } else {\r\n    // array of single index\r\n    ary.push( obj );\r\n  }\r\n  return ary;\r\n};\r\n\r\n// ----- removeFrom ----- //\r\n\r\nutils.removeFrom = function( ary, obj ) {\r\n  var index = ary.indexOf( obj );\r\n  if ( index != -1 ) {\r\n    ary.splice( index, 1 );\r\n  }\r\n};\r\n\r\n// ----- getParent ----- //\r\n\r\nutils.getParent = function( elem, selector ) {\r\n  while ( elem != document.body ) {\r\n    elem = elem.parentNode;\r\n    if ( matchesSelector( elem, selector ) ) {\r\n      return elem;\r\n    }\r\n  }\r\n};\r\n\r\n// ----- getQueryElement ----- //\r\n\r\n// use element as selector string\r\nutils.getQueryElement = function( elem ) {\r\n  if ( typeof elem == 'string' ) {\r\n    return document.querySelector( elem );\r\n  }\r\n  return elem;\r\n};\r\n\r\n// ----- handleEvent ----- //\r\n\r\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\r\nutils.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\n// ----- filterFindElements ----- //\r\n\r\nutils.filterFindElements = function( elems, selector ) {\r\n  // make array of elems\r\n  elems = utils.makeArray( elems );\r\n  var ffElems = [];\r\n\r\n  elems.forEach( function( elem ) {\r\n    // check that elem is an actual element\r\n    if ( !( elem instanceof HTMLElement ) ) {\r\n      return;\r\n    }\r\n    // add elem if no selector\r\n    if ( !selector ) {\r\n      ffElems.push( elem );\r\n      return;\r\n    }\r\n    // filter & find items if we have a selector\r\n    // filter\r\n    if ( matchesSelector( elem, selector ) ) {\r\n      ffElems.push( elem );\r\n    }\r\n    // find children\r\n    var childElems = elem.querySelectorAll( selector );\r\n    // concat childElems to filterFound array\r\n    for ( var i=0; i < childElems.length; i++ ) {\r\n      ffElems.push( childElems[i] );\r\n    }\r\n  });\r\n\r\n  return ffElems;\r\n};\r\n\r\n// ----- debounceMethod ----- //\r\n\r\nutils.debounceMethod = function( _class, methodName, threshold ) {\r\n  // original method\r\n  var method = _class.prototype[ methodName ];\r\n  var timeoutName = methodName + 'Timeout';\r\n\r\n  _class.prototype[ methodName ] = function() {\r\n    var timeout = this[ timeoutName ];\r\n    if ( timeout ) {\r\n      clearTimeout( timeout );\r\n    }\r\n    var args = arguments;\r\n\r\n    var _this = this;\r\n    this[ timeoutName ] = setTimeout( function() {\r\n      method.apply( _this, args );\r\n      delete _this[ timeoutName ];\r\n    }, threshold || 100 );\r\n  };\r\n};\r\n\r\n// ----- docReady ----- //\r\n\r\nutils.docReady = function( callback ) {\r\n  var readyState = document.readyState;\r\n  if ( readyState == 'complete' || readyState == 'interactive' ) {\r\n    // do async to allow for other scripts to run. metafizzy/flickity#441\r\n    setTimeout( callback );\r\n  } else {\r\n    document.addEventListener( 'DOMContentLoaded', callback );\r\n  }\r\n};\r\n\r\n// ----- htmlInit ----- //\r\n\r\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\r\nutils.toDashed = function( str ) {\r\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\r\n    return $1 + '-' + $2;\r\n  }).toLowerCase();\r\n};\r\n\r\nvar console = window.console;\r\n/**\r\n * allow user to initialize classes via [data-namespace] or .js-namespace class\r\n * htmlInit( Widget, 'widgetName' )\r\n * options are parsed from data-namespace-options\r\n */\r\nutils.htmlInit = function( WidgetClass, namespace ) {\r\n  utils.docReady( function() {\r\n    var dashedNamespace = utils.toDashed( namespace );\r\n    var dataAttr = 'data-' + dashedNamespace;\r\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\r\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\r\n    var elems = utils.makeArray( dataAttrElems )\r\n      .concat( utils.makeArray( jsDashElems ) );\r\n    var dataOptionsAttr = dataAttr + '-options';\r\n    var jQuery = window.jQuery;\r\n\r\n    elems.forEach( function( elem ) {\r\n      var attr = elem.getAttribute( dataAttr ) ||\r\n        elem.getAttribute( dataOptionsAttr );\r\n      var options;\r\n      try {\r\n        options = attr && JSON.parse( attr );\r\n      } catch ( error ) {\r\n        // log error, do not initialize\r\n        if ( console ) {\r\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\r\n          ': ' + error );\r\n        }\r\n        return;\r\n      }\r\n      // initialize\r\n      var instance = new WidgetClass( elem, options );\r\n      // make available via $().data('namespace')\r\n      if ( jQuery ) {\r\n        jQuery.data( elem, namespace, instance );\r\n      }\r\n    });\r\n\r\n  });\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn utils;\r\n\r\n}));\r\n\r\n/**\r\n * Outlayer Item\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /* globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD - RequireJS\r\n    define( 'outlayer/item',[\r\n        'ev-emitter/ev-emitter',\r\n        'get-size/get-size'\r\n      ],\r\n      factory\r\n    );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS - Browserify, Webpack\r\n    module.exports = factory(\r\n      require('ev-emitter'),\r\n      require('get-size')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Outlayer = {};\r\n    window.Outlayer.Item = factory(\r\n      window.EvEmitter,\r\n      window.getSize\r\n    );\r\n  }\r\n\r\n}( window, function factory( EvEmitter, getSize ) {\r\n'use strict';\r\n\r\n// ----- helpers ----- //\r\n\r\nfunction isEmptyObj( obj ) {\r\n  for ( var prop in obj ) {\r\n    return false;\r\n  }\r\n  prop = null;\r\n  return true;\r\n}\r\n\r\n// -------------------------- CSS3 support -------------------------- //\r\n\r\n\r\nvar docElemStyle = document.documentElement.style;\r\n\r\nvar transitionProperty = typeof docElemStyle.transition == 'string' ?\r\n  'transition' : 'WebkitTransition';\r\nvar transformProperty = typeof docElemStyle.transform == 'string' ?\r\n  'transform' : 'WebkitTransform';\r\n\r\nvar transitionEndEvent = {\r\n  WebkitTransition: 'webkitTransitionEnd',\r\n  transition: 'transitionend'\r\n}[ transitionProperty ];\r\n\r\n// cache all vendor properties that could have vendor prefix\r\nvar vendorProperties = {\r\n  transform: transformProperty,\r\n  transition: transitionProperty,\r\n  transitionDuration: transitionProperty + 'Duration',\r\n  transitionProperty: transitionProperty + 'Property',\r\n  transitionDelay: transitionProperty + 'Delay'\r\n};\r\n\r\n// -------------------------- Item -------------------------- //\r\n\r\nfunction Item( element, layout ) {\r\n  if ( !element ) {\r\n    return;\r\n  }\r\n\r\n  this.element = element;\r\n  // parent layout class, i.e. Masonry, Isotope, or Packery\r\n  this.layout = layout;\r\n  this.position = {\r\n    x: 0,\r\n    y: 0\r\n  };\r\n\r\n  this._create();\r\n}\r\n\r\n// inherit EvEmitter\r\nvar proto = Item.prototype = Object.create( EvEmitter.prototype );\r\nproto.constructor = Item;\r\n\r\nproto._create = function() {\r\n  // transition objects\r\n  this._transn = {\r\n    ingProperties: {},\r\n    clean: {},\r\n    onEnd: {}\r\n  };\r\n\r\n  this.css({\r\n    position: 'absolute'\r\n  });\r\n};\r\n\r\n// trigger specified handler for event type\r\nproto.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\nproto.getSize = function() {\r\n  this.size = getSize( this.element );\r\n};\r\n\r\n/**\r\n * apply CSS styles to element\r\n * @param {Object} style\r\n */\r\nproto.css = function( style ) {\r\n  var elemStyle = this.element.style;\r\n\r\n  for ( var prop in style ) {\r\n    // use vendor property if available\r\n    var supportedProp = vendorProperties[ prop ] || prop;\r\n    elemStyle[ supportedProp ] = style[ prop ];\r\n  }\r\n};\r\n\r\n // measure position, and sets it\r\nproto.getPosition = function() {\r\n  var style = getComputedStyle( this.element );\r\n  var isOriginLeft = this.layout._getOption('originLeft');\r\n  var isOriginTop = this.layout._getOption('originTop');\r\n  var xValue = style[ isOriginLeft ? 'left' : 'right' ];\r\n  var yValue = style[ isOriginTop ? 'top' : 'bottom' ];\r\n  // convert percent to pixels\r\n  var layoutSize = this.layout.size;\r\n  var x = xValue.indexOf('%') != -1 ?\r\n    ( parseFloat( xValue ) / 100 ) * layoutSize.width : parseInt( xValue, 10 );\r\n  var y = yValue.indexOf('%') != -1 ?\r\n    ( parseFloat( yValue ) / 100 ) * layoutSize.height : parseInt( yValue, 10 );\r\n\r\n  // clean up 'auto' or other non-integer values\r\n  x = isNaN( x ) ? 0 : x;\r\n  y = isNaN( y ) ? 0 : y;\r\n  // remove padding from measurement\r\n  x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\r\n  y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\r\n\r\n  this.position.x = x;\r\n  this.position.y = y;\r\n};\r\n\r\n// set settled position, apply padding\r\nproto.layoutPosition = function() {\r\n  var layoutSize = this.layout.size;\r\n  var style = {};\r\n  var isOriginLeft = this.layout._getOption('originLeft');\r\n  var isOriginTop = this.layout._getOption('originTop');\r\n\r\n  // x\r\n  var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\r\n  var xProperty = isOriginLeft ? 'left' : 'right';\r\n  var xResetProperty = isOriginLeft ? 'right' : 'left';\r\n\r\n  var x = this.position.x + layoutSize[ xPadding ];\r\n  // set in percentage or pixels\r\n  style[ xProperty ] = this.getXValue( x );\r\n  // reset other property\r\n  style[ xResetProperty ] = '';\r\n\r\n  // y\r\n  var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\r\n  var yProperty = isOriginTop ? 'top' : 'bottom';\r\n  var yResetProperty = isOriginTop ? 'bottom' : 'top';\r\n\r\n  var y = this.position.y + layoutSize[ yPadding ];\r\n  // set in percentage or pixels\r\n  style[ yProperty ] = this.getYValue( y );\r\n  // reset other property\r\n  style[ yResetProperty ] = '';\r\n\r\n  this.css( style );\r\n  this.emitEvent( 'layout', [ this ] );\r\n};\r\n\r\nproto.getXValue = function( x ) {\r\n  var isHorizontal = this.layout._getOption('horizontal');\r\n  return this.layout.options.percentPosition && !isHorizontal ?\r\n    ( ( x / this.layout.size.width ) * 100 ) + '%' : x + 'px';\r\n};\r\n\r\nproto.getYValue = function( y ) {\r\n  var isHorizontal = this.layout._getOption('horizontal');\r\n  return this.layout.options.percentPosition && isHorizontal ?\r\n    ( ( y / this.layout.size.height ) * 100 ) + '%' : y + 'px';\r\n};\r\n\r\nproto._transitionTo = function( x, y ) {\r\n  this.getPosition();\r\n  // get current x & y from top/left\r\n  var curX = this.position.x;\r\n  var curY = this.position.y;\r\n\r\n  var compareX = parseInt( x, 10 );\r\n  var compareY = parseInt( y, 10 );\r\n  var didNotMove = compareX === this.position.x && compareY === this.position.y;\r\n\r\n  // save end position\r\n  this.setPosition( x, y );\r\n\r\n  // if did not move and not transitioning, just go to layout\r\n  if ( didNotMove && !this.isTransitioning ) {\r\n    this.layoutPosition();\r\n    return;\r\n  }\r\n\r\n  var transX = x - curX;\r\n  var transY = y - curY;\r\n  var transitionStyle = {};\r\n  transitionStyle.transform = this.getTranslate( transX, transY );\r\n\r\n  this.transition({\r\n    to: transitionStyle,\r\n    onTransitionEnd: {\r\n      transform: this.layoutPosition\r\n    },\r\n    isCleaning: true\r\n  });\r\n};\r\n\r\nproto.getTranslate = function( x, y ) {\r\n  // flip cooridinates if origin on right or bottom\r\n  var isOriginLeft = this.layout._getOption('originLeft');\r\n  var isOriginTop = this.layout._getOption('originTop');\r\n  x = isOriginLeft ? x : -x;\r\n  y = isOriginTop ? y : -y;\r\n  return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\r\n};\r\n\r\n// non transition + transform support\r\nproto.goTo = function( x, y ) {\r\n  this.setPosition( x, y );\r\n  this.layoutPosition();\r\n};\r\n\r\nproto.moveTo = proto._transitionTo;\r\n\r\nproto.setPosition = function( x, y ) {\r\n  this.position.x = parseInt( x, 10 );\r\n  this.position.y = parseInt( y, 10 );\r\n};\r\n\r\n// ----- transition ----- //\r\n\r\n/**\r\n * @param {Object} style - CSS\r\n * @param {Function} onTransitionEnd\r\n */\r\n\r\n// non transition, just trigger callback\r\nproto._nonTransition = function( args ) {\r\n  this.css( args.to );\r\n  if ( args.isCleaning ) {\r\n    this._removeStyles( args.to );\r\n  }\r\n  for ( var prop in args.onTransitionEnd ) {\r\n    args.onTransitionEnd[ prop ].call( this );\r\n  }\r\n};\r\n\r\n/**\r\n * proper transition\r\n * @param {Object} args - arguments\r\n *   @param {Object} to - style to transition to\r\n *   @param {Object} from - style to start transition from\r\n *   @param {Boolean} isCleaning - removes transition styles after transition\r\n *   @param {Function} onTransitionEnd - callback\r\n */\r\nproto.transition = function( args ) {\r\n  // redirect to nonTransition if no transition duration\r\n  if ( !parseFloat( this.layout.options.transitionDuration ) ) {\r\n    this._nonTransition( args );\r\n    return;\r\n  }\r\n\r\n  var _transition = this._transn;\r\n  // keep track of onTransitionEnd callback by css property\r\n  for ( var prop in args.onTransitionEnd ) {\r\n    _transition.onEnd[ prop ] = args.onTransitionEnd[ prop ];\r\n  }\r\n  // keep track of properties that are transitioning\r\n  for ( prop in args.to ) {\r\n    _transition.ingProperties[ prop ] = true;\r\n    // keep track of properties to clean up when transition is done\r\n    if ( args.isCleaning ) {\r\n      _transition.clean[ prop ] = true;\r\n    }\r\n  }\r\n\r\n  // set from styles\r\n  if ( args.from ) {\r\n    this.css( args.from );\r\n    // force redraw. http://blog.alexmaccaw.com/css-transitions\r\n    var h = this.element.offsetHeight;\r\n    // hack for JSHint to hush about unused var\r\n    h = null;\r\n  }\r\n  // enable transition\r\n  this.enableTransition( args.to );\r\n  // set styles that are transitioning\r\n  this.css( args.to );\r\n\r\n  this.isTransitioning = true;\r\n\r\n};\r\n\r\n// dash before all cap letters, including first for\r\n// WebkitTransform => -webkit-transform\r\nfunction toDashedAll( str ) {\r\n  return str.replace( /([A-Z])/g, function( $1 ) {\r\n    return '-' + $1.toLowerCase();\r\n  });\r\n}\r\n\r\nvar transitionProps = 'opacity,' + toDashedAll( transformProperty );\r\n\r\nproto.enableTransition = function(/* style */) {\r\n  // HACK changing transitionProperty during a transition\r\n  // will cause transition to jump\r\n  if ( this.isTransitioning ) {\r\n    return;\r\n  }\r\n\r\n  // make `transition: foo, bar, baz` from style object\r\n  // HACK un-comment this when enableTransition can work\r\n  // while a transition is happening\r\n  // var transitionValues = [];\r\n  // for ( var prop in style ) {\r\n  //   // dash-ify camelCased properties like WebkitTransition\r\n  //   prop = vendorProperties[ prop ] || prop;\r\n  //   transitionValues.push( toDashedAll( prop ) );\r\n  // }\r\n  // munge number to millisecond, to match stagger\r\n  var duration = this.layout.options.transitionDuration;\r\n  duration = typeof duration == 'number' ? duration + 'ms' : duration;\r\n  // enable transition styles\r\n  this.css({\r\n    transitionProperty: transitionProps,\r\n    transitionDuration: duration,\r\n    transitionDelay: this.staggerDelay || 0\r\n  });\r\n  // listen for transition end event\r\n  this.element.addEventListener( transitionEndEvent, this, false );\r\n};\r\n\r\n// ----- events ----- //\r\n\r\nproto.onwebkitTransitionEnd = function( event ) {\r\n  this.ontransitionend( event );\r\n};\r\n\r\nproto.onotransitionend = function( event ) {\r\n  this.ontransitionend( event );\r\n};\r\n\r\n// properties that I munge to make my life easier\r\nvar dashedVendorProperties = {\r\n  '-webkit-transform': 'transform'\r\n};\r\n\r\nproto.ontransitionend = function( event ) {\r\n  // disregard bubbled events from children\r\n  if ( event.target !== this.element ) {\r\n    return;\r\n  }\r\n  var _transition = this._transn;\r\n  // get property name of transitioned property, convert to prefix-free\r\n  var propertyName = dashedVendorProperties[ event.propertyName ] || event.propertyName;\r\n\r\n  // remove property that has completed transitioning\r\n  delete _transition.ingProperties[ propertyName ];\r\n  // check if any properties are still transitioning\r\n  if ( isEmptyObj( _transition.ingProperties ) ) {\r\n    // all properties have completed transitioning\r\n    this.disableTransition();\r\n  }\r\n  // clean style\r\n  if ( propertyName in _transition.clean ) {\r\n    // clean up style\r\n    this.element.style[ event.propertyName ] = '';\r\n    delete _transition.clean[ propertyName ];\r\n  }\r\n  // trigger onTransitionEnd callback\r\n  if ( propertyName in _transition.onEnd ) {\r\n    var onTransitionEnd = _transition.onEnd[ propertyName ];\r\n    onTransitionEnd.call( this );\r\n    delete _transition.onEnd[ propertyName ];\r\n  }\r\n\r\n  this.emitEvent( 'transitionEnd', [ this ] );\r\n};\r\n\r\nproto.disableTransition = function() {\r\n  this.removeTransitionStyles();\r\n  this.element.removeEventListener( transitionEndEvent, this, false );\r\n  this.isTransitioning = false;\r\n};\r\n\r\n/**\r\n * removes style property from element\r\n * @param {Object} style\r\n**/\r\nproto._removeStyles = function( style ) {\r\n  // clean up transition styles\r\n  var cleanStyle = {};\r\n  for ( var prop in style ) {\r\n    cleanStyle[ prop ] = '';\r\n  }\r\n  this.css( cleanStyle );\r\n};\r\n\r\nvar cleanTransitionStyle = {\r\n  transitionProperty: '',\r\n  transitionDuration: '',\r\n  transitionDelay: ''\r\n};\r\n\r\nproto.removeTransitionStyles = function() {\r\n  // remove transition\r\n  this.css( cleanTransitionStyle );\r\n};\r\n\r\n// ----- stagger ----- //\r\n\r\nproto.stagger = function( delay ) {\r\n  delay = isNaN( delay ) ? 0 : delay;\r\n  this.staggerDelay = delay + 'ms';\r\n};\r\n\r\n// ----- show/hide/remove ----- //\r\n\r\n// remove element from DOM\r\nproto.removeElem = function() {\r\n  this.element.parentNode.removeChild( this.element );\r\n  // remove display: none\r\n  this.css({ display: '' });\r\n  this.emitEvent( 'remove', [ this ] );\r\n};\r\n\r\nproto.remove = function() {\r\n  // just remove element if no transition support or no transition\r\n  if ( !transitionProperty || !parseFloat( this.layout.options.transitionDuration ) ) {\r\n    this.removeElem();\r\n    return;\r\n  }\r\n\r\n  // start transition\r\n  this.once( 'transitionEnd', function() {\r\n    this.removeElem();\r\n  });\r\n  this.hide();\r\n};\r\n\r\nproto.reveal = function() {\r\n  delete this.isHidden;\r\n  // remove display: none\r\n  this.css({ display: '' });\r\n\r\n  var options = this.layout.options;\r\n\r\n  var onTransitionEnd = {};\r\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\r\n  onTransitionEnd[ transitionEndProperty ] = this.onRevealTransitionEnd;\r\n\r\n  this.transition({\r\n    from: options.hiddenStyle,\r\n    to: options.visibleStyle,\r\n    isCleaning: true,\r\n    onTransitionEnd: onTransitionEnd\r\n  });\r\n};\r\n\r\nproto.onRevealTransitionEnd = function() {\r\n  // check if still visible\r\n  // during transition, item may have been hidden\r\n  if ( !this.isHidden ) {\r\n    this.emitEvent('reveal');\r\n  }\r\n};\r\n\r\n/**\r\n * get style property use for hide/reveal transition end\r\n * @param {String} styleProperty - hiddenStyle/visibleStyle\r\n * @returns {String}\r\n */\r\nproto.getHideRevealTransitionEndProperty = function( styleProperty ) {\r\n  var optionStyle = this.layout.options[ styleProperty ];\r\n  // use opacity\r\n  if ( optionStyle.opacity ) {\r\n    return 'opacity';\r\n  }\r\n  // get first property\r\n  for ( var prop in optionStyle ) {\r\n    return prop;\r\n  }\r\n};\r\n\r\nproto.hide = function() {\r\n  // set flag\r\n  this.isHidden = true;\r\n  // remove display: none\r\n  this.css({ display: '' });\r\n\r\n  var options = this.layout.options;\r\n\r\n  var onTransitionEnd = {};\r\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\r\n  onTransitionEnd[ transitionEndProperty ] = this.onHideTransitionEnd;\r\n\r\n  this.transition({\r\n    from: options.visibleStyle,\r\n    to: options.hiddenStyle,\r\n    // keep hidden stuff hidden\r\n    isCleaning: true,\r\n    onTransitionEnd: onTransitionEnd\r\n  });\r\n};\r\n\r\nproto.onHideTransitionEnd = function() {\r\n  // check if still hidden\r\n  // during transition, item may have been un-hidden\r\n  if ( this.isHidden ) {\r\n    this.css({ display: 'none' });\r\n    this.emitEvent('hide');\r\n  }\r\n};\r\n\r\nproto.destroy = function() {\r\n  this.css({\r\n    position: '',\r\n    left: '',\r\n    right: '',\r\n    top: '',\r\n    bottom: '',\r\n    transition: '',\r\n    transform: ''\r\n  });\r\n};\r\n\r\nreturn Item;\r\n\r\n}));\r\n\r\n/*!\r\n * Outlayer v2.1.0\r\n * the brains and guts of a layout library\r\n * MIT license\r\n */\r\n\r\n( function( window, factory ) {\r\n  'use strict';\r\n  // universal module definition\r\n  /* jshint strict: false */ /* globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD - RequireJS\r\n    define( 'outlayer/outlayer',[\r\n        'ev-emitter/ev-emitter',\r\n        'get-size/get-size',\r\n        'fizzy-ui-utils/utils',\r\n        './item'\r\n      ],\r\n      function( EvEmitter, getSize, utils, Item ) {\r\n        return factory( window, EvEmitter, getSize, utils, Item);\r\n      }\r\n    );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS - Browserify, Webpack\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter'),\r\n      require('get-size'),\r\n      require('fizzy-ui-utils'),\r\n      require('./item')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Outlayer = factory(\r\n      window,\r\n      window.EvEmitter,\r\n      window.getSize,\r\n      window.fizzyUIUtils,\r\n      window.Outlayer.Item\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, EvEmitter, getSize, utils, Item ) {\r\n'use strict';\r\n\r\n// ----- vars ----- //\r\n\r\nvar console = window.console;\r\nvar jQuery = window.jQuery;\r\nvar noop = function() {};\r\n\r\n// -------------------------- Outlayer -------------------------- //\r\n\r\n// globally unique identifiers\r\nvar GUID = 0;\r\n// internal store of all Outlayer intances\r\nvar instances = {};\r\n\r\n\r\n/**\r\n * @param {Element, String} element\r\n * @param {Object} options\r\n * @constructor\r\n */\r\nfunction Outlayer( element, options ) {\r\n  var queryElement = utils.getQueryElement( element );\r\n  if ( !queryElement ) {\r\n    if ( console ) {\r\n      console.error( 'Bad element for ' + this.constructor.namespace +\r\n        ': ' + ( queryElement || element ) );\r\n    }\r\n    return;\r\n  }\r\n  this.element = queryElement;\r\n  // add jQuery\r\n  if ( jQuery ) {\r\n    this.$element = jQuery( this.element );\r\n  }\r\n\r\n  // options\r\n  this.options = utils.extend( {}, this.constructor.defaults );\r\n  this.option( options );\r\n\r\n  // add id for Outlayer.getFromElement\r\n  var id = ++GUID;\r\n  this.element.outlayerGUID = id; // expando\r\n  instances[ id ] = this; // associate via id\r\n\r\n  // kick it off\r\n  this._create();\r\n\r\n  var isInitLayout = this._getOption('initLayout');\r\n  if ( isInitLayout ) {\r\n    this.layout();\r\n  }\r\n}\r\n\r\n// settings are for internal use only\r\nOutlayer.namespace = 'outlayer';\r\nOutlayer.Item = Item;\r\n\r\n// default options\r\nOutlayer.defaults = {\r\n  containerStyle: {\r\n    position: 'relative'\r\n  },\r\n  initLayout: true,\r\n  originLeft: true,\r\n  originTop: true,\r\n  resize: true,\r\n  resizeContainer: true,\r\n  // item options\r\n  transitionDuration: '0.4s',\r\n  hiddenStyle: {\r\n    opacity: 0,\r\n    transform: 'scale(0.001)'\r\n  },\r\n  visibleStyle: {\r\n    opacity: 1,\r\n    transform: 'scale(1)'\r\n  }\r\n};\r\n\r\nvar proto = Outlayer.prototype;\r\n// inherit EvEmitter\r\nutils.extend( proto, EvEmitter.prototype );\r\n\r\n/**\r\n * set options\r\n * @param {Object} opts\r\n */\r\nproto.option = function( opts ) {\r\n  utils.extend( this.options, opts );\r\n};\r\n\r\n/**\r\n * get backwards compatible option value, check old name\r\n */\r\nproto._getOption = function( option ) {\r\n  var oldOption = this.constructor.compatOptions[ option ];\r\n  return oldOption && this.options[ oldOption ] !== undefined ?\r\n    this.options[ oldOption ] : this.options[ option ];\r\n};\r\n\r\nOutlayer.compatOptions = {\r\n  // currentName: oldName\r\n  initLayout: 'isInitLayout',\r\n  horizontal: 'isHorizontal',\r\n  layoutInstant: 'isLayoutInstant',\r\n  originLeft: 'isOriginLeft',\r\n  originTop: 'isOriginTop',\r\n  resize: 'isResizeBound',\r\n  resizeContainer: 'isResizingContainer'\r\n};\r\n\r\nproto._create = function() {\r\n  // get items from children\r\n  this.reloadItems();\r\n  // elements that affect layout, but are not laid out\r\n  this.stamps = [];\r\n  this.stamp( this.options.stamp );\r\n  // set container style\r\n  utils.extend( this.element.style, this.options.containerStyle );\r\n\r\n  // bind resize method\r\n  var canBindResize = this._getOption('resize');\r\n  if ( canBindResize ) {\r\n    this.bindResize();\r\n  }\r\n};\r\n\r\n// goes through all children again and gets bricks in proper order\r\nproto.reloadItems = function() {\r\n  // collection of item elements\r\n  this.items = this._itemize( this.element.children );\r\n};\r\n\r\n\r\n/**\r\n * turn elements into Outlayer.Items to be used in layout\r\n * @param {Array or NodeList or HTMLElement} elems\r\n * @returns {Array} items - collection of new Outlayer Items\r\n */\r\nproto._itemize = function( elems ) {\r\n\r\n  var itemElems = this._filterFindItemElements( elems );\r\n  var Item = this.constructor.Item;\r\n\r\n  // create new Outlayer Items for collection\r\n  var items = [];\r\n  for ( var i=0; i < itemElems.length; i++ ) {\r\n    var elem = itemElems[i];\r\n    var item = new Item( elem, this );\r\n    items.push( item );\r\n  }\r\n\r\n  return items;\r\n};\r\n\r\n/**\r\n * get item elements to be used in layout\r\n * @param {Array or NodeList or HTMLElement} elems\r\n * @returns {Array} items - item elements\r\n */\r\nproto._filterFindItemElements = function( elems ) {\r\n  return utils.filterFindElements( elems, this.options.itemSelector );\r\n};\r\n\r\n/**\r\n * getter method for getting item elements\r\n * @returns {Array} elems - collection of item elements\r\n */\r\nproto.getItemElements = function() {\r\n  return this.items.map( function( item ) {\r\n    return item.element;\r\n  });\r\n};\r\n\r\n// ----- init & layout ----- //\r\n\r\n/**\r\n * lays out all items\r\n */\r\nproto.layout = function() {\r\n  this._resetLayout();\r\n  this._manageStamps();\r\n\r\n  // don't animate first layout\r\n  var layoutInstant = this._getOption('layoutInstant');\r\n  var isInstant = layoutInstant !== undefined ?\r\n    layoutInstant : !this._isLayoutInited;\r\n  this.layoutItems( this.items, isInstant );\r\n\r\n  // flag for initalized\r\n  this._isLayoutInited = true;\r\n};\r\n\r\n// _init is alias for layout\r\nproto._init = proto.layout;\r\n\r\n/**\r\n * logic before any new layout\r\n */\r\nproto._resetLayout = function() {\r\n  this.getSize();\r\n};\r\n\r\n\r\nproto.getSize = function() {\r\n  this.size = getSize( this.element );\r\n};\r\n\r\n/**\r\n * get measurement from option, for columnWidth, rowHeight, gutter\r\n * if option is String -> get element from selector string, & get size of element\r\n * if option is Element -> get size of element\r\n * else use option as a number\r\n *\r\n * @param {String} measurement\r\n * @param {String} size - width or height\r\n * @private\r\n */\r\nproto._getMeasurement = function( measurement, size ) {\r\n  var option = this.options[ measurement ];\r\n  var elem;\r\n  if ( !option ) {\r\n    // default to 0\r\n    this[ measurement ] = 0;\r\n  } else {\r\n    // use option as an element\r\n    if ( typeof option == 'string' ) {\r\n      elem = this.element.querySelector( option );\r\n    } else if ( option instanceof HTMLElement ) {\r\n      elem = option;\r\n    }\r\n    // use size of element, if element\r\n    this[ measurement ] = elem ? getSize( elem )[ size ] : option;\r\n  }\r\n};\r\n\r\n/**\r\n * layout a collection of item elements\r\n * @api public\r\n */\r\nproto.layoutItems = function( items, isInstant ) {\r\n  items = this._getItemsForLayout( items );\r\n\r\n  this._layoutItems( items, isInstant );\r\n\r\n  this._postLayout();\r\n};\r\n\r\n/**\r\n * get the items to be laid out\r\n * you may want to skip over some items\r\n * @param {Array} items\r\n * @returns {Array} items\r\n */\r\nproto._getItemsForLayout = function( items ) {\r\n  return items.filter( function( item ) {\r\n    return !item.isIgnored;\r\n  });\r\n};\r\n\r\n/**\r\n * layout items\r\n * @param {Array} items\r\n * @param {Boolean} isInstant\r\n */\r\nproto._layoutItems = function( items, isInstant ) {\r\n  this._emitCompleteOnItems( 'layout', items );\r\n\r\n  if ( !items || !items.length ) {\r\n    // no items, emit event with empty array\r\n    return;\r\n  }\r\n\r\n  var queue = [];\r\n\r\n  items.forEach( function( item ) {\r\n    // get x/y object from method\r\n    var position = this._getItemLayoutPosition( item );\r\n    // enqueue\r\n    position.item = item;\r\n    position.isInstant = isInstant || item.isLayoutInstant;\r\n    queue.push( position );\r\n  }, this );\r\n\r\n  this._processLayoutQueue( queue );\r\n};\r\n\r\n/**\r\n * get item layout position\r\n * @param {Outlayer.Item} item\r\n * @returns {Object} x and y position\r\n */\r\nproto._getItemLayoutPosition = function( /* item */ ) {\r\n  return {\r\n    x: 0,\r\n    y: 0\r\n  };\r\n};\r\n\r\n/**\r\n * iterate over array and position each item\r\n * Reason being - separating this logic prevents 'layout invalidation'\r\n * thx @paul_irish\r\n * @param {Array} queue\r\n */\r\nproto._processLayoutQueue = function( queue ) {\r\n  this.updateStagger();\r\n  queue.forEach( function( obj, i ) {\r\n    this._positionItem( obj.item, obj.x, obj.y, obj.isInstant, i );\r\n  }, this );\r\n};\r\n\r\n// set stagger from option in milliseconds number\r\nproto.updateStagger = function() {\r\n  var stagger = this.options.stagger;\r\n  if ( stagger === null || stagger === undefined ) {\r\n    this.stagger = 0;\r\n    return;\r\n  }\r\n  this.stagger = getMilliseconds( stagger );\r\n  return this.stagger;\r\n};\r\n\r\n/**\r\n * Sets position of item in DOM\r\n * @param {Outlayer.Item} item\r\n * @param {Number} x - horizontal position\r\n * @param {Number} y - vertical position\r\n * @param {Boolean} isInstant - disables transitions\r\n */\r\nproto._positionItem = function( item, x, y, isInstant, i ) {\r\n  if ( isInstant ) {\r\n    // if not transition, just set CSS\r\n    item.goTo( x, y );\r\n  } else {\r\n    item.stagger( i * this.stagger );\r\n    item.moveTo( x, y );\r\n  }\r\n};\r\n\r\n/**\r\n * Any logic you want to do after each layout,\r\n * i.e. size the container\r\n */\r\nproto._postLayout = function() {\r\n  this.resizeContainer();\r\n};\r\n\r\nproto.resizeContainer = function() {\r\n  var isResizingContainer = this._getOption('resizeContainer');\r\n  if ( !isResizingContainer ) {\r\n    return;\r\n  }\r\n  var size = this._getContainerSize();\r\n  if ( size ) {\r\n    this._setContainerMeasure( size.width, true );\r\n    this._setContainerMeasure( size.height, false );\r\n  }\r\n};\r\n\r\n/**\r\n * Sets width or height of container if returned\r\n * @returns {Object} size\r\n *   @param {Number} width\r\n *   @param {Number} height\r\n */\r\nproto._getContainerSize = noop;\r\n\r\n/**\r\n * @param {Number} measure - size of width or height\r\n * @param {Boolean} isWidth\r\n */\r\nproto._setContainerMeasure = function( measure, isWidth ) {\r\n  if ( measure === undefined ) {\r\n    return;\r\n  }\r\n\r\n  var elemSize = this.size;\r\n  // add padding and border width if border box\r\n  if ( elemSize.isBorderBox ) {\r\n    measure += isWidth ? elemSize.paddingLeft + elemSize.paddingRight +\r\n      elemSize.borderLeftWidth + elemSize.borderRightWidth :\r\n      elemSize.paddingBottom + elemSize.paddingTop +\r\n      elemSize.borderTopWidth + elemSize.borderBottomWidth;\r\n  }\r\n\r\n  measure = Math.max( measure, 0 );\r\n  this.element.style[ isWidth ? 'width' : 'height' ] = measure + 'px';\r\n};\r\n\r\n/**\r\n * emit eventComplete on a collection of items events\r\n * @param {String} eventName\r\n * @param {Array} items - Outlayer.Items\r\n */\r\nproto._emitCompleteOnItems = function( eventName, items ) {\r\n  var _this = this;\r\n  function onComplete() {\r\n    _this.dispatchEvent( eventName + 'Complete', null, [ items ] );\r\n  }\r\n\r\n  var count = items.length;\r\n  if ( !items || !count ) {\r\n    onComplete();\r\n    return;\r\n  }\r\n\r\n  var doneCount = 0;\r\n  function tick() {\r\n    doneCount++;\r\n    if ( doneCount == count ) {\r\n      onComplete();\r\n    }\r\n  }\r\n\r\n  // bind callback\r\n  items.forEach( function( item ) {\r\n    item.once( eventName, tick );\r\n  });\r\n};\r\n\r\n/**\r\n * emits events via EvEmitter and jQuery events\r\n * @param {String} type - name of event\r\n * @param {Event} event - original event\r\n * @param {Array} args - extra arguments\r\n */\r\nproto.dispatchEvent = function( type, event, args ) {\r\n  // add original event to arguments\r\n  var emitArgs = event ? [ event ].concat( args ) : args;\r\n  this.emitEvent( type, emitArgs );\r\n\r\n  if ( jQuery ) {\r\n    // set this.$element\r\n    this.$element = this.$element || jQuery( this.element );\r\n    if ( event ) {\r\n      // create jQuery event\r\n      var $event = jQuery.Event( event );\r\n      $event.type = type;\r\n      this.$element.trigger( $event, args );\r\n    } else {\r\n      // just trigger with type if no event available\r\n      this.$element.trigger( type, args );\r\n    }\r\n  }\r\n};\r\n\r\n// -------------------------- ignore & stamps -------------------------- //\r\n\r\n\r\n/**\r\n * keep item in collection, but do not lay it out\r\n * ignored items do not get skipped in layout\r\n * @param {Element} elem\r\n */\r\nproto.ignore = function( elem ) {\r\n  var item = this.getItem( elem );\r\n  if ( item ) {\r\n    item.isIgnored = true;\r\n  }\r\n};\r\n\r\n/**\r\n * return item to layout collection\r\n * @param {Element} elem\r\n */\r\nproto.unignore = function( elem ) {\r\n  var item = this.getItem( elem );\r\n  if ( item ) {\r\n    delete item.isIgnored;\r\n  }\r\n};\r\n\r\n/**\r\n * adds elements to stamps\r\n * @param {NodeList, Array, Element, or String} elems\r\n */\r\nproto.stamp = function( elems ) {\r\n  elems = this._find( elems );\r\n  if ( !elems ) {\r\n    return;\r\n  }\r\n\r\n  this.stamps = this.stamps.concat( elems );\r\n  // ignore\r\n  elems.forEach( this.ignore, this );\r\n};\r\n\r\n/**\r\n * removes elements to stamps\r\n * @param {NodeList, Array, or Element} elems\r\n */\r\nproto.unstamp = function( elems ) {\r\n  elems = this._find( elems );\r\n  if ( !elems ){\r\n    return;\r\n  }\r\n\r\n  elems.forEach( function( elem ) {\r\n    // filter out removed stamp elements\r\n    utils.removeFrom( this.stamps, elem );\r\n    this.unignore( elem );\r\n  }, this );\r\n};\r\n\r\n/**\r\n * finds child elements\r\n * @param {NodeList, Array, Element, or String} elems\r\n * @returns {Array} elems\r\n */\r\nproto._find = function( elems ) {\r\n  if ( !elems ) {\r\n    return;\r\n  }\r\n  // if string, use argument as selector string\r\n  if ( typeof elems == 'string' ) {\r\n    elems = this.element.querySelectorAll( elems );\r\n  }\r\n  elems = utils.makeArray( elems );\r\n  return elems;\r\n};\r\n\r\nproto._manageStamps = function() {\r\n  if ( !this.stamps || !this.stamps.length ) {\r\n    return;\r\n  }\r\n\r\n  this._getBoundingRect();\r\n\r\n  this.stamps.forEach( this._manageStamp, this );\r\n};\r\n\r\n// update boundingLeft / Top\r\nproto._getBoundingRect = function() {\r\n  // get bounding rect for container element\r\n  var boundingRect = this.element.getBoundingClientRect();\r\n  var size = this.size;\r\n  this._boundingRect = {\r\n    left: boundingRect.left + size.paddingLeft + size.borderLeftWidth,\r\n    top: boundingRect.top + size.paddingTop + size.borderTopWidth,\r\n    right: boundingRect.right - ( size.paddingRight + size.borderRightWidth ),\r\n    bottom: boundingRect.bottom - ( size.paddingBottom + size.borderBottomWidth )\r\n  };\r\n};\r\n\r\n/**\r\n * @param {Element} stamp\r\n**/\r\nproto._manageStamp = noop;\r\n\r\n/**\r\n * get x/y position of element relative to container element\r\n * @param {Element} elem\r\n * @returns {Object} offset - has left, top, right, bottom\r\n */\r\nproto._getElementOffset = function( elem ) {\r\n  var boundingRect = elem.getBoundingClientRect();\r\n  var thisRect = this._boundingRect;\r\n  var size = getSize( elem );\r\n  var offset = {\r\n    left: boundingRect.left - thisRect.left - size.marginLeft,\r\n    top: boundingRect.top - thisRect.top - size.marginTop,\r\n    right: thisRect.right - boundingRect.right - size.marginRight,\r\n    bottom: thisRect.bottom - boundingRect.bottom - size.marginBottom\r\n  };\r\n  return offset;\r\n};\r\n\r\n// -------------------------- resize -------------------------- //\r\n\r\n// enable event handlers for listeners\r\n// i.e. resize -> onresize\r\nproto.handleEvent = utils.handleEvent;\r\n\r\n/**\r\n * Bind layout to window resizing\r\n */\r\nproto.bindResize = function() {\r\n  window.addEventListener( 'resize', this );\r\n  this.isResizeBound = true;\r\n};\r\n\r\n/**\r\n * Unbind layout to window resizing\r\n */\r\nproto.unbindResize = function() {\r\n  window.removeEventListener( 'resize', this );\r\n  this.isResizeBound = false;\r\n};\r\n\r\nproto.onresize = function() {\r\n  this.resize();\r\n};\r\n\r\nutils.debounceMethod( Outlayer, 'onresize', 100 );\r\n\r\nproto.resize = function() {\r\n  // don't trigger if size did not change\r\n  // or if resize was unbound. See #9\r\n  if ( !this.isResizeBound || !this.needsResizeLayout() ) {\r\n    return;\r\n  }\r\n\r\n  this.layout();\r\n};\r\n\r\n/**\r\n * check if layout is needed post layout\r\n * @returns Boolean\r\n */\r\nproto.needsResizeLayout = function() {\r\n  var size = getSize( this.element );\r\n  // check that this.size and size are there\r\n  // IE8 triggers resize on body size change, so they might not be\r\n  var hasSizes = this.size && size;\r\n  return hasSizes && size.innerWidth !== this.size.innerWidth;\r\n};\r\n\r\n// -------------------------- methods -------------------------- //\r\n\r\n/**\r\n * add items to Outlayer instance\r\n * @param {Array or NodeList or Element} elems\r\n * @returns {Array} items - Outlayer.Items\r\n**/\r\nproto.addItems = function( elems ) {\r\n  var items = this._itemize( elems );\r\n  // add items to collection\r\n  if ( items.length ) {\r\n    this.items = this.items.concat( items );\r\n  }\r\n  return items;\r\n};\r\n\r\n/**\r\n * Layout newly-appended item elements\r\n * @param {Array or NodeList or Element} elems\r\n */\r\nproto.appended = function( elems ) {\r\n  var items = this.addItems( elems );\r\n  if ( !items.length ) {\r\n    return;\r\n  }\r\n  // layout and reveal just the new items\r\n  this.layoutItems( items, true );\r\n  this.reveal( items );\r\n};\r\n\r\n/**\r\n * Layout prepended elements\r\n * @param {Array or NodeList or Element} elems\r\n */\r\nproto.prepended = function( elems ) {\r\n  var items = this._itemize( elems );\r\n  if ( !items.length ) {\r\n    return;\r\n  }\r\n  // add items to beginning of collection\r\n  var previousItems = this.items.slice(0);\r\n  this.items = items.concat( previousItems );\r\n  // start new layout\r\n  this._resetLayout();\r\n  this._manageStamps();\r\n  // layout new stuff without transition\r\n  this.layoutItems( items, true );\r\n  this.reveal( items );\r\n  // layout previous items\r\n  this.layoutItems( previousItems );\r\n};\r\n\r\n/**\r\n * reveal a collection of items\r\n * @param {Array of Outlayer.Items} items\r\n */\r\nproto.reveal = function( items ) {\r\n  this._emitCompleteOnItems( 'reveal', items );\r\n  if ( !items || !items.length ) {\r\n    return;\r\n  }\r\n  var stagger = this.updateStagger();\r\n  items.forEach( function( item, i ) {\r\n    item.stagger( i * stagger );\r\n    item.reveal();\r\n  });\r\n};\r\n\r\n/**\r\n * hide a collection of items\r\n * @param {Array of Outlayer.Items} items\r\n */\r\nproto.hide = function( items ) {\r\n  this._emitCompleteOnItems( 'hide', items );\r\n  if ( !items || !items.length ) {\r\n    return;\r\n  }\r\n  var stagger = this.updateStagger();\r\n  items.forEach( function( item, i ) {\r\n    item.stagger( i * stagger );\r\n    item.hide();\r\n  });\r\n};\r\n\r\n/**\r\n * reveal item elements\r\n * @param {Array}, {Element}, {NodeList} items\r\n */\r\nproto.revealItemElements = function( elems ) {\r\n  var items = this.getItems( elems );\r\n  this.reveal( items );\r\n};\r\n\r\n/**\r\n * hide item elements\r\n * @param {Array}, {Element}, {NodeList} items\r\n */\r\nproto.hideItemElements = function( elems ) {\r\n  var items = this.getItems( elems );\r\n  this.hide( items );\r\n};\r\n\r\n/**\r\n * get Outlayer.Item, given an Element\r\n * @param {Element} elem\r\n * @param {Function} callback\r\n * @returns {Outlayer.Item} item\r\n */\r\nproto.getItem = function( elem ) {\r\n  // loop through items to get the one that matches\r\n  for ( var i=0; i < this.items.length; i++ ) {\r\n    var item = this.items[i];\r\n    if ( item.element == elem ) {\r\n      // return item\r\n      return item;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * get collection of Outlayer.Items, given Elements\r\n * @param {Array} elems\r\n * @returns {Array} items - Outlayer.Items\r\n */\r\nproto.getItems = function( elems ) {\r\n  elems = utils.makeArray( elems );\r\n  var items = [];\r\n  elems.forEach( function( elem ) {\r\n    var item = this.getItem( elem );\r\n    if ( item ) {\r\n      items.push( item );\r\n    }\r\n  }, this );\r\n\r\n  return items;\r\n};\r\n\r\n/**\r\n * remove element(s) from instance and DOM\r\n * @param {Array or NodeList or Element} elems\r\n */\r\nproto.remove = function( elems ) {\r\n  var removeItems = this.getItems( elems );\r\n\r\n  this._emitCompleteOnItems( 'remove', removeItems );\r\n\r\n  // bail if no items to remove\r\n  if ( !removeItems || !removeItems.length ) {\r\n    return;\r\n  }\r\n\r\n  removeItems.forEach( function( item ) {\r\n    item.remove();\r\n    // remove item from collection\r\n    utils.removeFrom( this.items, item );\r\n  }, this );\r\n};\r\n\r\n// ----- destroy ----- //\r\n\r\n// remove and disable Outlayer instance\r\nproto.destroy = function() {\r\n  // clean up dynamic styles\r\n  var style = this.element.style;\r\n  style.height = '';\r\n  style.position = '';\r\n  style.width = '';\r\n  // destroy items\r\n  this.items.forEach( function( item ) {\r\n    item.destroy();\r\n  });\r\n\r\n  this.unbindResize();\r\n\r\n  var id = this.element.outlayerGUID;\r\n  delete instances[ id ]; // remove reference to instance by id\r\n  delete this.element.outlayerGUID;\r\n  // remove data for jQuery\r\n  if ( jQuery ) {\r\n    jQuery.removeData( this.element, this.constructor.namespace );\r\n  }\r\n\r\n};\r\n\r\n// -------------------------- data -------------------------- //\r\n\r\n/**\r\n * get Outlayer instance from element\r\n * @param {Element} elem\r\n * @returns {Outlayer}\r\n */\r\nOutlayer.data = function( elem ) {\r\n  elem = utils.getQueryElement( elem );\r\n  var id = elem && elem.outlayerGUID;\r\n  return id && instances[ id ];\r\n};\r\n\r\n\r\n// -------------------------- create Outlayer class -------------------------- //\r\n\r\n/**\r\n * create a layout class\r\n * @param {String} namespace\r\n */\r\nOutlayer.create = function( namespace, options ) {\r\n  // sub-class Outlayer\r\n  var Layout = subclass( Outlayer );\r\n  // apply new options and compatOptions\r\n  Layout.defaults = utils.extend( {}, Outlayer.defaults );\r\n  utils.extend( Layout.defaults, options );\r\n  Layout.compatOptions = utils.extend( {}, Outlayer.compatOptions  );\r\n\r\n  Layout.namespace = namespace;\r\n\r\n  Layout.data = Outlayer.data;\r\n\r\n  // sub-class Item\r\n  Layout.Item = subclass( Item );\r\n\r\n  // -------------------------- declarative -------------------------- //\r\n\r\n  utils.htmlInit( Layout, namespace );\r\n\r\n  // -------------------------- jQuery bridge -------------------------- //\r\n\r\n  // make into jQuery plugin\r\n  if ( jQuery && jQuery.bridget ) {\r\n    jQuery.bridget( namespace, Layout );\r\n  }\r\n\r\n  return Layout;\r\n};\r\n\r\nfunction subclass( Parent ) {\r\n  function SubClass() {\r\n    Parent.apply( this, arguments );\r\n  }\r\n\r\n  SubClass.prototype = Object.create( Parent.prototype );\r\n  SubClass.prototype.constructor = SubClass;\r\n\r\n  return SubClass;\r\n}\r\n\r\n// ----- helpers ----- //\r\n\r\n// how many milliseconds are in each unit\r\nvar msUnits = {\r\n  ms: 1,\r\n  s: 1000\r\n};\r\n\r\n// munge time-like parameter into millisecond number\r\n// '0.4s' -> 40\r\nfunction getMilliseconds( time ) {\r\n  if ( typeof time == 'number' ) {\r\n    return time;\r\n  }\r\n  var matches = time.match( /(^\\d*\\.?\\d*)(\\w*)/ );\r\n  var num = matches && matches[1];\r\n  var unit = matches && matches[2];\r\n  if ( !num.length ) {\r\n    return 0;\r\n  }\r\n  num = parseFloat( num );\r\n  var mult = msUnits[ unit ] || 1;\r\n  return num * mult;\r\n}\r\n\r\n// ----- fin ----- //\r\n\r\n// back in global\r\nOutlayer.Item = Item;\r\n\r\nreturn Outlayer;\r\n\r\n}));\r\n\r\n/*!\r\n * Masonry v4.2.0\r\n * Cascading grid layout library\r\n * http://masonry.desandro.com\r\n * MIT License\r\n * by David DeSandro\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( [\r\n        'outlayer/outlayer',\r\n        'get-size/get-size'\r\n      ],\r\n      factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('outlayer'),\r\n      require('get-size')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Masonry = factory(\r\n      window.Outlayer,\r\n      window.getSize\r\n    );\r\n  }\r\n\r\n}( window, function factory( Outlayer, getSize ) {\r\n\r\n\r\n\r\n// -------------------------- masonryDefinition -------------------------- //\r\n\r\n  // create an Outlayer layout class\r\n  var Masonry = Outlayer.create('masonry');\r\n  // isFitWidth -> fitWidth\r\n  Masonry.compatOptions.fitWidth = 'isFitWidth';\r\n\r\n  var proto = Masonry.prototype;\r\n\r\n  proto._resetLayout = function() {\r\n    this.getSize();\r\n    this._getMeasurement( 'columnWidth', 'outerWidth' );\r\n    this._getMeasurement( 'gutter', 'outerWidth' );\r\n    this.measureColumns();\r\n\r\n    // reset column Y\r\n    this.colYs = [];\r\n    for ( var i=0; i < this.cols; i++ ) {\r\n      this.colYs.push( 0 );\r\n    }\r\n\r\n    this.maxY = 0;\r\n    this.horizontalColIndex = 0;\r\n  };\r\n\r\n  proto.measureColumns = function() {\r\n    this.getContainerWidth();\r\n    // if columnWidth is 0, default to outerWidth of first item\r\n    if ( !this.columnWidth ) {\r\n      var firstItem = this.items[0];\r\n      var firstItemElem = firstItem && firstItem.element;\r\n      // columnWidth fall back to item of first element\r\n      this.columnWidth = firstItemElem && getSize( firstItemElem ).outerWidth ||\r\n        // if first elem has no width, default to size of container\r\n        this.containerWidth;\r\n    }\r\n\r\n    var columnWidth = this.columnWidth += this.gutter;\r\n\r\n    // calculate columns\r\n    var containerWidth = this.containerWidth + this.gutter;\r\n    var cols = containerWidth / columnWidth;\r\n    // fix rounding errors, typically with gutters\r\n    var excess = columnWidth - containerWidth % columnWidth;\r\n    // if overshoot is less than a pixel, round up, otherwise floor it\r\n    var mathMethod = excess && excess < 1 ? 'round' : 'floor';\r\n    cols = Math[ mathMethod ]( cols );\r\n    this.cols = Math.max( cols, 1 );\r\n  };\r\n\r\n  proto.getContainerWidth = function() {\r\n    // container is parent if fit width\r\n    var isFitWidth = this._getOption('fitWidth');\r\n    var container = isFitWidth ? this.element.parentNode : this.element;\r\n    // check that this.size and size are there\r\n    // IE8 triggers resize on body size change, so they might not be\r\n    var size = getSize( container );\r\n    this.containerWidth = size && size.innerWidth;\r\n  };\r\n\r\n  proto._getItemLayoutPosition = function( item ) {\r\n    item.getSize();\r\n    // how many columns does this brick span\r\n    var remainder = item.size.outerWidth % this.columnWidth;\r\n    var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\r\n    // round if off by 1 pixel, otherwise use ceil\r\n    var colSpan = Math[ mathMethod ]( item.size.outerWidth / this.columnWidth );\r\n    colSpan = Math.min( colSpan, this.cols );\r\n    // use horizontal or top column position\r\n    var colPosMethod = this.options.horizontalOrder ?\r\n      '_getHorizontalColPosition' : '_getTopColPosition';\r\n    var colPosition = this[ colPosMethod ]( colSpan, item );\r\n    // position the brick\r\n    var position = {\r\n      x: this.columnWidth * colPosition.col,\r\n      y: colPosition.y\r\n    };\r\n    // apply setHeight to necessary columns\r\n    var setHeight = colPosition.y + item.size.outerHeight;\r\n    var setMax = colSpan + colPosition.col;\r\n    for ( var i = colPosition.col; i < setMax; i++ ) {\r\n      this.colYs[i] = setHeight;\r\n    }\r\n\r\n    return position;\r\n  };\r\n\r\n  proto._getTopColPosition = function( colSpan ) {\r\n    var colGroup = this._getTopColGroup( colSpan );\r\n    // get the minimum Y value from the columns\r\n    var minimumY = Math.min.apply( Math, colGroup );\r\n\r\n    return {\r\n      col: colGroup.indexOf( minimumY ),\r\n      y: minimumY,\r\n    };\r\n  };\r\n\r\n  /**\r\n   * @param {Number} colSpan - number of columns the element spans\r\n   * @returns {Array} colGroup\r\n   */\r\n  proto._getTopColGroup = function( colSpan ) {\r\n    if ( colSpan < 2 ) {\r\n      // if brick spans only one column, use all the column Ys\r\n      return this.colYs;\r\n    }\r\n\r\n    var colGroup = [];\r\n    // how many different places could this brick fit horizontally\r\n    var groupCount = this.cols + 1 - colSpan;\r\n    // for each group potential horizontal position\r\n    for ( var i = 0; i < groupCount; i++ ) {\r\n      colGroup[i] = this._getColGroupY( i, colSpan );\r\n    }\r\n    return colGroup;\r\n  };\r\n\r\n  proto._getColGroupY = function( col, colSpan ) {\r\n    if ( colSpan < 2 ) {\r\n      return this.colYs[ col ];\r\n    }\r\n    // make an array of colY values for that one group\r\n    var groupColYs = this.colYs.slice( col, col + colSpan );\r\n    // and get the max value of the array\r\n    return Math.max.apply( Math, groupColYs );\r\n  };\r\n\r\n  // get column position based on horizontal index. #873\r\n  proto._getHorizontalColPosition = function( colSpan, item ) {\r\n    var col = this.horizontalColIndex % this.cols;\r\n    var isOver = colSpan > 1 && col + colSpan > this.cols;\r\n    // shift to next row if item can't fit on current row\r\n    col = isOver ? 0 : col;\r\n    // don't let zero-size items take up space\r\n    var hasSize = item.size.outerWidth && item.size.outerHeight;\r\n    this.horizontalColIndex = hasSize ? col + colSpan : this.horizontalColIndex;\r\n\r\n    return {\r\n      col: col,\r\n      y: this._getColGroupY( col, colSpan ),\r\n    };\r\n  };\r\n\r\n  proto._manageStamp = function( stamp ) {\r\n    var stampSize = getSize( stamp );\r\n    var offset = this._getElementOffset( stamp );\r\n    // get the columns that this stamp affects\r\n    var isOriginLeft = this._getOption('originLeft');\r\n    var firstX = isOriginLeft ? offset.left : offset.right;\r\n    var lastX = firstX + stampSize.outerWidth;\r\n    var firstCol = Math.floor( firstX / this.columnWidth );\r\n    firstCol = Math.max( 0, firstCol );\r\n    var lastCol = Math.floor( lastX / this.columnWidth );\r\n    // lastCol should not go over if multiple of columnWidth #425\r\n    lastCol -= lastX % this.columnWidth ? 0 : 1;\r\n    lastCol = Math.min( this.cols - 1, lastCol );\r\n    // set colYs to bottom of the stamp\r\n\r\n    var isOriginTop = this._getOption('originTop');\r\n    var stampMaxY = ( isOriginTop ? offset.top : offset.bottom ) +\r\n      stampSize.outerHeight;\r\n    for ( var i = firstCol; i <= lastCol; i++ ) {\r\n      this.colYs[i] = Math.max( stampMaxY, this.colYs[i] );\r\n    }\r\n  };\r\n\r\n  proto._getContainerSize = function() {\r\n    this.maxY = Math.max.apply( Math, this.colYs );\r\n    var size = {\r\n      height: this.maxY\r\n    };\r\n\r\n    if ( this._getOption('fitWidth') ) {\r\n      size.width = this._getContainerFitWidth();\r\n    }\r\n\r\n    return size;\r\n  };\r\n\r\n  proto._getContainerFitWidth = function() {\r\n    var unusedCols = 0;\r\n    // count unused columns\r\n    var i = this.cols;\r\n    while ( --i ) {\r\n      if ( this.colYs[i] !== 0 ) {\r\n        break;\r\n      }\r\n      unusedCols++;\r\n    }\r\n    // fit container to columns that have been used\r\n    return ( this.cols - unusedCols ) * this.columnWidth - this.gutter;\r\n  };\r\n\r\n  proto.needsResizeLayout = function() {\r\n    var previousWidth = this.containerWidth;\r\n    this.getContainerWidth();\r\n    return previousWidth != this.containerWidth;\r\n  };\r\n\r\n  return Masonry;\r\n\r\n}));\r\n","'use strict';\r\n    // see:\r\n    // http://ejohn.org/blog/javascript-micro-templating/\r\n\r\n    // Simple JavaScript Templating\r\n    // John Resig - http://ejohn.org/ - MIT Licensed\r\n\r\n    var cache = {};\r\n\r\n    function tmpl(str, data) {\r\n        // Figure out if we're getting a template, or if we need to\r\n        // load the template - and be sure to cache the result.\r\n        var fn = !/\\W/.test(str) ?\r\n          cache[str] = cache[str] ||\r\n            tmpl(document.getElementById(str).innerHTML) :\r\n\r\n          // Generate a reusable function that will serve as a template\r\n          // generator (and which will be cached).\r\n          new Function(\"obj\",\r\n            \"var p=[],print=function(){p.push.apply(p,arguments);};\" +\r\n\r\n            // Introduce the data as local variables using with(){}\r\n            \"with(obj){p.push('\" +\r\n\r\n            // Convert the template into pure JavaScript\r\n            str\r\n              .replace(/[\\r\\t\\n]/g, \" \")\r\n              .split(\"<%\").join(\"\\t\")\r\n              .replace(/((^|%>)[^\\t]*)'/g, \"$1\\r\")\r\n              .replace(/\\t=(.*?)%>/g, \"',$1,'\")\r\n              .split(\"\\t\").join(\"');\")\r\n              .split(\"%>\").join(\"p.push('\")\r\n              .split(\"\\r\").join(\"\\\\'\")\r\n          + \"');}return p.join('');\");\r\n\r\n        // Provide some basic currying to the user\r\n        return data ? fn( data ) : fn;\r\n      };\r\n","        'use strict';\r\n\r\n        let $value = randWDclassic(1);\r\n\r\n        function randWDclassic(n) {\r\n            let s ='';\r\n            let abd ='abcdefghijklmnopqrstuvwxyz1234567890йцукенгшщзхфывапролджэячсмитбю';\r\n            let aL = abd.length;\r\n            while(s.length < n)\r\n            s += abd[Math.random() * aL|0];\r\n            return s;\r\n        };\r\n\r\n        $.ajax({\r\n            url: 'https://pixabay.com/api/',\r\n            method: 'GET',\r\n            dataType: 'jsonp',\r\n            data: {\r\n                key: '5069177-dbb9700ef5f333933be917c5e',\r\n                q: $value,\r\n                image_type: 'photo',\r\n                callback: 'ServerPhotoCallback',\r\n                per_page: 7,\r\n                category: 'travel',\r\n                min_width: 200\r\n            }\r\n        });\r\n\r\n        window.ServerPhotoCallback = function ($data) {\r\n\r\n            let $html = $('#activity--bar-out').html();\r\n            // let $html = templateBingImg\r\n            let $dataTmpl = {\r\n                $data: $data\r\n            };\r\n            let $SearchContent = tmpl($html, $dataTmpl);\r\n\r\n            $('#activity--bar-in').html('');\r\n            $('#activity--bar-in').append($SearchContent);\r\n\r\n            bar();\r\n        }\r\n\r\n        $('form').submit(function(event) {\r\n\r\n            event.preventDefault();\r\n            $value = $('#activity--search').val();\r\n            $.ajax({\r\n                url: 'https://pixabay.com/api/',\r\n                method: 'GET',\r\n                dataType: 'jsonp',\r\n                data: {\r\n                    key: '5069177-dbb9700ef5f333933be917c5e',\r\n                    q: $value,\r\n                    image_type: 'photo',\r\n                    callback: 'ServerPhotoCallback',\r\n                    per_page: 7,\r\n                    category: 'travel',\r\n                    min_width: 200\r\n                }\r\n            });\r\n            $('#activity--search').val('');\r\n        });\r\n\r\n        function bar() {\r\n            let $grid = $('#activity--bar-in').imagesLoaded( function() {\r\n                // init Masonry after all images have loaded\r\n                $grid.masonry({\r\n                    itemSelector: '.grid-item',\r\n                    columnWidth: '.grid-item'\r\n                })\r\n            })\r\n        };\r\n","$('.bxslider').bxSlider()\n","    let $templateScript =\r\n    '<%' + 'var $array = $data.data;' +\r\n    'for (let i = 0; i < $array.length; i++) {%>' +\r\n    '<div class=\"partners--template\">' +\r\n    '<div class=\"partners--photo\" style=\"background-image:url(<%=$array[i].photo%>)\">' +\r\n    '<div class=\"partners--embl\" style=\"background-image:url(<%=$array[i].icon%>);background-color:#<%=$array[i].colorIcon%>\"></div>' +\r\n    '</div>' +\r\n    '<p class=\"partners--name\"><%=$array[i].name%> <%=$array[i].surname%></p>' +\r\n    '<p class=\"partners--text\"><%=$array[i].info%></p>' +\r\n    '</div>' +\r\n    '<%}%>';\r\n","        let $jsData = JSON.parse($serverData);\r\n        let $html = partnerHtml;\r\n        let $dataTmpl = {\r\n            $data: $jsData\r\n        }\r\n        let $content = template($html, $dataTmpl)\r\n\r\n        $('#partners--template__in').html('')\r\n        $('#partners--template__in').append($content)\r\n","    'use strict';\r\n    //Server start\r\n    let $ServerData =\r\n    {\r\n        id: 100,\r\n        data: [\r\n            {\r\n                id: 104,\r\n                name: \"Bradley\",\r\n                surname: \"Hunter\",\r\n                photo: 'img/partners--hunter__mobile.png',\r\n                info: \"Based in Chicago. I love playing tennis and loud music.\",\r\n                colorIcon: '4e73db',\r\n                icon: 'img/partners--airplane.svg'\r\n            },\r\n            {\r\n                id: 102,\r\n                name: \"Lucas\",\r\n                surname: \"Marsha\",\r\n                photo: 'img/partners--marsha__mobile.png',\r\n                info: \"I get my inspiration from nature and objects around me. I have a passion to colours, typography and skateboards.\",\r\n                colorIcon: 'ffa507',\r\n                icon: 'img/partners--flask.svg'\r\n            },\r\n            {\r\n                id: 103,\r\n                name: \"Heather\",\r\n                surname: \"Walker\",\r\n                photo: 'img/partners--walker__mobile.png',\r\n                info: \"I'm a happy person that loves cats and climbing on mountains.\",\r\n                colorIcon: '1cd7ad',\r\n                icon: 'img/partners--cup.svg'\r\n            },\r\n            {\r\n                id: 101,\r\n                name: \"Gogas\",\r\n                surname: \"Hunter\",\r\n                photo: 'img/partners--hunter2__mobile.png',\r\n                info: \"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore \",\r\n                colorIcon: 'ff4e50',\r\n                icon: 'img/partners--tv.svg'\r\n            }\r\n        ]\r\n    };\r\n    let $serverData = JSON.stringify($ServerData);\r\n    //Server end\r\n"]}